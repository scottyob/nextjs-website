<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/2aaf0723e720e8b9-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/42e58f5a516ebb1b-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/4e8dfc5aa8742fdc-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/8679c800f1e60000-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/af1939b13935fec8-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/8a1e8ec2da824aa2.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/c2c1ea965511607d.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/e1665b43251c86eb.css" data-precedence="next"/><link rel="preload" href="/_next/static/chunks/webpack-6a94f4f450a79057.js" as="script"/><link rel="preload" href="/_next/static/chunks/fd9d1056-f562485b1666a0a3.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-5b64dbf019a905f5.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-app-c71b577ad5f96a17.js" as="script"/><title>Scott O&#x27;Brien</title><meta name="description" content="My online creative outlet"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_20951f"><div class="flex max-w-full w-full flex-col pt-8 pb-8"><div class="self-center w-full"><h1 class="text-center text-4xl __className_31da3a"><a href="/">Scott O&#x27;Brien</a></h1><ul class="flex flex-wrap justify-center text-gray-400 italic pt-3 mb-8 max-w-2xl w-[80%] m-auto [&amp;&gt;li]:ml-3 [&amp;&gt;li]:mr-3 [&amp;_svg]:inline [&amp;_svg]:mr-1 __className_4f8416"><li class="transition group duration-300 whitespace-nowrap"><a href="/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M6 10l2-1 7-7-1-1-7 7-1 2zM4.52 13.548c-0.494-1.043-1.026-1.574-2.069-2.069l1.548-4.262 2-1.217 6-6h-3l-6 6-3 10 10-3 6-6v-3l-6 6-1.217 2z"></path></svg>Writings/Projects</a><span class="block group-hover:max-w-[75%] m-auto transition-all duration-500 h-0.5 max-w-[85%] bg-orange-500"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/about/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9 1.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5z"></path><path d="M9 4h-3c-0.552 0-1 0.448-1 1v5h1v6h1.25v-6h0.5v6h1.25v-6h1v-5c0-0.552-0.448-1-1-1z"></path></svg>About</a><span class="block group-hover:max-w-[75%] m-auto transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/bucketlist/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"></path><path d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"></path></svg>Bucket List</a><span class="block group-hover:max-w-[75%] m-auto transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/recipes/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M151.7 16.73s-20.6 14.12-22 25.18c-1.4 11.33 17.6 19.24 15.6 30.48-1.3 7.43-16.6 15.38-16.6 15.38s38.7-3.36 42.3-18.3c2.9-11.82-19.8-16.61-23-28.35-2.1-7.94 3.7-24.39 3.7-24.39zm214.4 4.89s-24.8 13.58-24.9 25.45c-.1 7.24 14.4 8.67 14.8 15.9.5 8.56-15.3 20.68-15.3 20.68s33.6-3.81 38.1-16.97c2.7-7.77-9.4-13.81-11.6-21.73-2.1-7.5-1.1-23.33-1.1-23.33zm-106.9.26s-26.9 13.75-24.9 25.45c1.4 7.93 20.6 2.62 21.7 10.6 1.7 13.01-29.6 25.98-29.6 25.98s56.5-1.44 58.8-22.27c1.1-9.88-20-7.79-24.9-16.43-3.9-6.77-1.1-23.33-1.1-23.33zM48 105.6v18h416v-18zm16 37c-14.48 86.9 16.9 138.1 58.6 168.2-3.6-24.8-14.1-49.1-35.06-72.2 39.96 10.5 71.36 48.8 85.36 87.2 2.3-18.8 2.3-27.5 19.5-44.2-3.1 24.8 11.2 26.5 21.2 23.4 25.3-7.9 35.6-39.5 10.6-78.9 47.6 22.7 48.3 48.4 56.3 83.7-2.4-33.2 24.3-46.5 43.7-34-45.1 22.7-8.2 42.2 6.9 47 40 12.8 70-46.3 87.2-91 4.7 19.8.8 39.7-6.5 59.5C441.4 260 459.7 213 448 142.6zm184.3 175.2L75 417.5c2.7 18.4 9 34.4 18.8 48.5l92-44.1-78.7 59.9c3.4 3.4 7.1 6.6 11 9.7l74.7-42.9c0-.7-.1-1.5-.1-2.2 0-37.2 30.5-67.6 67.8-67.6 10.6 0 20.6 2.4 29.5 6.7-2.4-13.4-7.3-27.1-14.8-39.2l-94.9 40.1 82.5-56.5c-4.4-4.5-9.2-8.6-14.5-12.1zm58.9 57.6c1.6 7.2 2.6 14.4 3 21.4l.2 3.9c11.1 12 17.9 28.1 17.9 45.7 0 7.8-1.3 15.3-3.8 22.2l91.4 24.4c4.6-6.3 8.6-12.8 11.8-19.4l-63.1-24.7 70.1 6.9c.9-3 1.6-5.9 2.2-8.9l-97.1-34.3 99.2 15.5c.2-5.8-.1-11.7-.8-17.7zm-46.7 22.1c-27.2 0-49.1 21.8-49.1 48.9 0 27.1 21.9 48.9 49.1 48.9 27.3 0 49.2-21.8 49.2-48.9 0-27.1-21.9-48.9-49.2-48.9zm-4.9 11.8c43.8 0 58.4 71.6 0 71.6 26.6-23.1 29.8-46.9 0-71.6zm.2 9.8c-21.6 17.9-19.3 35.2 0 52-42.4 0-31.8-52 0-52z"></path></svg>Cooking</a><span class="block group-hover:max-w-[75%] m-auto transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/flying/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M487 37.1C396.4 53.23 292 95.28 207.5 140 163 163.6 124 187.8 95.39 209.2 81.08 220 69.36 230 60.93 238.6c-8.43 8.7-13.38 16.3-14.65 20.3-9.04 28.7-3.42 57.7 1.73 84.7 9.55 50.4-3.23 88.9-22.98 126.3 25.24-5.7 45.36-19.8 57-47 8.47-19.8 9.13-37 11.43-57.6 2.3-20.6 6.45-44.2 22.44-73.2l.2-.4.2-.4c8.8-12.6 26.2-22.2 50-33.4 23.7-11.2 53.6-23 86-35.1 63.8-23.8 137.2-48.7 190.1-71.3 20-30.1 34-74.24 44.6-114.4zm-55 138.2c-51.7 21-116.6 43.1-173.5 64.3-32.2 12-61.8 23.7-84.6 34.5-22.6 10.7-38.5 21.6-42.6 27.2-6.8 12.3-11.1 23.2-14 33.3 83.4-6.5 195.3-31.8 271.3-66.6 27.4-29.7 36.9-59.7 43.4-92.7zm-58 118.8c-79 32.2-182 53.3-260.8 58.6-.9 5-1.5 9.8-2 14.6-.4 3.5-.7 7.1-1.1 10.6 72.4 7.5 136.3 4 206.2-6.5 32.6-22.5 49.8-49.6 57.7-77.3zm-78.4 98.2c-62.3 8.1-121.6 10.2-187.6 3.4-.7 4.5-1.6 9-2.7 13.6 35.9 19.2 98.1 25.8 140.7 24.6 30.2-12.4 41.5-24.8 49.6-41.6zM99.78 426.7c-1.15 2.1-3.14 6.7-4.21 8.9 14.03 20.2 48.73 32.2 88.43 39.3 21.2-8 28.3-15.5 36.5-23-39.7-1.1-86.7-7.7-120.7-25.2z"></path></svg>Flying</a><span class="block group-hover:max-w-[75%] m-auto transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li></ul></div><div class="w-full flex flex-col" id="main-content"><div class="self-center mt-7 max-w-2xl w-[80%]"><article class=""><div class="__className_12746b mb-9"><h2 class="__className_df02b7 text-2xl">Ardupilot Postmortem</h2><div class="text-xs text-gray-400 italic mb-5">Created: <span>11/27/2022, 12:00:00 AM</span></div><img alt="Post picture" loading="lazy" width="2048" height="1536" decoding="async" data-nimg="1" class="m-auto mb-5" style="color:transparent" src="/_next/static/media/crash.15f71183.jpg"/><div class="prose lg:prose-lg"><p><em>A big thanks to those who helped from the <a href="https://discuss.ardupilot.org/t/crash-postmortem-why-the-pitch-down/93666/13">Ardupilot Forum</a></em></p>
<p>Last week, I took a few extra days off from work to give myself a nice long break over Thanksgiving week.</p>
<p>I spent a lot of time finishing an RC plane we had some replacement parts for. This one was going to be autonomous. I spent a few days soldering the flight controller and electronics, gluing the plane together, measuring and trimming everything perfectly. It was perfectly balanced, perfectly weighted. We finally took it out for its maiden flight today, Sunday November 27.  Sadly, this story ends in pieces.</p>
<!-- -->
<p>This post is a postmortem of the incident to make sense of what happened.  I was flying using Ardupilot and had an SD card in recording the data.  Although I can&#x27;t be certain, I&#x27;m pretty sure we can use this data to root cause the issues.</p>
<h3>Plane Hardware</h3>
<ul>
<li><strong>Plane</strong>: <a href="https://hobbyking.com/en_us/h-king-bixler-3-glider-1550-pnf.html">Bixler 3</a></li>
<li><strong>Flight Controller</strong>: <a href="https://ardupilot.org/copter/docs/common-holybro-kakutef7aio.html">Holybro Kakute F7</a></li>
<li><strong>GPS, Compass</strong>: <a href="https://ardupilot.org/copter/docs/common-beitian-gps.html">Beitian BN-880</a></li>
<li><strong>Ardupilot</strong>: Arduplane V4.3.1</li>
</ul>
<h3>Tools &amp; Files</h3>
<ul>
<li><a href="https://ardupilot.org/dev/docs/common-uavlogviewer.html">UAV Logviewer</a></li>
<li>Ardupilot <strong><a href="/posts/2022-11-27-ardupilot-postmortem/log-KMAND2L6.bin">LOG FILE</a></strong></li>
</ul>
<h3>Theories &amp; Investigation</h3>
<p>The flight controller has a BMP280 barometer to measure the altitude quickly, and a ICM20689 IMU for acceleration and gyro.  There is also a slower-updating GPS, so between these instruments, I expect fairly accurate altitude and position readings.  The plane behaved erratically twice in the short two-minute flight.  After combing through the available data, I suspect two failures during this flight.  What follows is a timeline of the events of the flight and notes on each incident.</p>
<h3>Events in Flight</h3>
<h4>1. Bad Altitude Readings Pre-Launch</h4>
<p>The first noteworthy item is that the altitude readings from the barometer and accelerometer are bogus.  I seem to be getting more realistic readings from the GPS.  Going forward, any screenshots will be from the GPS altitude.</p>
<video width="100%" loop="" controls="" autoPlay="" muted=""><source src="/posts/2022-11-27-ardupilot-postmortem/altitude-RAUVJW27.mp4"/></video>
<img src="/posts/2022-11-27-ardupilot-postmortem/Altitude-BHKRJHSQ.jpg" alt="Altitude"/>
<p>The altitude readings are super interesting here.  You can tell even before I launch the plane, the GPS altitude readings are between -13m and 0m.  Not sure what this altitude is (above sea level?  Above ground level?? Either way, this flight took place very nearly at sea level.)</p>
<p>More concerning, the barometer altitude is between -10 and -70m in the ~1 minute before launch on the ground.  The calculated AHRS (Attitude Heading Reference System) altitude at somewhat similar, -9 and -80  🫤</p>
<h4>ROOT CAUSE</h4>
<p>As mentioned, the Ardupilot software uses a combination of an accelerometer, GPS, and barometer to calculate the current altitude.  In this instance, the hardware was not faulty, but badly installed.</p>
<p>On this flight controller, the barometer is on the bottom of the board.  It has a little tiny hole in it to allow pressure sensing.  In my 🤡&#x27;y install, this is covered by hot glue and velcro.</p>
<p>While this didn&#x27;t cause a crash, it shows that I didn&#x27;t ground test the altitude, and any attempts at keeping altitude in autopilot mode may have been dangerous.</p>
<div class="image-gallery" aria-live="polite"><div class="image-gallery-content  image-gallery-thumbnails-bottom"><div class="image-gallery-slide-wrapper  image-gallery-thumbnails-bottom"><button type="button" class="image-gallery-icon image-gallery-left-nav" aria-label="Previous Slide"><svg class="image-gallery-svg" xmlns="http://www.w3.org/2000/svg" viewBox="6 0 12 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></button><button type="button" class="image-gallery-icon image-gallery-right-nav" aria-label="Next Slide"><svg class="image-gallery-svg" xmlns="http://www.w3.org/2000/svg" viewBox="6 0 12 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></button><div class="image-gallery-swipe"><div class="image-gallery-slides"><div aria-label="Go to Slide 1" tabindex="-1" class="image-gallery-slide  image-gallery-center " style="display:inherit;-webkit-transform:translate3d(0%, 0, 0);-moz-transform:translate3d(0%, 0, 0);-ms-transform:translate3d(0%, 0, 0);-o-transform:translate3d(0%, 0, 0);transform:translate3d(0%, 0, 0)" role="button"><img class="image-gallery-image" src="/posts/2022-11-27-ardupilot-postmortem/baro-VVGVM4NG.jpg"/></div><div aria-label="Go to Slide 2" tabindex="-1" class="image-gallery-slide  image-gallery-right " style="display:inherit;-webkit-transform:translate3d(100%, 0, 0);-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0)" role="button"><img class="image-gallery-image" src="/posts/2022-11-27-ardupilot-postmortem/baro_debugging-4NNOSOKQ.jpg"/></div><div aria-label="Go to Slide 3" tabindex="-1" class="image-gallery-slide  image-gallery-left " style="display:inherit;-webkit-transform:translate3d(-100%, 0, 0);-moz-transform:translate3d(-100%, 0, 0);-ms-transform:translate3d(-100%, 0, 0);-o-transform:translate3d(-100%, 0, 0);transform:translate3d(-100%, 0, 0)" role="button"><img class="image-gallery-image" src="/posts/2022-11-27-ardupilot-postmortem/glue-FB65ZVF4.jpg"/></div></div></div><button type="button" class="image-gallery-icon image-gallery-play-button" aria-label="Play or Pause Slideshow"><svg class="image-gallery-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button type="button" class="image-gallery-icon image-gallery-fullscreen-button" aria-label="Open Fullscreen"><svg class="image-gallery-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg></button></div><div class="image-gallery-thumbnails-wrapper  image-gallery-thumbnails-bottom thumbnails-swipe-horizontal"><div class="image-gallery-thumbnails"><nav class="image-gallery-thumbnails-container" style="-webkit-transform:translate3d(0px, 0, 0);-moz-transform:translate3d(0px, 0, 0);-ms-transform:translate3d(0px, 0, 0);-o-transform:translate3d(0px, 0, 0);transform:translate3d(0px, 0, 0);transition:all 450ms ease-out" aria-label="Thumbnail Navigation"><button type="button" tabindex="0" aria-pressed="true" aria-label="Go to Slide 1" class="image-gallery-thumbnail active"><span class="image-gallery-thumbnail-inner"><img class="image-gallery-thumbnail-image" src="/posts/2022-11-27-ardupilot-postmortem/baro-VVGVM4NG.jpg"/></span></button><button type="button" tabindex="0" aria-pressed="false" aria-label="Go to Slide 2" class="image-gallery-thumbnail"><span class="image-gallery-thumbnail-inner"><img class="image-gallery-thumbnail-image" src="/posts/2022-11-27-ardupilot-postmortem/baro_debugging-4NNOSOKQ.jpg"/></span></button><button type="button" tabindex="0" aria-pressed="false" aria-label="Go to Slide 3" class="image-gallery-thumbnail"><span class="image-gallery-thumbnail-inner"><img class="image-gallery-thumbnail-image" src="/posts/2022-11-27-ardupilot-postmortem/glue-FB65ZVF4.jpg"/></span></button></nav></div></div></div></div>
<h4>2. Launch</h4>
<p>The maiden launch itself in manual mode was nominal.  You can hear me saying &quot;Good luck little plane&quot;.  It needed more than luck it seems!</p>
<div></div>
<h4>3. Fly-By-Wire Test</h4>
<p>At ~1 minute 22 seconds into the flight, I turned the flight mode from manual to <a href="https://ardupilot.org/plane/docs/fbwa-mode.html">Fly by wire A</a>, which should have had the effect of assisting the plane in straight line.  Looking at the radio stick input, I did not change the heading, but the autopilot sent this into a steep dive at this time.  A near miss where we avoided a crash here.</p>
<img src="/posts/2022-11-27-ardupilot-postmortem/fbw-KRKDJHCO.jpg" alt="Fly by wire setup"/>
<h5>Reversed Elevator</h5>
<img src="/posts/2022-11-27-ardupilot-postmortem/Nosedive1-REX4PBMP.jpg" alt="Graph showing first nose dive"/>
<p>12:24 is interesting here. If we look at the time we engage the autopilot, we can see the pitch heading down into the ground, before our roll even begins to change.  It ends up to a point where it&#x27;s almost completely nose down before we save it by switching to manual flight mode.</p>
<h5>Root Cause</h5>
<p>What&#x27;s interesting is that the pitch continues to fall, and the AETR elevator gets more and more positive.  Is it possible that we&#x27;re trying to correct the nose down and instead making it worse?  Here I did NOT check how the autopilot responds on the ground, and I instead tested in manual mode, and adjusted the Servo Output functions to work.  I should have instead checked this in combination with the Radio Calibration reverse settings</p>
<img src="/posts/2022-11-27-ardupilot-postmortem/radio-4I5FXGIA.jpg" alt="Controllers"/>
<img src="/posts/2022-11-27-ardupilot-postmortem/servo-ZALHGPTH.jpg" alt="Servos"/>
<h3>4. Crash (elevator failure?)</h3>
<p>This event makes me believe that I had an elevator failure during the flight. In a panic I &quot;checked&quot; my autopilot settings, and accidentally turned it on.</p>
<p><strong>Events:</strong></p>
<ul>
<li>Nominal flight approaching turn</li>
<li>Banks left to enter turn</li>
<li>Starts pitching down, control toggles are pulling back on the elevator, manual flight mode still engaged</li>
<li>Plane is not responsive and is still pitching down</li>
<li>After loosing much altitude, in a panic, RTL is engaged</li>
<li>Plane starts pitching nose down further once RTL is engaged (reversed elevator theory?) causing the epic crash with almost full speed, full nose down</li>
</ul>
<video width="100%" controls="" autoPlay="" muted=""><source src="/posts/2022-11-27-ardupilot-postmortem/crash-R6LWE4QN.mp4"/></video>
<p>Upon inspection, the suspected failed elevator servo is the one shown in black here.  When moving the control horns without power, I noticed that it slipped.  It&#x27;s possible it could have slipped in flight causing the loss of the ability to pitch up.  It&#x27;s also possible that the 915mhz SIK radio I was flying with for telemetry interfered with the servo (they do twitch then they&#x27;re close, but I had thought I had moved this far enough away).  I guess we&#x27;ll never truly know!</p>
<img src="/posts/2022-11-27-ardupilot-postmortem/crashed_servos-X65AQ5IA.jpg" alt="Crashed servos"/>
<video width="100%" controls="" autoPlay="" loop="" muted=""><source src="/posts/2022-11-27-ardupilot-postmortem/bad_servo-X4ZRFTYD.mp4"/></video>
<h3>Lessons</h3>
<ul>
<li>Don&#x27;t fly with so much throttle.  Mistakes happen a <em>lot</em> faster than it could otherwise happen</li>
<li>Test the FBWA modes on the ground.  Ensure that the elevator, ailerons and rudder is behaving as expected in relationship to pitch, roll movements.</li>
<li>Make sure you setup BOTH the reverse setting on the controller input, and servo output.</li>
<li>Be sure to glue in everything!  I&#x27;m not convinced a servo could have come loose during this flight.</li>
</ul></div></div></article></div></div></div><script src="/_next/static/chunks/webpack-6a94f4f450a79057.js" async=""></script><script src="/_next/static/chunks/fd9d1056-f562485b1666a0a3.js" async=""></script><script src="/_next/static/chunks/596-5b64dbf019a905f5.js" async=""></script><script src="/_next/static/chunks/main-app-c71b577ad5f96a17.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/8a1e8ec2da824aa2.css\",{\"as\":\"style\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/media/2aaf0723e720e8b9-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n4:HL[\"/_next/static/media/42e58f5a516ebb1b-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n5:HL[\"/_next/static/media/4e8dfc5aa8742fdc-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n6:HL[\"/_next/static/css/c2c1ea965511607d.css\",{\"as\":\"style\"}]\n7:HL[\"/_next/static/media/8679c800f1e60000-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n8:HL[\"/_next/static/media/af1939b13935fec8-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n9:HL["])</script><script>self.__next_f.push([1,"\"/_next/static/css/e1665b43251c86eb.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"a:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-6a94f4f450a79057.js\",\"971:static/chunks/fd9d1056-f562485b1666a0a3.js\",\"596:static/chunks/596-5b64dbf019a905f5.js\"],\"name\":\"default\",\"async\":false}\nc:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-6a94f4f450a79057.js\",\"971:static/chunks/fd9d1056-f562485b1666a0a3.js\",\"596:static/chunks/596-5b64dbf019a905f5.js\"],\"name\":\"GlobalError\",\"async\":false}\nd:I{\"id\":7767,\"chunks\":[\"272:static/chunks/webpack-6a94f4f450a79057.js\",\"971:static/chunks/fd9d1056-f562485b1666"])</script><script>self.__next_f.push([1,"a0a3.js\",\"596:static/chunks/596-5b64dbf019a905f5.js\"],\"name\":\"default\",\"async\":false}\ne:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpack-6a94f4f450a79057.js\",\"971:static/chunks/fd9d1056-f562485b1666a0a3.js\",\"596:static/chunks/596-5b64dbf019a905f5.js\"],\"name\":\"default\",\"async\":false}\nf:I{\"id\":6685,\"chunks\":[\"685:static/chunks/685-a0750907e0c935bc.js\",\"222:static/chunks/222-0c303d3189115893.js\",\"982:static/chunks/982-07d375c9d37b134d.js\",\"46:static/chunks/app/(navbar)/(margined)/page-6e97965ff90afede.js\"],\"na"])</script><script>self.__next_f.push([1,"me\":\"\",\"async\":false}\n10:I{\"id\":2179,\"chunks\":[\"724:static/chunks/358ff52d-5af8921f222f7c20.js\",\"122:static/chunks/e416a3ff-be1b889799c50168.js\",\"447:static/chunks/00cbbcb7-5522c112e5f40d45.js\",\"685:static/chunks/685-a0750907e0c935bc.js\",\"713:static/chunks/app/(navbar)/layout-e1a28f5172e21563.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/8a1e8ec2da824aa2.css\",\"precedence\":\"next\"}]],[\"$\",\"$La\",null,{\"buildId\":\"qM5d7cw-vDbPGZohIedvu\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/post/2022-11-27-ardupilot-postmortem/\",\"initialTree\":[\"\",{\"children\":[\"(navbar)\",{\"children\":[\"(margined)\",{\"children\":[\"post\",{\"children\":[[\"slug\",\"2022-11-27-ardupilot-postmortem\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"2022-11-27-ardupilot-postmortem\\\"]}\",{}]}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$Lb\",\"globalErrorComponent\":\"$c\",\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[[\"$\",\"body\",null,{\"className\":\"__className_20951f\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex max-w-full w-full flex-col pt-8 pb-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"self-center w-full\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-center text-4xl __className_31da3a\",\"children\":[\"$\",\"$Lf\",null,{\"href\":\"/\",\"children\":\"Scott O'Brien\"}]}],[\"$\",\"$L10\",null,{}]]}],[\"$\",\"div\",null,{\"className\":\"w-full flex flex-col\",\"id\":\"main-content\",\"children\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(navbar)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[[\"$\",\"div\",null,{\"className\":\"self-center mt-7 max-w-2xl w-[80%]\",\"children\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(navbar)\",\"children\",\"(margined)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(navbar)\",\"children\",\"(margined)\",\"children\",\"post\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(navbar)\",\"children\",\"(margined)\",\"children\",\"post\",\"children\",[\"slug\",\"2022-11-27-ardupilot-postmortem\",\"c\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$L11\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":[\\\"2022-11-27-ardupilot-postmortem\\\"]}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/e1665b43251c86eb.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"slug\",\"2022-11-27-ardupilot-postmortem\",\"c\"]},\"styles\":[]}],\"segment\":\"post\"},\"styles\":[]}]}],null],\"segment\":\"(margined)\"},\"styles\":[]}]}]]}]}],null],\"segment\":\"(navbar)\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c2c1ea965511607d.css\",\"precedence\":\"next\"}]]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Scott O'Brien\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"My online creative outlet\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"12:I{\"id\":8248,\"chunks\":[\"222:static/chunks/222-0c303d3189115893.js\",\"982:static/chunks/982-07d375c9d37b134d.js\",\"344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-dd011dba93e6ca3b.js\"],\"name\":\"\",\"async\":false}\n13:I{\"id\":3222,\"chunks\":[\"222:static/chunks/222-0c303d3189115893.js\",\"982:static/chunks/982-07d375c9d37b134d.js\",\"344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-dd011dba93e6ca3b.js\"],\"name\":\"Image\",\"async\":false}\n14:I{\"id\":9098,\"chunks\":[\"222:static/chunks/222-0c303d3189115"])</script><script>self.__next_f.push([1,"893.js\",\"982:static/chunks/982-07d375c9d37b134d.js\",\"344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-dd011dba93e6ca3b.js\"],\"name\":\"\",\"async\":false}\n15:T11c58,"])</script><script>self.__next_f.push([1,"var Component=(()=\u003e{var r0=Object.create;var EA=Object.defineProperty;var s0=Object.getOwnPropertyDescriptor;var M0=Object.getOwnPropertyNames;var j0=Object.getPrototypeOf,Q0=Object.prototype.hasOwnProperty;var J=(K,H)=\u003e()=\u003e(H||K((H={exports:{}}).exports,H),H.exports),n0=(K,H)=\u003e{for(var S in H)EA(K,S,{get:H[S],enumerable:!0})},qB=(K,H,S,O)=\u003e{if(H\u0026\u0026typeof H==\"object\"||typeof H==\"function\")for(let o of M0(H))!Q0.call(K,o)\u0026\u0026o!==S\u0026\u0026EA(K,o,{get:()=\u003eH[o],enumerable:!(O=s0(H,o))||O.enumerable});return K};var jA=(K,H,S)=\u003e(S=K!=null?r0(j0(K)):{},qB(H||!K||!K.__esModule?EA(S,\"default\",{value:K,enumerable:!0}):S,K)),u0=K=\u003eqB(EA({},\"__esModule\",{value:!0}),K);var OB=J((q2,pB)=\u003e{pB.exports=_jsx_runtime});var lA=J((t2,PB)=\u003e{PB.exports=React});var sB=J((Z2,rB)=\u003e{\"use strict\";var $2=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\";rB.exports=$2});var nB=J((P2,QB)=\u003e{\"use strict\";var x2=sB();function MB(){}function jB(){}jB.resetWarningCache=MB;QB.exports=function(){function K(O,o,b,E,y,i){if(i!==x2){var r=new Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw r.name=\"Invariant Violation\",r}}K.isRequired=K;function H(){return K}var S={array:K,bigint:K,bool:K,func:K,number:K,object:K,string:K,symbol:K,any:K,arrayOf:H,element:K,elementType:K,instanceOf:H,node:K,objectOf:H,oneOf:H,oneOfType:H,shape:H,exact:H,checkPropTypes:jB,resetWarningCache:MB};return S.PropTypes=S,S}});var YB=J((M2,uB)=\u003e{uB.exports=nB()();var r2,s2});var wB=J((j2,TB)=\u003e{TB.exports=e2;function e2(K,H){var S=document.head||document.getElementsByTagName(\"head\")[0],O=document.createElement(\"script\");O.type=\"text/javascript\",O.async=!0,O.src=K,H\u0026\u0026(O.onload=function(){O.onerror=O.onload=null,H(null,O)},O.onerror=function(){O.onerror=O.onload=null,H(new Error(\"Failed to load \"+K),O)}),S.appendChild(O)}});var vB=J(YA=\u003e{\"use strict\";Object.defineProperty(YA,\"__esModule\",{value:!0});var C2=lA(),Q2=YB(),H2=wB();function D2(K){return K\u0026\u0026typeof K==\"object\"\u0026\u0026\"default\"in K?K:{default:K}}function h2(K){if(K\u0026\u0026K.__esModule)return K;var H=Object.create(null);return K\u0026\u0026Object.keys(K).forEach(function(S){if(S!==\"default\"){var O=Object.getOwnPropertyDescriptor(K,S);Object.defineProperty(H,S,O.get?O:{enumerable:!0,get:function(){return K[S]}})}}),H.default=K,Object.freeze(H)}var UB=h2(C2),G2=D2(H2);function i2(K,H){K.prototype=Object.create(H.prototype),K.prototype.constructor=K,uA(K,H)}function uA(K,H){return uA=Object.setPrototypeOf||function(O,o){return O.__proto__=o,O},uA(K,H)}function QA(K){if(K===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return K}var F2=[\"onReady\",\"onStateChange\",\"onPlaybackQualityChange\",\"onPlaybackRateChange\",\"onError\",\"onApiChange\"];function I2(){return new Promise(function(K,H){if(typeof window.YT==\"object\"\u0026\u0026typeof window.YT.ready==\"function\"){window.YT.ready(function(){K(window.YT)});return}G2.default(\"https://www.youtube.com/iframe_api\",function(S){S?H(S):window.YT.ready(function(){K(window.YT)})})})}var nA=null;function c2(){return nA||(nA=I2()),nA}var VB=function(K){i2(H,K);function H(O){var o;return o=K.call(this,O)||this,o.onPlayerReady=o.onPlayerReady.bind(QA(o)),o.onPlayerStateChange=o.onPlayerStateChange.bind(QA(o)),o.refContainer=o.refContainer.bind(QA(o)),o}var S=H.prototype;return S.componentDidMount=function(){this.createPlayer()},S.componentDidUpdate=function(o){var b=this,E=Object.keys(this.props).filter(function(y){return b.props[y]!==o[y]});this.updateProps(E)},S.componentWillUnmount=function(){this.playerInstance\u0026\u0026this.playerInstance.destroy()},S.onPlayerReady=function(o){var b=this.props,E=b.volume,y=b.muted,i=b.suggestedQuality,r=b.playbackRate;typeof E!=\"undefined\"\u0026\u0026o.target.setVolume(E*100),typeof y!=\"undefined\"\u0026\u0026(y?o.target.mute():o.target.unMute()),typeof i!=\"undefined\"\u0026\u0026o.target.setPlaybackQuality(i),typeof r!=\"undefined\"\u0026\u0026o.target.setPlaybackRate(r),this.resolvePlayer(o.target)},S.onPlayerStateChange=function(o){var b=this.props,E=b.onCued,y=b.onBuffering,i=b.onPause,r=b.onPlaying,u=b.onEnd,a=YT.PlayerState;switch(o.data){case a.CUED:E(o);break;case a.BUFFERING:y(o);break;case a.PAUSED:i(o);break;case a.PLAYING:r(o);break;case a.ENDED:u(o);break}},S.getPlayerParameters=function(){return{autoplay:this.props.autoplay,cc_load_policy:this.props.showCaptions?1:0,controls:this.props.controls?1:0,disablekb:this.props.disableKeyboard?1:0,fs:this.props.allowFullscreen?1:0,hl:this.props.lang,iv_load_policy:this.props.annotations?1:3,start:this.props.startSeconds,end:this.props.endSeconds,modestbranding:this.props.modestBranding?1:0,playsinline:this.props.playsInline?1:0,rel:this.props.showRelatedVideos?1:0}},S.getInitialOptions=function(){return{videoId:this.props.video,width:this.props.width,height:this.props.height,playerVars:this.getPlayerParameters(),events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange}}},S.updateProps=function(o){var b=this;this.player.then(function(E){o.forEach(function(y){var i=b.props[y];switch(y){case\"muted\":i?E.mute():E.unMute();break;case\"suggestedQuality\":E.setPlaybackQuality(i);break;case\"volume\":E.setVolume(i*100);break;case\"paused\":i\u0026\u0026E.getPlayerState()!==2?E.pauseVideo():!i\u0026\u0026E.getPlayerState()===2\u0026\u0026E.playVideo();break;case\"id\":case\"className\":case\"width\":case\"height\":E.getIframe()[y]=i;break;case\"video\":if(!i)E.stopVideo();else{var r=b.props,u=r.startSeconds,a=r.endSeconds,g=r.autoplay,j={videoId:i,startSeconds:u||0,endSeconds:a};g?E.loadVideoById(j):E.cueVideoById(j)}break}})})},S.createPlayer=function(){var o=this,b=this.props.volume;this.player=c2().then(function(E){return new Promise(function(y){o.resolvePlayer=y;var i=new E.Player(o.container,o.getInitialOptions());o.playerInstance=i,F2.forEach(function(r){i.addEventListener(r,function(u){var a=o.props[r];a\u0026\u0026a(u)})})})}),typeof b==\"number\"\u0026\u0026this.updateProps([\"volume\"])},S.refContainer=function(o){this.container=o},S.render=function(){var o=this.props,b=o.id,E=o.className,y=o.style;return UB.createElement(\"div\",{id:b,className:E,style:y,ref:this.refContainer})},H}(UB.Component);VB.defaultProps={autoplay:!1,showCaptions:!1,controls:!0,disableKeyboard:!1,allowFullscreen:!0,annotations:!0,modestBranding:!1,playsInline:!1,showRelatedVideos:!0,onCued:function(){},onBuffering:function(){},onPlaying:function(){},onPause:function(){},onEnd:function(){}};YA.default=VB});var zB=J((_A,TA)=\u003e{(function(K,H){typeof _A==\"object\"\u0026\u0026typeof TA==\"object\"?TA.exports=H(lA()):typeof define==\"function\"\u0026\u0026define.amd?define([\"react\"],H):typeof _A==\"object\"?_A.ImageGallery=H(lA()):K.ImageGallery=H(K.React)})(_A,K=\u003e(()=\u003e{var H={703:(b,E,y)=\u003e{\"use strict\";var i=y(414);function r(){}function u(){}u.resetWarningCache=r,b.exports=function(){function a(P,U,v,hA,mA,SA){if(SA!==i){var aA=new Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw aA.name=\"Invariant Violation\",aA}}function g(){return a}a.isRequired=a;var j={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:g,element:a,elementType:a,instanceOf:g,node:a,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:u,resetWarningCache:r};return j.PropTypes=j,j}},697:(b,E,y)=\u003e{b.exports=y(703)()},414:b=\u003e{\"use strict\";b.exports=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\"},590:b=\u003e{var E=typeof Element!=\"undefined\",y=typeof Map==\"function\",i=typeof Set==\"function\",r=typeof ArrayBuffer==\"function\"\u0026\u0026!!ArrayBuffer.isView;function u(a,g){if(a===g)return!0;if(a\u0026\u0026g\u0026\u0026typeof a==\"object\"\u0026\u0026typeof g==\"object\"){if(a.constructor!==g.constructor)return!1;var j,P,U,v;if(Array.isArray(a)){if((j=a.length)!=g.length)return!1;for(P=j;P--!=0;)if(!u(a[P],g[P]))return!1;return!0}if(y\u0026\u0026a instanceof Map\u0026\u0026g instanceof Map){if(a.size!==g.size)return!1;for(v=a.entries();!(P=v.next()).done;)if(!g.has(P.value[0]))return!1;for(v=a.entries();!(P=v.next()).done;)if(!u(P.value[1],g.get(P.value[0])))return!1;return!0}if(i\u0026\u0026a instanceof Set\u0026\u0026g instanceof Set){if(a.size!==g.size)return!1;for(v=a.entries();!(P=v.next()).done;)if(!g.has(P.value[0]))return!1;return!0}if(r\u0026\u0026ArrayBuffer.isView(a)\u0026\u0026ArrayBuffer.isView(g)){if((j=a.length)!=g.length)return!1;for(P=j;P--!=0;)if(a[P]!==g[P])return!1;return!0}if(a.constructor===RegExp)return a.source===g.source\u0026\u0026a.flags===g.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===g.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===g.toString();if((j=(U=Object.keys(a)).length)!==Object.keys(g).length)return!1;for(P=j;P--!=0;)if(!Object.prototype.hasOwnProperty.call(g,U[P]))return!1;if(E\u0026\u0026a instanceof Element)return!1;for(P=j;P--!=0;)if((U[P]!==\"_owner\"\u0026\u0026U[P]!==\"__v\"\u0026\u0026U[P]!==\"__o\"||!a.$$typeof)\u0026\u0026!u(a[U[P]],g[U[P]]))return!1;return!0}return a!=a\u0026\u0026g!=g}b.exports=function(a,g){try{return u(a,g)}catch(j){if((j.message||\"\").match(/stack|recursion/i))return console.warn(\"react-fast-compare cannot handle circular refs\"),!1;throw j}}},359:b=\u003e{\"use strict\";b.exports=K}},S={};function O(b){var E=S[b];if(E!==void 0)return E.exports;var y=S[b]={exports:{}};return H[b](y,y.exports,O),y.exports}O.n=b=\u003e{var E=b\u0026\u0026b.__esModule?()=\u003eb.default:()=\u003eb;return O.d(E,{a:E}),E},O.d=(b,E)=\u003e{for(var y in E)O.o(E,y)\u0026\u0026!O.o(b,y)\u0026\u0026Object.defineProperty(b,y,{enumerable:!0,get:E[y]})},O.g=function(){if(typeof globalThis==\"object\")return globalThis;try{return this||new Function(\"return this\")()}catch(b){if(typeof window==\"object\")return window}}(),O.o=(b,E)=\u003eObject.prototype.hasOwnProperty.call(b,E),O.r=b=\u003e{typeof Symbol!=\"undefined\"\u0026\u0026Symbol.toStringTag\u0026\u0026Object.defineProperty(b,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(b,\"__esModule\",{value:!0})};var o={};return(()=\u003e{\"use strict\";function b($){var A,x,e=\"\";if(typeof $==\"string\"||typeof $==\"number\")e+=$;else if(typeof $==\"object\")if(Array.isArray($))for(A=0;A\u003c$.length;A++)$[A]\u0026\u0026(x=b($[A]))\u0026\u0026(e\u0026\u0026(e+=\" \"),e+=x);else for(A in $)$[A]\u0026\u0026(e\u0026\u0026(e+=\" \"),e+=A);return e}function E(){for(var $,A,x=0,e=\"\";x\u003carguments.length;)($=arguments[x++])\u0026\u0026(A=b($))\u0026\u0026(e\u0026\u0026(e+=\" \"),e+=A);return e}O.r(o),O.d(o,{default:()=\u003eZ0});var y=O(359),i=O.n(y);let r=function($){var A=typeof $;return $!=null\u0026\u0026(A==\"object\"||A==\"function\")},u=typeof global==\"object\"\u0026\u0026global\u0026\u0026global.Object===Object\u0026\u0026global;var a=typeof self==\"object\"\u0026\u0026self\u0026\u0026self.Object===Object\u0026\u0026self;let g=u||a||Function(\"return this\")(),j=function(){return g.Date.now()};var P=/\\s/,U=/^\\s+/;let v=function($){return $\u0026\u0026$.slice(0,function(A){for(var x=A.length;x--\u0026\u0026P.test(A.charAt(x)););return x}($)+1).replace(U,\"\")},hA=g.Symbol;var mA=Object.prototype,SA=mA.hasOwnProperty,aA=mA.toString,GA=hA?hA.toStringTag:void 0,A0=Object.prototype.toString,wA=hA?hA.toStringTag:void 0;let B0=function($){return $==null?$===void 0?\"[object Undefined]\":\"[object Null]\":wA\u0026\u0026wA in Object($)?function(A){var x=SA.call(A,GA),e=A[GA];try{A[GA]=void 0;var F=!0}catch(R){}var q=aA.call(A);return F\u0026\u0026(x?A[GA]=e:delete A[GA]),q}($):function(A){return A0.call(A)}($)};var L0=/^[-+]0x[0-9a-f]+$/i,$0=/^0b[01]+$/i,x0=/^0o[0-7]+$/i,e0=parseInt;let UA=function($){if(typeof $==\"number\")return $;if(function(e){return typeof e==\"symbol\"||function(F){return F!=null\u0026\u0026typeof F==\"object\"}(e)\u0026\u0026B0(e)==\"[object Symbol]\"}($))return NaN;if(r($)){var A=typeof $.valueOf==\"function\"?$.valueOf():$;$=r(A)?A+\"\":A}if(typeof $!=\"string\")return $===0?$:+$;$=v($);var x=$0.test($);return x||x0.test($)?e0($.slice(2),x?2:8):L0.test($)?NaN:+$};var C0=Math.max,H0=Math.min;let gA=function($,A,x){var e,F,q,R,L,B,C=0,h=!1,I=!1,G=!0;if(typeof $!=\"function\")throw new TypeError(\"Expected a function\");function m(p){var X=e,t=F;return e=F=void 0,C=p,R=$.apply(t,X)}function l(p){return C=p,L=setTimeout(d,A),h?m(p):R}function k(p){var X=p-B;return B===void 0||X\u003e=A||X\u003c0||I\u0026\u0026p-C\u003e=q}function d(){var p=j();if(k(p))return f(p);L=setTimeout(d,function(X){var t=A-(X-B);return I?H0(t,q-(X-C)):t}(p))}function f(p){return L=void 0,G\u0026\u0026e?m(p):(e=F=void 0,R)}function _(){var p=j(),X=k(p);if(e=arguments,F=this,B=p,X){if(L===void 0)return l(B);if(I)return clearTimeout(L),L=setTimeout(d,A),m(B)}return L===void 0\u0026\u0026(L=setTimeout(d,A)),R}return A=UA(A)||0,r(x)\u0026\u0026(h=!!x.leading,q=(I=\"maxWait\"in x)?C0(UA(x.maxWait)||0,A):q,G=\"trailing\"in x?!!x.trailing:G),_.cancel=function(){L!==void 0\u0026\u0026clearTimeout(L),C=0,e=B=F=L=void 0},_.flush=function(){return L===void 0?R:f(j())},_},VA=function($,A,x){var e=!0,F=!0;if(typeof $!=\"function\")throw new TypeError(\"Expected a function\");return r(x)\u0026\u0026(e=\"leading\"in x?!!x.leading:e,F=\"trailing\"in x?!!x.trailing:F),gA($,A,{leading:e,maxWait:A,trailing:F})};var D0=O(590),h0=O.n(D0),vA=function(){if(typeof Map!=\"undefined\")return Map;function $(A,x){var e=-1;return A.some(function(F,q){return F[0]===x\u0026\u0026(e=q,!0)}),e}return function(){function A(){this.__entries__=[]}return Object.defineProperty(A.prototype,\"size\",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),A.prototype.get=function(x){var e=$(this.__entries__,x),F=this.__entries__[e];return F\u0026\u0026F[1]},A.prototype.set=function(x,e){var F=$(this.__entries__,x);~F?this.__entries__[F][1]=e:this.__entries__.push([x,e])},A.prototype.delete=function(x){var e=this.__entries__,F=$(e,x);~F\u0026\u0026e.splice(F,1)},A.prototype.has=function(x){return!!~$(this.__entries__,x)},A.prototype.clear=function(){this.__entries__.splice(0)},A.prototype.forEach=function(x,e){e===void 0\u0026\u0026(e=null);for(var F=0,q=this.__entries__;F\u003cq.length;F++){var R=q[F];x.call(e,R[1],R[0])}},A}()}(),kA=typeof window!=\"undefined\"\u0026\u0026typeof document!=\"undefined\"\u0026\u0026window.document===document,qA=O.g!==void 0\u0026\u0026O.g.Math===Math?O.g:typeof self!=\"undefined\"\u0026\u0026self.Math===Math?self:typeof window!=\"undefined\"\u0026\u0026window.Math===Math?window:Function(\"return this\")(),G0=typeof requestAnimationFrame==\"function\"?requestAnimationFrame.bind(qA):function($){return setTimeout(function(){return $(Date.now())},1e3/60)},i0=[\"top\",\"right\",\"bottom\",\"left\",\"width\",\"height\",\"size\",\"weight\"],F0=typeof MutationObserver!=\"undefined\",I0=function(){function $(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(A,x){var e=!1,F=!1,q=0;function R(){e\u0026\u0026(e=!1,A()),F\u0026\u0026B()}function L(){G0(R)}function B(){var C=Date.now();if(e){if(C-q\u003c2)return;F=!0}else e=!0,F=!1,setTimeout(L,20);q=C}return B}(this.refresh.bind(this))}return $.prototype.addObserver=function(A){~this.observers_.indexOf(A)||this.observers_.push(A),this.connected_||this.connect_()},$.prototype.removeObserver=function(A){var x=this.observers_,e=x.indexOf(A);~e\u0026\u0026x.splice(e,1),!x.length\u0026\u0026this.connected_\u0026\u0026this.disconnect_()},$.prototype.refresh=function(){this.updateObservers_()\u0026\u0026this.refresh()},$.prototype.updateObservers_=function(){var A=this.observers_.filter(function(x){return x.gatherActive(),x.hasActive()});return A.forEach(function(x){return x.broadcastActive()}),A.length\u003e0},$.prototype.connect_=function(){kA\u0026\u0026!this.connected_\u0026\u0026(document.addEventListener(\"transitionend\",this.onTransitionEnd_),window.addEventListener(\"resize\",this.refresh),F0?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener(\"DOMSubtreeModified\",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},$.prototype.disconnect_=function(){kA\u0026\u0026this.connected_\u0026\u0026(document.removeEventListener(\"transitionend\",this.onTransitionEnd_),window.removeEventListener(\"resize\",this.refresh),this.mutationsObserver_\u0026\u0026this.mutationsObserver_.disconnect(),this.mutationEventsAdded_\u0026\u0026document.removeEventListener(\"DOMSubtreeModified\",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},$.prototype.onTransitionEnd_=function(A){var x=A.propertyName,e=x===void 0?\"\":x;i0.some(function(F){return!!~e.indexOf(F)})\u0026\u0026this.refresh()},$.getInstance=function(){return this.instance_||(this.instance_=new $),this.instance_},$.instance_=null,$}(),zA=function($,A){for(var x=0,e=Object.keys(A);x\u003ce.length;x++){var F=e[x];Object.defineProperty($,F,{value:A[F],enumerable:!1,writable:!1,configurable:!0})}return $},LA=function($){return $\u0026\u0026$.ownerDocument\u0026\u0026$.ownerDocument.defaultView||qA},WA=OA(0,0,0,0);function pA($){return parseFloat($)||0}function JA($){for(var A=[],x=1;x\u003carguments.length;x++)A[x-1]=arguments[x];return A.reduce(function(e,F){return e+pA($[\"border-\"+F+\"-width\"])},0)}var c0=typeof SVGGraphicsElement!=\"undefined\"?function($){return $ instanceof LA($).SVGGraphicsElement}:function($){return $ instanceof LA($).SVGElement\u0026\u0026typeof $.getBBox==\"function\"};function K0($){return kA?c0($)?function(A){var x=A.getBBox();return OA(0,0,x.width,x.height)}($):function(A){var x=A.clientWidth,e=A.clientHeight;if(!x\u0026\u0026!e)return WA;var F=LA(A).getComputedStyle(A),q=function(G){for(var m={},l=0,k=[\"top\",\"right\",\"bottom\",\"left\"];l\u003ck.length;l++){var d=k[l],f=G[\"padding-\"+d];m[d]=pA(f)}return m}(F),R=q.left+q.right,L=q.top+q.bottom,B=pA(F.width),C=pA(F.height);if(F.boxSizing===\"border-box\"\u0026\u0026(Math.round(B+R)!==x\u0026\u0026(B-=JA(F,\"left\",\"right\")+R),Math.round(C+L)!==e\u0026\u0026(C-=JA(F,\"top\",\"bottom\")+L)),!function(G){return G===LA(G).document.documentElement}(A)){var h=Math.round(B+R)-x,I=Math.round(C+L)-e;Math.abs(h)!==1\u0026\u0026(B-=h),Math.abs(I)!==1\u0026\u0026(C-=I)}return OA(q.left,q.top,B,C)}($):WA}function OA($,A,x,e){return{x:$,y:A,width:x,height:e}}var d0=function(){function $(A){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=OA(0,0,0,0),this.target=A}return $.prototype.isActive=function(){var A=K0(this.target);return this.contentRect_=A,A.width!==this.broadcastWidth||A.height!==this.broadcastHeight},$.prototype.broadcastRect=function(){var A=this.contentRect_;return this.broadcastWidth=A.width,this.broadcastHeight=A.height,A},$}(),f0=function($,A){var x,e,F,q,R,L,B,C=(e=(x=A).x,F=x.y,q=x.width,R=x.height,L=typeof DOMRectReadOnly!=\"undefined\"?DOMRectReadOnly:Object,B=Object.create(L.prototype),zA(B,{x:e,y:F,width:q,height:R,top:F,right:e+q,bottom:R+F,left:e}),B);zA(this,{target:$,contentRect:C})},_0=function(){function $(A,x,e){if(this.activeObservations_=[],this.observations_=new vA,typeof A!=\"function\")throw new TypeError(\"The callback provided as parameter 1 is not a function.\");this.callback_=A,this.controller_=x,this.callbackCtx_=e}return $.prototype.observe=function(A){if(!arguments.length)throw new TypeError(\"1 argument required, but only 0 present.\");if(typeof Element!=\"undefined\"\u0026\u0026Element instanceof Object){if(!(A instanceof LA(A).Element))throw new TypeError('parameter 1 is not of type \"Element\".');var x=this.observations_;x.has(A)||(x.set(A,new d0(A)),this.controller_.addObserver(this),this.controller_.refresh())}},$.prototype.unobserve=function(A){if(!arguments.length)throw new TypeError(\"1 argument required, but only 0 present.\");if(typeof Element!=\"undefined\"\u0026\u0026Element instanceof Object){if(!(A instanceof LA(A).Element))throw new TypeError('parameter 1 is not of type \"Element\".');var x=this.observations_;x.has(A)\u0026\u0026(x.delete(A),x.size||this.controller_.removeObserver(this))}},$.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},$.prototype.gatherActive=function(){var A=this;this.clearActive(),this.observations_.forEach(function(x){x.isActive()\u0026\u0026A.activeObservations_.push(x)})},$.prototype.broadcastActive=function(){if(this.hasActive()){var A=this.callbackCtx_,x=this.activeObservations_.map(function(e){return new f0(e.target,e.broadcastRect())});this.callback_.call(A,x,A),this.clearActive()}},$.prototype.clearActive=function(){this.activeObservations_.splice(0)},$.prototype.hasActive=function(){return this.activeObservations_.length\u003e0},$}(),NA=typeof WeakMap!=\"undefined\"?new WeakMap:new vA,AB=function $(A){if(!(this instanceof $))throw new TypeError(\"Cannot call a class as a function.\");if(!arguments.length)throw new TypeError(\"1 argument required, but only 0 present.\");var x=I0.getInstance(),e=new _0(A,x,this);NA.set(this,e)};[\"observe\",\"unobserve\",\"disconnect\"].forEach(function($){AB.prototype[$]=function(){var A;return(A=NA.get(this))[$].apply(A,arguments)}});let BB=qA.ResizeObserver!==void 0?qA.ResizeObserver:AB,$A=\"Left\",N=\"Right\",xA=\"Up\",AA=\"Down\",eA={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},XA={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},LB=\"mousemove\",$B=\"mouseup\";function xB($,A){if(A===0)return $;let x=Math.PI/180*A;return[$[0]*Math.cos(x)+$[1]*Math.sin(x),$[1]*Math.cos(x)-$[0]*Math.sin(x)]}function a0($){let{trackMouse:A}=$,x=y.useRef(Object.assign({},XA)),e=y.useRef(Object.assign({},eA)),F=y.useRef(Object.assign({},e.current)),q;for(q in F.current=Object.assign({},e.current),e.current=Object.assign(Object.assign({},eA),$),eA)e.current[q]===void 0\u0026\u0026(e.current[q]=eA[q]);let[R,L]=y.useMemo(()=\u003efunction(B,C){let h=d=\u003e{let f=\"touches\"in d;f\u0026\u0026d.touches.length\u003e1||B((_,p)=\u003e{p.trackMouse\u0026\u0026!f\u0026\u0026(document.addEventListener(LB,I),document.addEventListener($B,m));let{clientX:X,clientY:t}=f?d.touches[0]:d,M=xB([X,t],p.rotationAngle);return p.onTouchStartOrOnMouseDown\u0026\u0026p.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},_),XA),{initial:M.slice(),xy:M,start:d.timeStamp||0})})},I=d=\u003e{B((f,_)=\u003e{let p=\"touches\"in d;if(p\u0026\u0026d.touches.length\u003e1)return f;if(d.timeStamp-f.start\u003e_.swipeDuration)return f.swiping?Object.assign(Object.assign({},f),{swiping:!1}):f;let{clientX:X,clientY:t}=p?d.touches[0]:d,[M,T]=xB([X,t],_.rotationAngle),Y=M-f.xy[0],n=T-f.xy[1],s=Math.abs(Y),Z=Math.abs(n),W=(d.timeStamp||0)-f.start,cA=Math.sqrt(s*s+Z*Z)/(W||1),KA=[Y/(W||1),n/(W||1)],z=function(dA,DA,fA,w){return dA\u003eDA?fA\u003e0?N:$A:w\u003e0?AA:xA}(s,Z,Y,n),BA=typeof _.delta==\"number\"?_.delta:_.delta[z.toLowerCase()]||eA.delta;if(s\u003cBA\u0026\u0026Z\u003cBA\u0026\u0026!f.swiping)return f;let V={absX:s,absY:Z,deltaX:Y,deltaY:n,dir:z,event:d,first:f.first,initial:f.initial,velocity:cA,vxvy:KA};V.first\u0026\u0026_.onSwipeStart\u0026\u0026_.onSwipeStart(V),_.onSwiping\u0026\u0026_.onSwiping(V);let HA=!1;return(_.onSwiping||_.onSwiped||_[`onSwiped${z}`])\u0026\u0026(HA=!0),HA\u0026\u0026_.preventScrollOnSwipe\u0026\u0026_.trackTouch\u0026\u0026d.cancelable\u0026\u0026d.preventDefault(),Object.assign(Object.assign({},f),{first:!1,eventData:V,swiping:!0})})},G=d=\u003e{B((f,_)=\u003e{let p;if(f.swiping\u0026\u0026f.eventData){if(d.timeStamp-f.start\u003c_.swipeDuration){p=Object.assign(Object.assign({},f.eventData),{event:d}),_.onSwiped\u0026\u0026_.onSwiped(p);let X=_[`onSwiped${p.dir}`];X\u0026\u0026X(p)}}else _.onTap\u0026\u0026_.onTap({event:d});return _.onTouchEndOrOnMouseUp\u0026\u0026_.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},f),XA),{eventData:p})})},m=d=\u003e{document.removeEventListener(LB,I),document.removeEventListener($B,m),G(d)},l=(d,f)=\u003e{let _=()=\u003e{};if(d\u0026\u0026d.addEventListener){let p=Object.assign(Object.assign({},eA.touchEventOptions),f.touchEventOptions),X=[[\"touchstart\",h,p],[\"touchmove\",I,Object.assign(Object.assign({},p),f.preventScrollOnSwipe?{passive:!1}:{})],[\"touchend\",G,p]];X.forEach(([t,M,T])=\u003ed.addEventListener(t,M,T)),_=()=\u003eX.forEach(([t,M])=\u003ed.removeEventListener(t,M))}return _},k={ref:d=\u003e{d!==null\u0026\u0026B((f,_)=\u003e{if(f.el===d)return f;let p={};return f.el\u0026\u0026f.el!==d\u0026\u0026f.cleanUpTouch\u0026\u0026(f.cleanUpTouch(),p.cleanUpTouch=void 0),_.trackTouch\u0026\u0026d\u0026\u0026(p.cleanUpTouch=l(d,_)),Object.assign(Object.assign(Object.assign({},f),{el:d}),p)})}};return C.trackMouse\u0026\u0026(k.onMouseDown=h),[k,l]}(B=\u003ex.current=B(x.current,e.current),{trackMouse:A}),[A]);return x.current=function(B,C,h,I){return C.trackTouch\u0026\u0026B.el?B.cleanUpTouch?C.preventScrollOnSwipe!==h.preventScrollOnSwipe||C.touchEventOptions.passive!==h.touchEventOptions.passive?(B.cleanUpTouch(),Object.assign(Object.assign({},B),{cleanUpTouch:I(B.el,C)})):B:Object.assign(Object.assign({},B),{cleanUpTouch:I(B.el,C)}):(B.cleanUpTouch\u0026\u0026B.cleanUpTouch(),Object.assign(Object.assign({},B),{cleanUpTouch:void 0}))}(x.current,e.current,F.current,L),R}var D=O(697);function iA($){return iA=typeof Symbol==\"function\"\u0026\u0026typeof Symbol.iterator==\"symbol\"?function(A){return typeof A}:function(A){return A\u0026\u0026typeof Symbol==\"function\"\u0026\u0026A.constructor===Symbol\u0026\u0026A!==Symbol.prototype?\"symbol\":typeof A},iA($)}function eB($,A){var x=Object.keys($);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols($);A\u0026\u0026(e=e.filter(function(F){return Object.getOwnPropertyDescriptor($,F).enumerable})),x.push.apply(x,e)}return x}function CB($){for(var A=1;A\u003carguments.length;A++){var x=arguments[A]!=null?arguments[A]:{};A%2?eB(Object(x),!0).forEach(function(e){q0($,e,x[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(x)):eB(Object(x)).forEach(function(e){Object.defineProperty($,e,Object.getOwnPropertyDescriptor(x,e))})}return $}function q0($,A,x){return(A=function(e){var F=function(q,R){if(iA(q)!==\"object\"||q===null)return q;var L=q[Symbol.toPrimitive];if(L!==void 0){var B=L.call(q,R);if(iA(B)!==\"object\")return B;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(q)}(e,\"string\");return iA(F)===\"symbol\"?F:String(F)}(A))in $?Object.defineProperty($,A,{value:x,enumerable:!0,configurable:!0,writable:!0}):$[A]=x,$}var p0={description:\"\",fullscreen:\"\",isFullscreen:!1,originalAlt:\"\",originalHeight:\"\",originalWidth:\"\",originalTitle:\"\",sizes:\"\",srcSet:\"\",loading:\"eager\"},yA=i().memo(function($){var A=CB(CB({},p0),$),x=A.description,e=A.fullscreen,F=A.handleImageLoaded,q=A.isFullscreen,R=A.onImageError,L=A.original,B=A.originalAlt,C=A.originalHeight,h=A.originalWidth,I=A.originalTitle,G=A.sizes,m=A.srcSet,l=A.loading,k=q\u0026\u0026e||L;return i().createElement(i().Fragment,null,i().createElement(\"img\",{className:\"image-gallery-image\",src:k,alt:B,srcSet:m,height:C,width:h,sizes:G,title:I,onLoad:function(d){return F(d,L)},onError:R,loading:l}),x\u0026\u0026i().createElement(\"span\",{className:\"image-gallery-description\"},x))});yA.displayName=\"Item\",yA.propTypes={description:D.string,fullscreen:D.string,handleImageLoaded:D.func.isRequired,isFullscreen:D.bool,onImageError:D.func.isRequired,original:D.string.isRequired,originalAlt:D.string,originalHeight:D.string,originalWidth:D.string,originalTitle:D.string,sizes:D.string,srcSet:D.string,loading:D.string};let O0=yA;function FA($){return FA=typeof Symbol==\"function\"\u0026\u0026typeof Symbol.iterator==\"symbol\"?function(A){return typeof A}:function(A){return A\u0026\u0026typeof Symbol==\"function\"\u0026\u0026A.constructor===Symbol\u0026\u0026A!==Symbol.prototype?\"symbol\":typeof A},FA($)}function HB($,A){var x=Object.keys($);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols($);A\u0026\u0026(e=e.filter(function(F){return Object.getOwnPropertyDescriptor($,F).enumerable})),x.push.apply(x,e)}return x}function DB($){for(var A=1;A\u003carguments.length;A++){var x=arguments[A]!=null?arguments[A]:{};A%2?HB(Object(x),!0).forEach(function(e){o0($,e,x[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(x)):HB(Object(x)).forEach(function(e){Object.defineProperty($,e,Object.getOwnPropertyDescriptor(x,e))})}return $}function o0($,A,x){return(A=function(e){var F=function(q,R){if(FA(q)!==\"object\"||q===null)return q;var L=q[Symbol.toPrimitive];if(L!==void 0){var B=L.call(q,R);if(FA(B)!==\"object\")return B;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(q)}(e,\"string\");return FA(F)===\"symbol\"?F:String(F)}(A))in $?Object.defineProperty($,A,{value:x,enumerable:!0,configurable:!0,writable:!0}):$[A]=x,$}var b0={left:i().createElement(\"polyline\",{points:\"15 18 9 12 15 6\"}),right:i().createElement(\"polyline\",{points:\"9 18 15 12 9 6\"}),maximize:i().createElement(\"path\",{d:\"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3\"}),minimize:i().createElement(\"path\",{d:\"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3\"}),play:i().createElement(\"polygon\",{points:\"5 3 19 12 5 21 5 3\"}),pause:i().createElement(i().Fragment,null,i().createElement(\"rect\",{x:\"6\",y:\"4\",width:\"4\",height:\"16\"}),i().createElement(\"rect\",{x:\"14\",y:\"4\",width:\"4\",height:\"16\"}))},E0={strokeWidth:1,viewBox:\"0 0 24 24\"},hB=function($){var A=DB(DB({},E0),$),x=A.strokeWidth,e=A.viewBox,F=A.icon;return i().createElement(\"svg\",{className:\"image-gallery-svg\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:e,fill:\"none\",stroke:\"currentColor\",strokeWidth:x,strokeLinecap:\"round\",strokeLinejoin:\"round\"},b0[F])};hB.propTypes={strokeWidth:D.number,viewBox:D.string,icon:(0,D.oneOf)([\"left\",\"right\",\"maximize\",\"minimize\",\"play\",\"pause\"]).isRequired};let oA=hB;var RA=i().memo(function($){var A=$.isFullscreen,x=$.onClick;return i().createElement(\"button\",{type:\"button\",className:\"image-gallery-icon image-gallery-fullscreen-button\",onClick:x,\"aria-label\":\"Open Fullscreen\"},i().createElement(oA,{strokeWidth:2,icon:A?\"minimize\":\"maximize\"}))});RA.displayName=\"Fullscreen\",RA.propTypes={isFullscreen:D.bool.isRequired,onClick:D.func.isRequired};let l0=RA;var tA=i().memo(function($){var A=$.disabled,x=$.onClick;return i().createElement(\"button\",{type:\"button\",className:\"image-gallery-icon image-gallery-left-nav\",disabled:A,onClick:x,\"aria-label\":\"Previous Slide\"},i().createElement(oA,{icon:\"left\",viewBox:\"6 0 12 24\"}))});tA.displayName=\"LeftNav\",tA.propTypes={disabled:D.bool.isRequired,onClick:D.func.isRequired};let m0=tA;var ZA=i().memo(function($){var A=$.disabled,x=$.onClick;return i().createElement(\"button\",{type:\"button\",className:\"image-gallery-icon image-gallery-right-nav\",disabled:A,onClick:x,\"aria-label\":\"Next Slide\"},i().createElement(oA,{icon:\"right\",viewBox:\"6 0 12 24\"}))});ZA.displayName=\"RightNav\",ZA.propTypes={disabled:D.bool.isRequired,onClick:D.func.isRequired};let S0=ZA;var PA=i().memo(function($){var A=$.isPlaying,x=$.onClick;return i().createElement(\"button\",{type:\"button\",className:\"image-gallery-icon image-gallery-play-button\",onClick:x,\"aria-label\":\"Play or Pause Slideshow\"},i().createElement(oA,{strokeWidth:2,icon:A?\"pause\":\"play\"}))});PA.displayName=\"PlayPause\",PA.propTypes={isPlaying:D.bool.isRequired,onClick:D.func.isRequired};let g0=PA;function IA($){return IA=typeof Symbol==\"function\"\u0026\u0026typeof Symbol.iterator==\"symbol\"?function(A){return typeof A}:function(A){return A\u0026\u0026typeof Symbol==\"function\"\u0026\u0026A.constructor===Symbol\u0026\u0026A!==Symbol.prototype?\"symbol\":typeof A},IA($)}function rA(){return rA=Object.assign?Object.assign.bind():function($){for(var A=1;A\u003carguments.length;A++){var x=arguments[A];for(var e in x)Object.prototype.hasOwnProperty.call(x,e)\u0026\u0026($[e]=x[e])}return $},rA.apply(this,arguments)}function GB($,A){var x=Object.keys($);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols($);A\u0026\u0026(e=e.filter(function(F){return Object.getOwnPropertyDescriptor($,F).enumerable})),x.push.apply(x,e)}return x}function iB($){for(var A=1;A\u003carguments.length;A++){var x=arguments[A]!=null?arguments[A]:{};A%2?GB(Object(x),!0).forEach(function(e){k0($,e,x[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(x)):GB(Object(x)).forEach(function(e){Object.defineProperty($,e,Object.getOwnPropertyDescriptor(x,e))})}return $}function k0($,A,x){return(A=function(e){var F=function(q,R){if(IA(q)!==\"object\"||q===null)return q;var L=q[Symbol.toPrimitive];if(L!==void 0){var B=L.call(q,R);if(IA(B)!==\"object\")return B;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(q)}(e,\"string\");return IA(F)===\"symbol\"?F:String(F)}(A))in $?Object.defineProperty($,A,{value:x,enumerable:!0,configurable:!0,writable:!0}):$[A]=x,$}var X0={className:\"\",delta:0,onSwiping:function(){},onSwiped:function(){}},FB=function($){var A=iB(iB({},X0),$),x=A.children,e=A.className,F=a0({delta:A.delta,onSwiping:A.onSwiping,onSwiped:A.onSwiped});return i().createElement(\"div\",rA({},F,{className:e}),x)};FB.propTypes={children:D.node.isRequired,className:D.string,delta:D.number,onSwiped:D.func,onSwiping:D.func};let IB=FB;function CA($){return CA=typeof Symbol==\"function\"\u0026\u0026typeof Symbol.iterator==\"symbol\"?function(A){return typeof A}:function(A){return A\u0026\u0026typeof Symbol==\"function\"\u0026\u0026A.constructor===Symbol\u0026\u0026A!==Symbol.prototype?\"symbol\":typeof A},CA($)}function cB($,A){var x=Object.keys($);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols($);A\u0026\u0026(e=e.filter(function(F){return Object.getOwnPropertyDescriptor($,F).enumerable})),x.push.apply(x,e)}return x}function KB($){for(var A=1;A\u003carguments.length;A++){var x=arguments[A]!=null?arguments[A]:{};A%2?cB(Object(x),!0).forEach(function(e){dB($,e,x[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(x)):cB(Object(x)).forEach(function(e){Object.defineProperty($,e,Object.getOwnPropertyDescriptor(x,e))})}return $}function y0($,A){for(var x=0;x\u003cA.length;x++){var e=A[x];e.enumerable=e.enumerable||!1,e.configurable=!0,\"value\"in e\u0026\u0026(e.writable=!0),Object.defineProperty($,fB(e.key),e)}}function sA($,A){return sA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,e){return x.__proto__=e,x},sA($,A)}function R0($,A){if(A\u0026\u0026(CA(A)===\"object\"||typeof A==\"function\"))return A;if(A!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return Q($)}function Q($){if($===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return $}function bA($){return bA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},bA($)}function dB($,A,x){return(A=fB(A))in $?Object.defineProperty($,A,{value:x,enumerable:!0,configurable:!0,writable:!0}):$[A]=x,$}function fB($){var A=function(x,e){if(CA(x)!==\"object\"||x===null)return x;var F=x[Symbol.toPrimitive];if(F!==void 0){var q=F.call(x,e);if(CA(q)!==\"object\")return q;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(x)}($,\"string\");return CA(A)===\"symbol\"?A:String(A)}var _B=[\"fullscreenchange\",\"MSFullscreenChange\",\"mozfullscreenchange\",\"webkitfullscreenchange\"],t0=(0,D.arrayOf)((0,D.shape)({srcSet:D.string,media:D.string}));function aB($){var A=parseInt($.keyCode||$.which||0,10);return A===66||A===62}var MA=function($){(function(L,B){if(typeof B!=\"function\"\u0026\u0026B!==null)throw new TypeError(\"Super expression must either be null or a function\");L.prototype=Object.create(B\u0026\u0026B.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),Object.defineProperty(L,\"prototype\",{writable:!1}),B\u0026\u0026sA(L,B)})(R,$);var A,x,e,F,q=(e=R,F=function(){if(typeof Reflect==\"undefined\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}(),function(){var L,B=bA(e);if(F){var C=bA(this).constructor;L=Reflect.construct(B,arguments,C)}else L=B.apply(this,arguments);return R0(this,L)});function R(L){var B;return function(C,h){if(!(C instanceof h))throw new TypeError(\"Cannot call a class as a function\")}(this,R),dB(Q(B=q.call(this,L)),\"onBulletClick\",function(C,h){var I=B.props,G=I.onBulletClick,m=I.items,l=B.state.currentIndex;C.target.blur(),l!==h\u0026\u0026(m.length===2?B.slideToIndexWithStyleReset(h,C):B.slideToIndex(h,C)),G\u0026\u0026G(C,h)}),B.state={currentIndex:L.startIndex,thumbsTranslate:0,thumbsSwipedTranslate:0,currentSlideOffset:0,galleryWidth:0,thumbnailsWrapperWidth:0,thumbnailsWrapperHeight:0,thumbsStyle:{transition:\"all \".concat(L.slideDuration,\"ms ease-out\")},isFullscreen:!1,isSwipingThumbnail:!1,isPlaying:!1},B.loadedImages={},B.imageGallery=i().createRef(),B.thumbnailsWrapper=i().createRef(),B.thumbnails=i().createRef(),B.imageGallerySlideWrapper=i().createRef(),B.handleImageLoaded=B.handleImageLoaded.bind(Q(B)),B.handleKeyDown=B.handleKeyDown.bind(Q(B)),B.handleMouseDown=B.handleMouseDown.bind(Q(B)),B.handleResize=B.handleResize.bind(Q(B)),B.handleTouchMove=B.handleTouchMove.bind(Q(B)),B.handleOnSwiped=B.handleOnSwiped.bind(Q(B)),B.handleScreenChange=B.handleScreenChange.bind(Q(B)),B.handleSwiping=B.handleSwiping.bind(Q(B)),B.handleThumbnailSwiping=B.handleThumbnailSwiping.bind(Q(B)),B.handleOnThumbnailSwiped=B.handleOnThumbnailSwiped.bind(Q(B)),B.onThumbnailMouseLeave=B.onThumbnailMouseLeave.bind(Q(B)),B.handleImageError=B.handleImageError.bind(Q(B)),B.pauseOrPlay=B.pauseOrPlay.bind(Q(B)),B.renderThumbInner=B.renderThumbInner.bind(Q(B)),B.renderItem=B.renderItem.bind(Q(B)),B.slideLeft=B.slideLeft.bind(Q(B)),B.slideRight=B.slideRight.bind(Q(B)),B.toggleFullScreen=B.toggleFullScreen.bind(Q(B)),B.togglePlay=B.togglePlay.bind(Q(B)),B.unthrottledSlideToIndex=B.slideToIndex,B.slideToIndex=VA(B.unthrottledSlideToIndex,L.slideDuration,{trailing:!1}),L.lazyLoad\u0026\u0026(B.lazyLoaded=[]),B}return A=R,x=[{key:\"componentDidMount\",value:function(){var L=this.props,B=L.autoPlay,C=L.useWindowKeyDown;B\u0026\u0026this.play(),C?window.addEventListener(\"keydown\",this.handleKeyDown):this.imageGallery.current.addEventListener(\"keydown\",this.handleKeyDown),window.addEventListener(\"mousedown\",this.handleMouseDown),window.addEventListener(\"touchmove\",this.handleTouchMove,{passive:!1}),this.initSlideWrapperResizeObserver(this.imageGallerySlideWrapper),this.initThumbnailWrapperResizeObserver(this.thumbnailsWrapper),this.addScreenChangeEvent()}},{key:\"componentDidUpdate\",value:function(L,B){var C=this.props,h=C.items,I=C.lazyLoad,G=C.slideDuration,m=C.slideInterval,l=C.startIndex,k=C.thumbnailPosition,d=C.showThumbnails,f=C.useWindowKeyDown,_=this.state,p=_.currentIndex,X=_.isPlaying,t=L.items.length!==h.length,M=!h0()(L.items,h),T=L.startIndex!==l,Y=L.thumbnailPosition!==k,n=L.showThumbnails!==d;m===L.slideInterval\u0026\u0026G===L.slideDuration||X\u0026\u0026(this.pause(),this.play()),Y\u0026\u0026(this.removeResizeObserver(),this.initSlideWrapperResizeObserver(this.imageGallerySlideWrapper),this.initThumbnailWrapperResizeObserver(this.thumbnailsWrapper)),n\u0026\u0026d\u0026\u0026this.initThumbnailWrapperResizeObserver(this.thumbnailsWrapper),n\u0026\u0026!d\u0026\u0026this.removeThumbnailsResizeObserver(),(t||n)\u0026\u0026this.handleResize(),B.currentIndex!==p\u0026\u0026this.slideThumbnailBar(),L.slideDuration!==G\u0026\u0026(this.slideToIndex=VA(this.unthrottledSlideToIndex,G,{trailing:!1})),!I||L.lazyLoad\u0026\u0026!M||(this.lazyLoaded=[]),f!==L.useWindowKeyDown\u0026\u0026(f?(this.imageGallery.current.removeEventListener(\"keydown\",this.handleKeyDown),window.addEventListener(\"keydown\",this.handleKeyDown)):(window.removeEventListener(\"keydown\",this.handleKeyDown),this.imageGallery.current.addEventListener(\"keydown\",this.handleKeyDown))),(T||M)\u0026\u0026this.setState({currentIndex:l,slideStyle:{transition:\"none\"}})}},{key:\"componentWillUnmount\",value:function(){var L=this.props.useWindowKeyDown;window.removeEventListener(\"mousedown\",this.handleMouseDown),window.removeEventListener(\"touchmove\",this.handleTouchMove),this.removeScreenChangeEvent(),this.removeResizeObserver(),this.playPauseIntervalId\u0026\u0026(window.clearInterval(this.playPauseIntervalId),this.playPauseIntervalId=null),this.transitionTimer\u0026\u0026window.clearTimeout(this.transitionTimer),L?window.removeEventListener(\"keydown\",this.handleKeyDown):this.imageGallery.current.removeEventListener(\"keydown\",this.handleKeyDown)}},{key:\"onSliding\",value:function(){var L=this,B=this.state,C=B.currentIndex,h=B.isTransitioning,I=this.props,G=I.onSlide,m=I.slideDuration;this.transitionTimer=window.setTimeout(function(){h\u0026\u0026(L.setState({isTransitioning:!h,isSwipingThumbnail:!1}),G\u0026\u0026G(C))},m+50)}},{key:\"onThumbnailClick\",value:function(L,B){var C=this.props,h=C.onThumbnailClick,I=C.items,G=this.state.currentIndex;L.target.parentNode.parentNode.blur(),G!==B\u0026\u0026(I.length===2?this.slideToIndexWithStyleReset(B,L):this.slideToIndex(B,L)),h\u0026\u0026h(L,B)}},{key:\"onThumbnailMouseOver\",value:function(L,B){var C=this;this.thumbnailMouseOverTimer\u0026\u0026(window.clearTimeout(this.thumbnailMouseOverTimer),this.thumbnailMouseOverTimer=null),this.thumbnailMouseOverTimer=window.setTimeout(function(){C.slideToIndex(B),C.pause()},300)}},{key:\"onThumbnailMouseLeave\",value:function(){if(this.thumbnailMouseOverTimer){var L=this.props.autoPlay;window.clearTimeout(this.thumbnailMouseOverTimer),this.thumbnailMouseOverTimer=null,L\u0026\u0026this.play()}}},{key:\"setThumbsTranslate\",value:function(L){this.setState({thumbsTranslate:L})}},{key:\"setModalFullscreen\",value:function(L){var B=this.props.onScreenChange;this.setState({modalFullscreen:L}),B\u0026\u0026B(L)}},{key:\"getThumbsTranslate\",value:function(L){var B,C=this.props,h=C.disableThumbnailScroll,I=C.items,G=this.state,m=G.thumbnailsWrapperWidth,l=G.thumbnailsWrapperHeight,k=this.thumbnails\u0026\u0026this.thumbnails.current;if(h)return 0;if(k){if(this.isThumbnailVertical()){if(k.scrollHeight\u003c=l)return 0;B=k.scrollHeight-l}else{if(k.scrollWidth\u003c=m||m\u003c=0)return 0;B=k.scrollWidth-m}return L*(B/(I.length-1))}return 0}},{key:\"getThumbnailPositionClassName\",value:function(L){switch(L){case\"left\":L=\" \".concat(\"image-gallery-thumbnails-left\");break;case\"right\":L=\" \".concat(\"image-gallery-thumbnails-right\");break;case\"bottom\":L=\" \".concat(\"image-gallery-thumbnails-bottom\");break;case\"top\":L=\" \".concat(\"image-gallery-thumbnails-top\")}return L}},{key:\"getAlignmentClassName\",value:function(L){var B=this.state.currentIndex,C=this.props,h=C.infinite,I=C.items,G=\"\",m=\"image-gallery-left\",l=\"image-gallery-right\";switch(L){case B-1:G=\" \".concat(m);break;case B:G=\" \".concat(\"image-gallery-center\");break;case B+1:G=\" \".concat(l)}return I.length\u003e=3\u0026\u0026h\u0026\u0026(L===0\u0026\u0026B===I.length-1?G=\" \".concat(l):L===I.length-1\u0026\u0026B===0\u0026\u0026(G=\" \".concat(m))),G}},{key:\"getTranslateXForTwoSlide\",value:function(L){var B=this.state,C=B.currentIndex,h=B.currentSlideOffset,I=B.previousIndex,G=C!==I,m=L===0\u0026\u0026I===0,l=L===1\u0026\u0026I===1,k=L===0\u0026\u0026C===1,d=L===1\u0026\u0026C===0,f=h===0,_=-100*C+100*L+h;return h\u003e0?this.direction=\"left\":h\u003c0\u0026\u0026(this.direction=\"right\"),d\u0026\u0026h\u003e0\u0026\u0026(_=-100+h),k\u0026\u0026h\u003c0\u0026\u0026(_=100+h),G?m\u0026\u0026f\u0026\u0026this.direction===\"left\"?_=100:l\u0026\u0026f\u0026\u0026this.direction===\"right\"\u0026\u0026(_=-100):(d\u0026\u0026f\u0026\u0026this.direction===\"left\"\u0026\u0026(_=-100),k\u0026\u0026f\u0026\u0026this.direction===\"right\"\u0026\u0026(_=100)),_}},{key:\"getThumbnailBarHeight\",value:function(){return this.isThumbnailVertical()?{height:this.state.gallerySlideWrapperHeight}:{}}},{key:\"getSlideStyle\",value:function(L){var B=this.state,C=B.currentIndex,h=B.currentSlideOffset,I=B.slideStyle,G=this.props,m=G.infinite,l=G.items,k=G.useTranslate3D,d=G.isRTL,f=-100*C,_=l.length-1,p=(f+100*L)*(d?-1:1)+h;m\u0026\u0026l.length\u003e2\u0026\u0026(C===0\u0026\u0026L===_?p=-100*(d?-1:1)+h:C===_\u0026\u0026L===0\u0026\u0026(p=100*(d?-1:1)+h)),m\u0026\u0026l.length===2\u0026\u0026(p=this.getTranslateXForTwoSlide(L));var X=\"translate(\".concat(p,\"%, 0)\");return k\u0026\u0026(X=\"translate3d(\".concat(p,\"%, 0, 0)\")),KB({display:this.isSlideVisible(L)?\"inherit\":\"none\",WebkitTransform:X,MozTransform:X,msTransform:X,OTransform:X,transform:X},I)}},{key:\"getCurrentIndex\",value:function(){return this.state.currentIndex}},{key:\"getThumbnailStyle\",value:function(){var L,B=this.props,C=B.useTranslate3D,h=B.isRTL,I=this.state,G=I.thumbsTranslate,m=I.thumbsStyle,l=h?-1*G:G;return this.isThumbnailVertical()?(L=\"translate(0, \".concat(G,\"px)\"),C\u0026\u0026(L=\"translate3d(0, \".concat(G,\"px, 0)\"))):(L=\"translate(\".concat(l,\"px, 0)\"),C\u0026\u0026(L=\"translate3d(\".concat(l,\"px, 0, 0)\"))),KB({WebkitTransform:L,MozTransform:L,msTransform:L,OTransform:L,transform:L},m)}},{key:\"getSlideItems\",value:function(){var L=this,B=this.state.currentIndex,C=this.props,h=C.items,I=C.slideOnThumbnailOver,G=C.onClick,m=C.lazyLoad,l=C.onTouchMove,k=C.onTouchEnd,d=C.onTouchStart,f=C.onMouseOver,_=C.onMouseLeave,p=C.renderItem,X=C.renderThumbInner,t=C.showThumbnails,M=C.showBullets,T=[],Y=[],n=[];return h.forEach(function(s,Z){var W=L.getAlignmentClassName(Z),cA=s.originalClass?\" \".concat(s.originalClass):\"\",KA=s.thumbnailClass?\" \".concat(s.thumbnailClass):\"\",z=s.renderItem||p||L.renderItem,BA=s.renderThumbInner||X||L.renderThumbInner,V=!m||W||L.lazyLoaded[Z];V\u0026\u0026m\u0026\u0026!L.lazyLoaded[Z]\u0026\u0026(L.lazyLoaded[Z]=!0);var HA=L.getSlideStyle(Z),dA=i().createElement(\"div\",{\"aria-label\":\"Go to Slide \".concat(Z+1),key:\"slide-\".concat(Z),tabIndex:\"-1\",className:\"image-gallery-slide \".concat(W,\" \").concat(cA),style:HA,onClick:G,onKeyUp:L.handleSlideKeyUp,onTouchMove:l,onTouchEnd:k,onTouchStart:d,onMouseOver:f,onFocus:f,onMouseLeave:_,role:\"button\"},V?z(s):i().createElement(\"div\",{style:{height:\"100%\"}}));if(T.push(dA),t\u0026\u0026s.thumbnail){var DA=E(\"image-gallery-thumbnail\",KA,{active:B===Z});Y.push(i().createElement(\"button\",{key:\"thumbnail-\".concat(Z),type:\"button\",tabIndex:\"0\",\"aria-pressed\":B===Z?\"true\":\"false\",\"aria-label\":\"Go to Slide \".concat(Z+1),className:DA,onMouseLeave:I?L.onThumbnailMouseLeave:null,onMouseOver:function(w){return L.handleThumbnailMouseOver(w,Z)},onFocus:function(w){return L.handleThumbnailMouseOver(w,Z)},onKeyUp:function(w){return L.handleThumbnailKeyUp(w,Z)},onClick:function(w){return L.onThumbnailClick(w,Z)}},BA(s)))}if(M){var fA=E(\"image-gallery-bullet\",s.bulletClass,{active:B===Z});n.push(i().createElement(\"button\",{type:\"button\",key:\"bullet-\".concat(Z),className:fA,onClick:function(w){return L.onBulletClick(w,Z)},\"aria-pressed\":B===Z?\"true\":\"false\",\"aria-label\":\"Go to Slide \".concat(Z+1)}))}}),{slides:T,thumbnails:Y,bullets:n}}},{key:\"ignoreIsTransitioning\",value:function(){var L=this.props.items,B=this.state,C=B.previousIndex,h=B.currentIndex,I=L.length-1;return Math.abs(C-h)\u003e1\u0026\u0026!(C===0\u0026\u0026h===I)\u0026\u0026!(C===I\u0026\u0026h===0)}},{key:\"isFirstOrLastSlide\",value:function(L){return L===this.props.items.length-1||L===0}},{key:\"slideIsTransitioning\",value:function(L){var B=this.state,C=B.isTransitioning,h=B.previousIndex,I=B.currentIndex;return C\u0026\u0026!(L===h||L===I)}},{key:\"isSlideVisible\",value:function(L){return!this.slideIsTransitioning(L)||this.ignoreIsTransitioning()\u0026\u0026!this.isFirstOrLastSlide(L)}},{key:\"slideThumbnailBar\",value:function(){var L=this.state,B=L.currentIndex,C=L.isSwipingThumbnail,h=-this.getThumbsTranslate(B);C||(B===0?this.setState({thumbsTranslate:0,thumbsSwipedTranslate:0}):this.setState({thumbsTranslate:h,thumbsSwipedTranslate:h}))}},{key:\"canSlide\",value:function(){return this.props.items.length\u003e=2}},{key:\"canSlideLeft\",value:function(){return this.props.infinite||this.canSlidePrevious()}},{key:\"canSlideRight\",value:function(){return this.props.infinite||this.canSlideNext()}},{key:\"canSlidePrevious\",value:function(){return this.state.currentIndex\u003e0}},{key:\"canSlideNext\",value:function(){return this.state.currentIndex\u003cthis.props.items.length-1}},{key:\"handleSwiping\",value:function(L){var B=L.event,C=L.absX,h=L.dir,I=this.props,G=I.disableSwipe,m=I.stopPropagation,l=this.state,k=l.galleryWidth,d=l.isTransitioning,f=l.swipingUpDown,_=l.swipingLeftRight;if(h!==xA\u0026\u0026h!==AA\u0026\u0026!f||_){if(h!==$A\u0026\u0026h!==N||_||this.setState({swipingLeftRight:!0}),!G){var p=this.props.swipingTransitionDuration;if(m\u0026\u0026B.preventDefault(),d)this.setState({currentSlideOffset:0});else{var X=h===N?1:-1,t=C/k*100;Math.abs(t)\u003e=100\u0026\u0026(t=100);var M={transition:\"transform \".concat(p,\"ms ease-out\")};this.setState({currentSlideOffset:X*t,slideStyle:M})}}}else f||this.setState({swipingUpDown:!0})}},{key:\"handleThumbnailSwiping\",value:function(L){var B=L.event,C=L.absX,h=L.absY,I=L.dir,G=this.props,m=G.stopPropagation,l=G.swipingThumbnailTransitionDuration,k=this.state,d=k.thumbsSwipedTranslate,f=k.thumbnailsWrapperHeight,_=k.thumbnailsWrapperWidth,p=k.swipingUpDown,X=k.swipingLeftRight;if(this.isThumbnailVertical()){if((I===$A||I===N||X)\u0026\u0026!p)return void(X||this.setState({swipingLeftRight:!0}));I!==xA\u0026\u0026I!==AA||p||this.setState({swipingUpDown:!0})}else{if((I===xA||I===AA||p)\u0026\u0026!X)return void(p||this.setState({swipingUpDown:!0}));I!==$A\u0026\u0026I!==N||X||this.setState({swipingLeftRight:!0})}var t,M,T,Y,n,s=this.thumbnails\u0026\u0026this.thumbnails.current;if(this.isThumbnailVertical()?(t=d+(I===AA?h:-h),M=s.scrollHeight-f+20,T=Math.abs(t)\u003eM,Y=t\u003e20,n=s.scrollHeight\u003c=f):(t=d+(I===N?C:-C),M=s.scrollWidth-_+20,T=Math.abs(t)\u003eM,Y=t\u003e20,n=s.scrollWidth\u003c=_),!n\u0026\u0026(I!==$A\u0026\u0026I!==xA||!T)\u0026\u0026(I!==N\u0026\u0026I!==AA||!Y)){m\u0026\u0026B.stopPropagation();var Z={transition:\"transform \".concat(l,\"ms ease-out\")};this.setState({thumbsTranslate:t,thumbsStyle:Z})}}},{key:\"handleOnThumbnailSwiped\",value:function(){var L=this.state.thumbsTranslate,B=this.props.slideDuration;this.resetSwipingDirection(),this.setState({isSwipingThumbnail:!0,thumbsSwipedTranslate:L,thumbsStyle:{transition:\"all \".concat(B,\"ms ease-out\")}})}},{key:\"sufficientSwipe\",value:function(){var L=this.state.currentSlideOffset,B=this.props.swipeThreshold;return Math.abs(L)\u003eB}},{key:\"resetSwipingDirection\",value:function(){var L=this.state,B=L.swipingUpDown,C=L.swipingLeftRight;B\u0026\u0026this.setState({swipingUpDown:!1}),C\u0026\u0026this.setState({swipingLeftRight:!1})}},{key:\"handleOnSwiped\",value:function(L){var B=L.event,C=L.dir,h=L.velocity,I=this.props,G=I.disableSwipe,m=I.stopPropagation,l=I.flickThreshold;if(!G){var k=this.props.isRTL;m\u0026\u0026B.stopPropagation(),this.resetSwipingDirection();var d=(C===$A?1:-1)*(k?-1:1),f=h\u003el\u0026\u0026!(C===xA||C===AA);this.handleOnSwipedTo(d,f)}}},{key:\"handleOnSwipedTo\",value:function(L,B){var C=this.state,h=C.currentIndex,I=C.isTransitioning,G=h;!this.sufficientSwipe()\u0026\u0026!B||I||(G+=L),(L===-1\u0026\u0026!this.canSlideLeft()||L===1\u0026\u0026!this.canSlideRight())\u0026\u0026(G=h),this.unthrottledSlideToIndex(G)}},{key:\"handleTouchMove\",value:function(L){this.state.swipingLeftRight\u0026\u0026L.preventDefault()}},{key:\"handleMouseDown\",value:function(){this.imageGallery.current.classList.add(\"image-gallery-using-mouse\")}},{key:\"handleKeyDown\",value:function(L){var B=this.props,C=B.disableKeyDown,h=B.useBrowserFullscreen,I=this.state.isFullscreen;if(this.imageGallery.current.classList.remove(\"image-gallery-using-mouse\"),!C)switch(parseInt(L.keyCode||L.which||0,10)){case 37:this.canSlideLeft()\u0026\u0026!this.playPauseIntervalId\u0026\u0026this.slideLeft(L);break;case 39:this.canSlideRight()\u0026\u0026!this.playPauseIntervalId\u0026\u0026this.slideRight(L);break;case 27:I\u0026\u0026!h\u0026\u0026this.exitFullScreen()}}},{key:\"handleImageError\",value:function(L){var B=this.props.onErrorImageURL;B\u0026\u0026L.target.src.indexOf(B)===-1\u0026\u0026(L.target.src=B)}},{key:\"removeThumbnailsResizeObserver\",value:function(){this.resizeThumbnailWrapperObserver\u0026\u0026this.thumbnailsWrapper\u0026\u0026this.thumbnailsWrapper.current\u0026\u0026(this.resizeThumbnailWrapperObserver.unobserve(this.thumbnailsWrapper.current),this.resizeThumbnailWrapperObserver=null)}},{key:\"removeResizeObserver\",value:function(){this.resizeSlideWrapperObserver\u0026\u0026this.imageGallerySlideWrapper\u0026\u0026this.imageGallerySlideWrapper.current\u0026\u0026(this.resizeSlideWrapperObserver.unobserve(this.imageGallerySlideWrapper.current),this.resizeSlideWrapperObserver=null),this.removeThumbnailsResizeObserver()}},{key:\"handleResize\",value:function(){var L=this.state.currentIndex;this.imageGallery\u0026\u0026(this.imageGallery\u0026\u0026this.imageGallery.current\u0026\u0026this.setState({galleryWidth:this.imageGallery.current.offsetWidth}),this.imageGallerySlideWrapper\u0026\u0026this.imageGallerySlideWrapper.current\u0026\u0026this.setState({gallerySlideWrapperHeight:this.imageGallerySlideWrapper.current.offsetHeight}),this.setThumbsTranslate(-this.getThumbsTranslate(L)))}},{key:\"initSlideWrapperResizeObserver\",value:function(L){var B=this;L\u0026\u0026!L.current||(this.resizeSlideWrapperObserver=new BB(gA(function(C){C\u0026\u0026C.forEach(function(h){B.setState({thumbnailsWrapperWidth:h.contentRect.width},B.handleResize)})},50)),this.resizeSlideWrapperObserver.observe(L.current))}},{key:\"initThumbnailWrapperResizeObserver\",value:function(L){var B=this;L\u0026\u0026!L.current||(this.resizeThumbnailWrapperObserver=new BB(gA(function(C){C\u0026\u0026C.forEach(function(h){B.setState({thumbnailsWrapperHeight:h.contentRect.height},B.handleResize)})},50)),this.resizeThumbnailWrapperObserver.observe(L.current))}},{key:\"toggleFullScreen\",value:function(){this.state.isFullscreen?this.exitFullScreen():this.fullScreen()}},{key:\"togglePlay\",value:function(){this.playPauseIntervalId?this.pause():this.play()}},{key:\"handleScreenChange\",value:function(){var L=this.props,B=L.onScreenChange,C=L.useBrowserFullscreen,h=document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,I=this.imageGallery.current===h;B\u0026\u0026B(I),C\u0026\u0026this.setState({isFullscreen:I})}},{key:\"slideToIndex\",value:function(L,B){var C=this.state,h=C.currentIndex,I=C.isTransitioning,G=this.props,m=G.items,l=G.slideDuration,k=G.onBeforeSlide;if(!I){B\u0026\u0026this.playPauseIntervalId\u0026\u0026(this.pause(!1),this.play(!1));var d=m.length-1,f=L;L\u003c0?f=d:L\u003ed\u0026\u0026(f=0),k\u0026\u0026f!==h\u0026\u0026k(f),this.setState({previousIndex:h,currentIndex:f,isTransitioning:f!==h,currentSlideOffset:0,slideStyle:{transition:\"all \".concat(l,\"ms ease-out\")}},this.onSliding)}}},{key:\"slideLeft\",value:function(L){var B=this.props.isRTL;this.slideTo(L,B?\"right\":\"left\")}},{key:\"slideRight\",value:function(L){var B=this.props.isRTL;this.slideTo(L,B?\"left\":\"right\")}},{key:\"slideTo\",value:function(L,B){var C=this.state,h=C.currentIndex,I=C.isTransitioning,G=this.props.items,m=h+(B===\"left\"?-1:1);I||(G.length===2?this.slideToIndexWithStyleReset(m,L):this.slideToIndex(m,L))}},{key:\"slideToIndexWithStyleReset\",value:function(L,B){var C=this,h=this.state,I=h.currentIndex,G=h.currentSlideOffset;this.setState({currentSlideOffset:G+(I\u003eL?.001:-.001),slideStyle:{transition:\"none\"}},function(){window.setTimeout(function(){return C.slideToIndex(L,B)},25)})}},{key:\"handleThumbnailMouseOver\",value:function(L,B){this.props.slideOnThumbnailOver\u0026\u0026this.onThumbnailMouseOver(L,B)}},{key:\"handleThumbnailKeyUp\",value:function(L,B){aB(L)\u0026\u0026this.onThumbnailClick(L,B)}},{key:\"handleSlideKeyUp\",value:function(L){aB(L)\u0026\u0026(0,this.props.onClick)(L)}},{key:\"isThumbnailVertical\",value:function(){var L=this.props.thumbnailPosition;return L===\"left\"||L===\"right\"}},{key:\"addScreenChangeEvent\",value:function(){var L=this;_B.forEach(function(B){document.addEventListener(B,L.handleScreenChange)})}},{key:\"removeScreenChangeEvent\",value:function(){var L=this;_B.forEach(function(B){document.removeEventListener(B,L.handleScreenChange)})}},{key:\"fullScreen\",value:function(){var L=this.props.useBrowserFullscreen,B=this.imageGallery.current;L?B.requestFullscreen?B.requestFullscreen():B.msRequestFullscreen?B.msRequestFullscreen():B.mozRequestFullScreen?B.mozRequestFullScreen():B.webkitRequestFullscreen?B.webkitRequestFullscreen():this.setModalFullscreen(!0):this.setModalFullscreen(!0),this.setState({isFullscreen:!0})}},{key:\"exitFullScreen\",value:function(){var L=this.state.isFullscreen,B=this.props.useBrowserFullscreen;L\u0026\u0026(B?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this.setModalFullscreen(!1):this.setModalFullscreen(!1),this.setState({isFullscreen:!1}))}},{key:\"pauseOrPlay\",value:function(){var L=this.props.infinite,B=this.state.currentIndex;L||this.canSlideRight()?this.slideToIndex(B+1):this.pause()}},{key:\"play\",value:function(){var L=!(arguments.length\u003e0\u0026\u0026arguments[0]!==void 0)||arguments[0],B=this.props,C=B.onPlay,h=B.slideInterval,I=B.slideDuration,G=this.state.currentIndex;this.playPauseIntervalId||(this.setState({isPlaying:!0}),this.playPauseIntervalId=window.setInterval(this.pauseOrPlay,Math.max(h,I)),C\u0026\u0026L\u0026\u0026C(G))}},{key:\"pause\",value:function(){var L=!(arguments.length\u003e0\u0026\u0026arguments[0]!==void 0)||arguments[0],B=this.props.onPause,C=this.state.currentIndex;this.playPauseIntervalId\u0026\u0026(window.clearInterval(this.playPauseIntervalId),this.playPauseIntervalId=null,this.setState({isPlaying:!1}),B\u0026\u0026L\u0026\u0026B(C))}},{key:\"isImageLoaded\",value:function(L){return!!this.loadedImages[L.original]||(this.loadedImages[L.original]=!0,!1)}},{key:\"handleImageLoaded\",value:function(L,B){var C=this.props.onImageLoad;!this.loadedImages[B]\u0026\u0026C\u0026\u0026(this.loadedImages[B]=!0,C(L))}},{key:\"renderItem\",value:function(L){var B=this.state.isFullscreen,C=this.props.onImageError||this.handleImageError;return i().createElement(O0,{description:L.description,fullscreen:L.fullscreen,handleImageLoaded:this.handleImageLoaded,isFullscreen:B,onImageError:C,original:L.original,originalAlt:L.originalAlt,originalHeight:L.originalHeight,originalWidth:L.originalWidth,originalTitle:L.originalTitle,sizes:L.sizes,loading:L.loading,srcSet:L.srcSet})}},{key:\"renderThumbInner\",value:function(L){var B=this.props.onThumbnailError||this.handleImageError;return i().createElement(\"span\",{className:\"image-gallery-thumbnail-inner\"},i().createElement(\"img\",{className:\"image-gallery-thumbnail-image\",src:L.thumbnail,height:L.thumbnailHeight,width:L.thumbnailWidth,alt:L.thumbnailAlt,title:L.thumbnailTitle,loading:L.thumbnailLoading,onError:B}),L.thumbnailLabel\u0026\u0026i().createElement(\"div\",{className:\"image-gallery-thumbnail-label\"},L.thumbnailLabel))}},{key:\"render\",value:function(){var L=this.state,B=L.currentIndex,C=L.isFullscreen,h=L.modalFullscreen,I=L.isPlaying,G=this.props,m=G.additionalClass,l=G.disableThumbnailSwipe,k=G.indexSeparator,d=G.isRTL,f=G.items,_=G.thumbnailPosition,p=G.renderFullscreenButton,X=G.renderCustomControls,t=G.renderLeftNav,M=G.renderRightNav,T=G.showBullets,Y=G.showFullscreenButton,n=G.showIndex,s=G.showThumbnails,Z=G.showNav,W=G.showPlayButton,cA=G.renderPlayPauseButton,KA=this.getThumbnailStyle(),z=this.getSlideItems(),BA=z.slides,V=z.thumbnails,HA=z.bullets,dA=E(\"image-gallery-slide-wrapper\",this.getThumbnailPositionClassName(_),{\"image-gallery-rtl\":d}),DA=i().createElement(\"div\",{ref:this.imageGallerySlideWrapper,className:dA},X\u0026\u0026X(),this.canSlide()?i().createElement(i().Fragment,null,Z\u0026\u0026i().createElement(i().Fragment,null,t(this.slideLeft,!this.canSlideLeft()),M(this.slideRight,!this.canSlideRight())),i().createElement(IB,{className:\"image-gallery-swipe\",delta:0,onSwiping:this.handleSwiping,onSwiped:this.handleOnSwiped},i().createElement(\"div\",{className:\"image-gallery-slides\"},BA))):i().createElement(\"div\",{className:\"image-gallery-slides\"},BA),W\u0026\u0026cA(this.togglePlay,I),T\u0026\u0026i().createElement(\"div\",{className:\"image-gallery-bullets\"},i().createElement(\"div\",{className:\"image-gallery-bullets-container\",role:\"navigation\",\"aria-label\":\"Bullet Navigation\"},HA)),Y\u0026\u0026p(this.toggleFullScreen,C),n\u0026\u0026i().createElement(\"div\",{className:\"image-gallery-index\"},i().createElement(\"span\",{className:\"image-gallery-index-current\"},B+1),i().createElement(\"span\",{className:\"image-gallery-index-separator\"},k),i().createElement(\"span\",{className:\"image-gallery-index-total\"},f.length))),fA=E(\"image-gallery\",m,{\"fullscreen-modal\":h}),w=E(\"image-gallery-content\",this.getThumbnailPositionClassName(_),{fullscreen:C}),P0=E(\"image-gallery-thumbnails-wrapper\",this.getThumbnailPositionClassName(_),{\"thumbnails-wrapper-rtl\":!this.isThumbnailVertical()\u0026\u0026d},{\"thumbnails-swipe-horizontal\":!this.isThumbnailVertical()\u0026\u0026!l},{\"thumbnails-swipe-vertical\":this.isThumbnailVertical()\u0026\u0026!l});return i().createElement(\"div\",{ref:this.imageGallery,className:fA,\"aria-live\":\"polite\"},i().createElement(\"div\",{className:w},(_===\"bottom\"||_===\"right\")\u0026\u0026DA,s\u0026\u0026V.length\u003e0?i().createElement(IB,{className:P0,delta:0,onSwiping:!l\u0026\u0026this.handleThumbnailSwiping,onSwiped:!l\u0026\u0026this.handleOnThumbnailSwiped},i().createElement(\"div\",{className:\"image-gallery-thumbnails\",ref:this.thumbnailsWrapper,style:this.getThumbnailBarHeight()},i().createElement(\"nav\",{ref:this.thumbnails,className:\"image-gallery-thumbnails-container\",style:KA,\"aria-label\":\"Thumbnail Navigation\"},V))):null,(_===\"top\"||_===\"left\")\u0026\u0026DA))}}],x\u0026\u0026y0(A.prototype,x),Object.defineProperty(A,\"prototype\",{writable:!1}),R}(i().Component);MA.propTypes={flickThreshold:D.number,items:(0,D.arrayOf)((0,D.shape)({bulletClass:D.string,bulletOnClick:D.func,description:D.string,original:D.string,originalHeight:D.number,originalWidth:D.number,loading:D.string,thumbnailHeight:D.number,thumbnailWidth:D.number,thumbnailLoading:D.string,fullscreen:D.string,originalAlt:D.string,originalTitle:D.string,thumbnail:D.string,thumbnailAlt:D.string,thumbnailLabel:D.string,thumbnailTitle:D.string,originalClass:D.string,thumbnailClass:D.string,renderItem:D.func,renderThumbInner:D.func,imageSet:t0,srcSet:D.string,sizes:D.string})).isRequired,showNav:D.bool,autoPlay:D.bool,lazyLoad:D.bool,infinite:D.bool,showIndex:D.bool,showBullets:D.bool,showThumbnails:D.bool,showPlayButton:D.bool,showFullscreenButton:D.bool,disableThumbnailScroll:D.bool,disableKeyDown:D.bool,disableSwipe:D.bool,disableThumbnailSwipe:D.bool,useBrowserFullscreen:D.bool,onErrorImageURL:D.string,indexSeparator:D.string,thumbnailPosition:(0,D.oneOf)([\"top\",\"bottom\",\"left\",\"right\"]),startIndex:D.number,slideDuration:D.number,slideInterval:D.number,slideOnThumbnailOver:D.bool,swipeThreshold:D.number,swipingTransitionDuration:D.number,swipingThumbnailTransitionDuration:D.number,onSlide:D.func,onBeforeSlide:D.func,onScreenChange:D.func,onPause:D.func,onPlay:D.func,onClick:D.func,onImageLoad:D.func,onImageError:D.func,onTouchMove:D.func,onTouchEnd:D.func,onTouchStart:D.func,onMouseOver:D.func,onMouseLeave:D.func,onBulletClick:D.func,onThumbnailError:D.func,onThumbnailClick:D.func,renderCustomControls:D.func,renderLeftNav:D.func,renderRightNav:D.func,renderPlayPauseButton:D.func,renderFullscreenButton:D.func,renderItem:D.func,renderThumbInner:D.func,stopPropagation:D.bool,additionalClass:D.string,useTranslate3D:D.bool,isRTL:D.bool,useWindowKeyDown:D.bool},MA.defaultProps={onErrorImageURL:\"\",additionalClass:\"\",showNav:!0,autoPlay:!1,lazyLoad:!1,infinite:!0,showIndex:!1,showBullets:!1,showThumbnails:!0,showPlayButton:!0,showFullscreenButton:!0,disableThumbnailScroll:!1,disableKeyDown:!1,disableSwipe:!1,disableThumbnailSwipe:!1,useTranslate3D:!0,isRTL:!1,useBrowserFullscreen:!0,flickThreshold:.4,stopPropagation:!1,indexSeparator:\" / \",thumbnailPosition:\"bottom\",startIndex:0,slideDuration:450,swipingTransitionDuration:0,swipingThumbnailTransitionDuration:0,onSlide:null,onBeforeSlide:null,onScreenChange:null,onPause:null,onPlay:null,onClick:null,onImageLoad:null,onImageError:null,onTouchMove:null,onTouchEnd:null,onTouchStart:null,onMouseOver:null,onMouseLeave:null,onBulletClick:null,onThumbnailError:null,onThumbnailClick:null,renderCustomControls:null,renderThumbInner:null,renderItem:null,slideInterval:3e3,slideOnThumbnailOver:!1,swipeThreshold:30,renderLeftNav:function($,A){return i().createElement(m0,{onClick:$,disabled:A})},renderRightNav:function($,A){return i().createElement(S0,{onClick:$,disabled:A})},renderPlayPauseButton:function($,A){return i().createElement(g0,{onClick:$,isPlaying:A})},renderFullscreenButton:function($,A){return i().createElement(l0,{onClick:$,isFullscreen:A})},useWindowKeyDown:!0};let Z0=MA})(),o})())});var _2={};n0(_2,{default:()=\u003ef2,frontmatter:()=\u003eK2});var c=jA(OB());var oB=\"/posts/2022-11-27-ardupilot-postmortem/altitude-RAUVJW27.mp4\";var bB=\"/posts/2022-11-27-ardupilot-postmortem/Altitude-BHKRJHSQ.jpg\";var EB=\"/posts/2022-11-27-ardupilot-postmortem/Nosedive1-REX4PBMP.jpg\";var lB=\"/posts/2022-11-27-ardupilot-postmortem/fbw-KRKDJHCO.jpg\";var mB=\"/posts/2022-11-27-ardupilot-postmortem/radio-4I5FXGIA.jpg\";var SB=\"/posts/2022-11-27-ardupilot-postmortem/servo-ZALHGPTH.jpg\";var gB=\"/posts/2022-11-27-ardupilot-postmortem/crash-R6LWE4QN.mp4\";var kB=\"/posts/2022-11-27-ardupilot-postmortem/crashed_servos-X65AQ5IA.jpg\";var XB=\"/posts/2022-11-27-ardupilot-postmortem/bad_servo-X4ZRFTYD.mp4\";var yB=\"/posts/2022-11-27-ardupilot-postmortem/log-KMAND2L6.bin\";var RB=\"/posts/2022-11-27-ardupilot-postmortem/baro-VVGVM4NG.jpg\";var tB=\"/posts/2022-11-27-ardupilot-postmortem/baro_debugging-4NNOSOKQ.jpg\";var ZB=\"/posts/2022-11-27-ardupilot-postmortem/glue-FB65ZVF4.jpg\";var JB=jA(vB()),NB=jA(zB()),K2={title:\"Ardupilot Postmortem\",url:\"/post/ardupilot-postmortem\",type:\"post\",author:\"scottyob\",date:new Date(16695072e5),lastmod:new Date(16698528e5),tags:[\"rc\",\"ardupilot\"],hero:\"crash.jpg\"};function WB(K){let H=Object.assign({p:\"p\",em:\"em\",a:\"a\",h3:\"h3\",ul:\"ul\",li:\"li\",strong:\"strong\",h4:\"h4\",h5:\"h5\"},K.components);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(H.p,{children:(0,c.jsxs)(H.em,{children:[\"A big thanks to those who helped from the \",(0,c.jsx)(H.a,{href:\"https://discuss.ardupilot.org/t/crash-postmortem-why-the-pitch-down/93666/13\",children:\"Ardupilot Forum\"})]})}),`\n`,(0,c.jsx)(H.p,{children:\"Last week, I took a few extra days off from work to give myself a nice long break over Thanksgiving week.\"}),`\n`,(0,c.jsx)(H.p,{children:\"I spent a lot of time finishing an RC plane we had some replacement parts for. This one was going to be autonomous. I spent a few days soldering the flight controller and electronics, gluing the plane together, measuring and trimming everything perfectly. It was perfectly balanced, perfectly weighted. We finally took it out for its maiden flight today, Sunday November 27.  Sadly, this story ends in pieces.\"}),`\n`,`\n`,(0,c.jsx)(H.p,{children:\"This post is a postmortem of the incident to make sense of what happened.  I was flying using Ardupilot and had an SD card in recording the data.  Although I can't be certain, I'm pretty sure we can use this data to root cause the issues.\"}),`\n`,(0,c.jsx)(H.h3,{children:\"Plane Hardware\"}),`\n`,(0,c.jsxs)(H.ul,{children:[`\n`,(0,c.jsxs)(H.li,{children:[(0,c.jsx)(H.strong,{children:\"Plane\"}),\": \",(0,c.jsx)(H.a,{href:\"https://hobbyking.com/en_us/h-king-bixler-3-glider-1550-pnf.html\",children:\"Bixler 3\"})]}),`\n`,(0,c.jsxs)(H.li,{children:[(0,c.jsx)(H.strong,{children:\"Flight Controller\"}),\": \",(0,c.jsx)(H.a,{href:\"https://ardupilot.org/copter/docs/common-holybro-kakutef7aio.html\",children:\"Holybro Kakute F7\"})]}),`\n`,(0,c.jsxs)(H.li,{children:[(0,c.jsx)(H.strong,{children:\"GPS, Compass\"}),\": \",(0,c.jsx)(H.a,{href:\"https://ardupilot.org/copter/docs/common-beitian-gps.html\",children:\"Beitian BN-880\"})]}),`\n`,(0,c.jsxs)(H.li,{children:[(0,c.jsx)(H.strong,{children:\"Ardupilot\"}),\": Arduplane V4.3.1\"]}),`\n`]}),`\n`,(0,c.jsx)(H.h3,{children:\"Tools \u0026 Files\"}),`\n`,(0,c.jsxs)(H.ul,{children:[`\n`,(0,c.jsx)(H.li,{children:(0,c.jsx)(H.a,{href:\"https://ardupilot.org/dev/docs/common-uavlogviewer.html\",children:\"UAV Logviewer\"})}),`\n`,(0,c.jsxs)(H.li,{children:[\"Ardupilot \",(0,c.jsx)(H.strong,{children:(0,c.jsx)(\"a\",{href:yB,children:\"LOG FILE\"})})]}),`\n`]}),`\n`,(0,c.jsx)(H.h3,{children:\"Theories \u0026 Investigation\"}),`\n`,(0,c.jsx)(H.p,{children:\"The flight controller has a BMP280 barometer to measure the altitude quickly, and a ICM20689 IMU for acceleration and gyro.  There is also a slower-updating GPS, so between these instruments, I expect fairly accurate altitude and position readings.  The plane behaved erratically twice in the short two-minute flight.  After combing through the available data, I suspect two failures during this flight.  What follows is a timeline of the events of the flight and notes on each incident.\"}),`\n`,(0,c.jsx)(H.h3,{children:\"Events in Flight\"}),`\n`,(0,c.jsx)(H.h4,{children:\"1. Bad Altitude Readings Pre-Launch\"}),`\n`,(0,c.jsx)(H.p,{children:\"The first noteworthy item is that the altitude readings from the barometer and accelerometer are bogus.  I seem to be getting more realistic readings from the GPS.  Going forward, any screenshots will be from the GPS altitude.\"}),`\n`,(0,c.jsx)(\"video\",{width:\"100%\",loop:!0,controls:!0,autoPlay:!0,muted:!0,children:(0,c.jsx)(\"source\",{src:oB})}),`\n`,(0,c.jsx)(\"img\",{src:bB,alt:\"Altitude\"}),`\n`,(0,c.jsx)(H.p,{children:\"The altitude readings are super interesting here.  You can tell even before I launch the plane, the GPS altitude readings are between -13m and 0m.  Not sure what this altitude is (above sea level?  Above ground level?? Either way, this flight took place very nearly at sea level.)\"}),`\n`,(0,c.jsx)(H.p,{children:\"More concerning, the barometer altitude is between -10 and -70m in the ~1 minute before launch on the ground.  The calculated AHRS (Attitude Heading Reference System) altitude at somewhat similar, -9 and -80  \\u{1FAE4}\"}),`\n`,(0,c.jsx)(H.h4,{children:\"ROOT CAUSE\"}),`\n`,(0,c.jsx)(H.p,{children:\"As mentioned, the Ardupilot software uses a combination of an accelerometer, GPS, and barometer to calculate the current altitude.  In this instance, the hardware was not faulty, but badly installed.\"}),`\n`,(0,c.jsx)(H.p,{children:\"On this flight controller, the barometer is on the bottom of the board.  It has a little tiny hole in it to allow pressure sensing.  In my \\u{1F921}'y install, this is covered by hot glue and velcro.\"}),`\n`,(0,c.jsx)(H.p,{children:\"While this didn't cause a crash, it shows that I didn't ground test the altitude, and any attempts at keeping altitude in autopilot mode may have been dangerous.\"}),`\n`,(0,c.jsx)(NB.default,{items:[RB,tB,ZB].map((S,O)=\u003e({original:S,thumbnail:S}))}),`\n`,(0,c.jsx)(H.h4,{children:\"2. Launch\"}),`\n`,(0,c.jsx)(H.p,{children:'The maiden launch itself in manual mode was nominal.  You can hear me saying \"Good luck little plane\".  It needed more than luck it seems!'}),`\n`,(0,c.jsx)(JB.default,{width:\"100%\",height:\"400px\",video:\"D03_c0LWJhM\"}),`\n`,(0,c.jsx)(H.h4,{children:\"3. Fly-By-Wire Test\"}),`\n`,(0,c.jsxs)(H.p,{children:[\"At ~1 minute 22 seconds into the flight, I turned the flight mode from manual to \",(0,c.jsx)(H.a,{href:\"https://ardupilot.org/plane/docs/fbwa-mode.html\",children:\"Fly by wire A\"}),\", which should have had the effect of assisting the plane in straight line.  Looking at the radio stick input, I did not change the heading, but the autopilot sent this into a steep dive at this time.  A near miss where we avoided a crash here.\"]}),`\n`,(0,c.jsx)(\"img\",{src:lB,alt:\"Fly by wire setup\"}),`\n`,(0,c.jsx)(H.h5,{children:\"Reversed Elevator\"}),`\n`,(0,c.jsx)(\"img\",{src:EB,alt:\"Graph showing first nose dive\"}),`\n`,(0,c.jsx)(H.p,{children:\"12:24 is interesting here. If we look at the time we engage the autopilot, we can see the pitch heading down into the ground, before our roll even begins to change.  It ends up to a point where it's almost completely nose down before we save it by switching to manual flight mode.\"}),`\n`,(0,c.jsx)(H.h5,{children:\"Root Cause\"}),`\n`,(0,c.jsx)(H.p,{children:\"What's interesting is that the pitch continues to fall, and the AETR elevator gets more and more positive.  Is it possible that we're trying to correct the nose down and instead making it worse?  Here I did NOT check how the autopilot responds on the ground, and I instead tested in manual mode, and adjusted the Servo Output functions to work.  I should have instead checked this in combination with the Radio Calibration reverse settings\"}),`\n`,(0,c.jsx)(\"img\",{src:mB,alt:\"Controllers\"}),`\n`,(0,c.jsx)(\"img\",{src:SB,alt:\"Servos\"}),`\n`,(0,c.jsx)(H.h3,{children:\"4. Crash (elevator failure?)\"}),`\n`,(0,c.jsx)(H.p,{children:'This event makes me believe that I had an elevator failure during the flight. In a panic I \"checked\" my autopilot settings, and accidentally turned it on.'}),`\n`,(0,c.jsx)(H.p,{children:(0,c.jsx)(H.strong,{children:\"Events:\"})}),`\n`,(0,c.jsxs)(H.ul,{children:[`\n`,(0,c.jsx)(H.li,{children:\"Nominal flight approaching turn\"}),`\n`,(0,c.jsx)(H.li,{children:\"Banks left to enter turn\"}),`\n`,(0,c.jsx)(H.li,{children:\"Starts pitching down, control toggles are pulling back on the elevator, manual flight mode still engaged\"}),`\n`,(0,c.jsx)(H.li,{children:\"Plane is not responsive and is still pitching down\"}),`\n`,(0,c.jsx)(H.li,{children:\"After loosing much altitude, in a panic, RTL is engaged\"}),`\n`,(0,c.jsx)(H.li,{children:\"Plane starts pitching nose down further once RTL is engaged (reversed elevator theory?) causing the epic crash with almost full speed, full nose down\"}),`\n`]}),`\n`,(0,c.jsx)(\"video\",{width:\"100%\",controls:!0,autoPlay:!0,muted:!0,children:(0,c.jsx)(\"source\",{src:gB})}),`\n`,(0,c.jsx)(H.p,{children:\"Upon inspection, the suspected failed elevator servo is the one shown in black here.  When moving the control horns without power, I noticed that it slipped.  It's possible it could have slipped in flight causing the loss of the ability to pitch up.  It's also possible that the 915mhz SIK radio I was flying with for telemetry interfered with the servo (they do twitch then they're close, but I had thought I had moved this far enough away).  I guess we'll never truly know!\"}),`\n`,(0,c.jsx)(\"img\",{src:kB,alt:\"Crashed servos\"}),`\n`,(0,c.jsx)(\"video\",{width:\"100%\",controls:!0,autoPlay:!0,loop:!0,muted:!0,children:(0,c.jsx)(\"source\",{src:XB})}),`\n`,(0,c.jsx)(H.h3,{children:\"Lessons\"}),`\n`,(0,c.jsxs)(H.ul,{children:[`\n`,(0,c.jsxs)(H.li,{children:[\"Don't fly with so much throttle.  Mistakes happen a \",(0,c.jsx)(H.em,{children:\"lot\"}),\" faster than it could otherwise happen\"]}),`\n`,(0,c.jsx)(H.li,{children:\"Test the FBWA modes on the ground.  Ensure that the elevator, ailerons and rudder is behaving as expected in relationship to pitch, roll movements.\"}),`\n`,(0,c.jsx)(H.li,{children:\"Make sure you setup BOTH the reverse setting on the controller input, and servo output.\"}),`\n`,(0,c.jsx)(H.li,{children:\"Be sure to glue in everything!  I'm not convinced a servo could have come loose during this flight.\"}),`\n`]})]})}function d2(K={}){let{wrapper:H}=K.components||{};return H?(0,c.jsx)(H,Object.assign({},K,{children:(0,c.jsx)(WB,K)})):WB(K)}var f2=d2;return u0(_2);})();\n;return Component;"])</script><script>self.__next_f.push([1,"11:[\"$\",\"article\",null,{\"className\":\"\",\"children\":[\"$\",\"div\",null,{\"className\":\"__className_12746b mb-9\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"__className_df02b7 text-2xl\",\"children\":\"Ardupilot Postmortem\"}],[\"$\",\"div\",null,{\"className\":\"text-xs text-gray-400 italic mb-5\",\"children\":[\"Created: \",[\"$\",\"$L12\",null,{\"date\":\"$D2022-11-27T00:00:00.000Z\"}]]}],[\"$\",\"$L13\",null,{\"src\":{\"src\":\"/_next/static/media/crash.15f71183.jpg\",\"height\":1536,\"width\":2048,\"blurDataURL\":\"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAGAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAP/xAAdEAEAAQMFAAAAAAAAAAAAAAABAAIDEQQFEiGR/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgX/xAAYEQACAwAAAAAAAAAAAAAAAAAAAgEhMf/aAAwDAQACEQMRAD8Ajtt/Uchu1mawSm3kA97iIk9tGsUf/9k=\",\"blurWidth\":8,\"blurHeight\":6},\"alt\":\"Post picture\",\"className\":\"m-auto mb-5\"}],[\"$\",\"div\",null,{\"className\":\"prose lg:prose-lg\",\"children\":[\"$\",\"$L14\",null,{\"code\":\"$15\"}]}]]}]}]\n"])</script></body></html>