1:HL["/_next/static/css/70a6988bfc142772.css",{"as":"style"}]
0:["aQlZSs9CDQ5o1878iGuKG",[[["",{"children":["(navbar)",{"children":["(margined)",{"children":["post",{"children":[["slug","2011/dns-performance","c"],{"children":["__PAGE__?{\"slug\":[\"2011\",\"dns-performance\"]}",{}]}]}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/70a6988bfc142772.css","precedence":"next"}]],"$L3"]]]]
4:HL["/_next/static/media/42e58f5a516ebb1b-s.p.woff2",{"as":"font","type":"font/woff2"}]
5:HL["/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2",{"as":"font","type":"font/woff2"}]
6:HL["/_next/static/media/d45575ed0ad4f563-s.p.woff2",{"as":"font","type":"font/woff2"}]
7:HL["/_next/static/css/d699b3284dd0f0c8.css",{"as":"style"}]
8:HL["/_next/static/media/8679c800f1e60000-s.p.woff2",{"as":"font","type":"font/woff2"}]
9:HL["/_next/static/media/af1939b13935fec8-s.p.woff2",{"as":"font","type":"font/woff2"}]
a:HL["/_next/static/css/e1665b43251c86eb.css",{"as":"style"}]
b:I{"id":7767,"chunks":["272:static/chunks/webpack-c0d6ce99d471eac9.js","971:static/chunks/fd9d1056-f562485b1666a0a3.js","596:static/chunks/596-5b64dbf019a905f5.js"],"name":"default","async":false}
c:I{"id":7920,"chunks":["272:static/chunks/webpack-c0d6ce99d471eac9.js","971:static/chunks/fd9d1056-f562485b1666a0a3.js","596:static/chunks/596-5b64dbf019a905f5.js"],"name":"default","async":false}
d:I{"id":6685,"chunks":["685:static/chunks/685-a0750907e0c935bc.js","222:static/chunks/222-0c303d3189115893.js","982:static/chunks/982-07d375c9d37b134d.js","46:static/chunks/app/(navbar)/(margined)/page-4623163d6cd3c237.js"],"name":"","async":false}
e:I{"id":2179,"chunks":["724:static/chunks/358ff52d-5af8921f222f7c20.js","122:static/chunks/e416a3ff-be1b889799c50168.js","447:static/chunks/00cbbcb7-5522c112e5f40d45.js","685:static/chunks/685-a0750907e0c935bc.js","713:static/chunks/app/(navbar)/layout-53648850bb136a0a.js"],"name":"","async":false}
2:[["$","html",null,{"lang":"en","children":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":[["$","body",null,{"className":"__className_e66fe9","children":["$","div",null,{"className":"flex max-w-full w-full flex-col pt-8 pb-8","children":[["$","div",null,{"className":"self-center w-full","children":[["$","h1",null,{"className":"text-center text-4xl __className_31da3a","children":["$","$Ld",null,{"href":"/","children":"Scott O'Brien"}]}],["$","$Le",null,{}]]}],["$","div",null,{"className":"w-full flex flex-col","id":"main-content","children":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":[["$","div",null,{"className":"self-center mt-7 max-w-2xl w-[80%]","children":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children","(margined)","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children","(margined)","children","post","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children","(margined)","children","post","children",["slug","2011/dns-performance","c"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Lf",null],"segment":"__PAGE__?{\"slug\":[\"2011\",\"dns-performance\"]}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/e1665b43251c86eb.css","precedence":"next"}]]}],"segment":["slug","2011/dns-performance","c"]},"styles":[]}],"segment":"post"},"styles":[]}]}],null],"segment":"(margined)"},"styles":[]}]}]]}]}],null],"segment":"(navbar)"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/d699b3284dd0f0c8.css","precedence":"next"}]]}]}],null]
3:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Scott O'Brien"}],["$","meta","2",{"name":"description","content":"My online creative outlet"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}],["$","meta","5",{"name":"next-size-adjust"}]]
10:I{"id":8248,"chunks":["222:static/chunks/222-0c303d3189115893.js","982:static/chunks/982-07d375c9d37b134d.js","344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-a0f72aa7860b7ab0.js"],"name":"","async":false}
11:I{"id":9098,"chunks":["222:static/chunks/222-0c303d3189115893.js","982:static/chunks/982-07d375c9d37b134d.js","344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-a0f72aa7860b7ab0.js"],"name":"","async":false}
12:T206e,var Component=(()=>{var l=Object.create;var a=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var p=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var o in e)a(n,o,{get:e[o],enumerable:!0})},r=(n,e,o,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of g(e))!w.call(n,s)&&s!==o&&a(n,s,{get:()=>e[s],enumerable:!(i=m(e,s))||i.enumerable});return n};var k=(n,e,o)=>(o=n!=null?l(u(n)):{},r(e||!n||!n.__esModule?a(o,"default",{value:n,enumerable:!0}):o,n)),I=n=>r(a({},"__esModule",{value:!0}),n);var h=p((E,c)=>{c.exports=_jsx_runtime});var S={};f(S,{default:()=>N,frontmatter:()=>b});var t=k(h()),b={title:"What\u2019s the harm in Google DNS? Performance!",author:"scottyob",type:"post",date:new Date(1309617605e3),url:"/2011/07/02/whats-the-harm-in-google-dns-performance/",categories:["nerd"],tags:["DNS","IP","routing"]};function d(n){let e=Object.assign({p:"p",a:"a",ul:"ul",li:"li",pre:"pre",code:"code"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:"**EDIT:**It looks like Google has recently starting peering in more places in AU with an anycast solution that fixes these issues."}),`
`,(0,t.jsx)(e.p,{children:`On a little side note to the tutorial series I've been writing up lately for building a ZFS fileserver. This one is about Why Google DNS is bad for your performance (well, depending on where you live)
A real quick run down, we all know what DNS does yeah? It translates domains like www.scottyob.com into IP addresses like 112.140.183.97. A DNS server has a job of translating these domain names to the IP addresses we can use.`}),`
`,`
`,(0,t.jsxs)(e.p,{children:["Now, when it comes to Google DNS, if you believe in the propaganda ",(0,t.jsx)(e.a,{href:"http://code.google.com/speed/public-dns/",children:"http://code.google.com/speed/public-dns/"})," where Google DNS is said to"]}),`
`,(0,t.jsxs)(e.ul,{children:[`
`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://code.google.com/speed/public-dns/docs/performance.html",children:"Speed up your browsing experience"})}),`
`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://code.google.com/speed/public-dns/docs/security.html",children:"Improve your Security."})}),`
`]}),`
`,(0,t.jsx)(e.p,{children:"What google doesn't tell you is that it interferes with DNS servers that might try and give you a server that's close to your home. I've been using Google DNS for months here at home, but only just have I decided against using it, and I'll run through exactly what causes some performance issues."}),`
`,(0,t.jsx)(e.p,{children:"I was trying to watch a program on iView on TPG's internet connection. Now, TPG don't have the best international links on peak times, so I first started getting frustrated at them for not letting me watch my iView program with buffer lags on my 8Mbit plan. I checked my Signal to Noise ratio and dropped packets, etc.. it was fine. I checked the bandwith going out on my ppp interface on the router to see if I was maxing out the net connection at home, but nope, that was fine too, so the problem must have been with TPG."}),`
`,(0,t.jsx)(e.p,{children:"Looking at what was going on, I did a little traceroute to www.abc.net.au"}),`
`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:`traceroute: Warning: www.abc.net.au has multiple addresses; using 125.252.224.73
traceroute to a1632.g.akamai.net (125.252.224.73), 64 hops max, 52 byte packets
1 10.1.1.254 (10.1.1.254) 1.919 ms 1.260 ms 1.202 ms
2 * * *
3 202.7.173.17 (202.7.173.17) 27.056 ms 26.317 ms 26.693 ms
4 syd-sot-ken-crt1-ge-5-1-0.tpgi.com.au (202.7.162.173) 26.283 ms 26.884 ms 26.100 ms
5 ix-11-1-0-507.tcore2.tv2-tokyo.as6453.net (116.0.88.21) 153.325 ms 135.736 ms 126.568 ms
6 if-14-0-0-1720.core1.tv2-tokyo.as6453.net (209.58.61.121) 1481.461 ms
if-1-0-0-1715.core1.tv2-tokyo.as6453.net (209.58.61.125) 298.270 ms
if-14-0-0-1720.core1.tv2-tokyo.as6453.net (209.58.61.121) 282.141 ms
7 if-10-0-0-981.core3.hk2-hongkong.as6453.net (116.0.82.85) 208.232 ms
if-5-0-0.core3.hk2-hongkong.as6453.net (116.0.82.1) 199.170 ms
if-10-0-0-981.core3.hk2-hongkong.as6453.net (116.0.82.85) 206.027 ms
8 vlan31.icore1.hk2-hongkong.as6453.net (116.0.82.18) 219.937 ms 204.963 ms 196.273 ms
9 80.150.169.25 (80.150.169.25) 333.519 ms 306.138 ms 307.031 ms
10 80.156.224.6 (80.156.224.6) 358.402 ms 320.029 ms 349.133 ms
11 a125-252-224-73.deploy.akamaitechnologies.com (125.252.224.73) 332.188 ms 331.008 ms 314.833 ms
`})}),`
`,(0,t.jsxs)(e.p,{children:[`Looking at this traceroute, the first thing I thought was \u201CWhy on earth is ABC hosting it's website in hongkong (or so the traffic has to go via hongkong.)? Immediately reject ABC would do this and I blame TPG's stupid routing decisions.
Looking at the IP address further `,(0,t.jsx)(e.a,{href:"http://www.dnsstuff.com/tools/ipall/?tool_id=67&token=&toolhandler_redirect=0&ip=125.252.224.73",children:"http://www.dnsstuff.com/tools/ipall/?tool_id=67&token=&toolhandler_redirect=0&ip=125.252.224.73"})," It looks like it's hosted in Singapore, and some googling shows akamaitechnologies is the web host for ABC.. ok, so what is going on here?"]}),`
`,(0,t.jsx)(e.p,{children:"then I did a little DIGging around on the ABC domain and check this out."}),`
`,(0,t.jsx)(e.p,{children:"Using Google DNS (8.8.8.8, hosted in America):"}),`
`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:`; <<>> DiG 9.6.0-APPLE-P2 <<>> www.abc.net.au @8.8.8.8
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 16084
;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 0
;; QUESTION SECTION:
;www.abc.net.au. IN A
;; ANSWER SECTION:
www.abc.net.au. 882 IN CNAME www.abc.net.au.edgesuite.net.
www.abc.net.au.edgesuite.net. 21581 IN CNAME a1632.g.akamai.net.
a1632.g.akamai.net. 2 IN A 63.150.131.41
a1632.g.akamai.net. 2 IN A 63.150.131.33
;; Query time: 161 msec
;; SERVER: 8.8.8.8#53(8.8.8.8)
;; WHEN: Sun Jul 3 00:37:00 2011
;; MSG SIZE rcvd: 135
`})}),`
`,(0,t.jsx)(e.p,{children:"And using TPG's DNS servers (203.12.160.35)"}),`
`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:`; <<>> DiG 9.6.0-APPLE-P2 <<>> www.abc.net.au @203.12.160.35
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 11673
;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 0
;; QUESTION SECTION:
;www.abc.net.au. IN A
;; ANSWER SECTION:
www.abc.net.au. 523 IN CNAME www.abc.net.au.edgesuite.net.
www.abc.net.au.edgesuite.net. 12274 IN CNAME a1632.g.akamai.net.
a1632.g.akamai.net. 10 IN A 202.7.177.66
a1632.g.akamai.net. 10 IN A 202.7.177.83
;; Query time: 29 msec
;; SERVER: 203.12.160.35#53(203.12.160.35)
;; WHEN: Sun Jul\xA0 3 00:38:20 2011
;; MSG SIZE\xA0 rcvd: 135
`})}),`
`,(0,t.jsx)(e.p,{children:"So there we go, hosted in Sydney Australia.. So how does the traceroute compare?"}),`
`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:`macshell:~ scott$ traceroute www.abc.net.au
traceroute: Warning: www.abc.net.au has multiple addresses; using 202.7.177.83
traceroute to a1632.g.akamai.net (202.7.177.83), 64 hops max, 52 byte packets
1\xA0 10.1.1.254 (10.1.1.254)\xA0 1.711 ms\xA0 1.134 ms\xA0 1.100 ms
2\xA0 * * *
3\xA0 202.7.173.17 (202.7.173.17)\xA0 27.047 ms\xA0 26.072 ms\xA0 26.502 ms
4\xA0 syd-sot-ken-ak2-83.tpgi.com.au (202.7.177.83)\xA0 26.540 ms\xA0 26.835 ms\xA0 26.540 ms
`})}),`
`,(0,t.jsx)(e.p,{children:`Different nameservers can be set up to resolve to different addresses based on geographic positioning, in more of a first in best\xA0dressed\xA0kind of effort. \xA0So if you're using Google DNS servers (8.8.8.8), it so happens that because this is in America (check out their IP address, CA), then I started getting update servers and the like on DNS that were closest in latency terms to America then Sydney Australia.
Simply by changing from Google DNS servers to my ISP's, I get healthier\xA0latency, and am no longer sending traffic over saturated overseas links. \xA0So how does this compare with ABC iView?`})]})}function y(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(d,n)})):d(n)}var N=y;return I(S);})();
;return Component;f:["$","article",null,{"className":"","children":["$","div",null,{"className":"__className_12746b mb-9","children":[["$","h2",null,{"className":"__className_df02b7 text-2xl","children":"Whatâ€™s the harm in Google DNS? Performance!"}],["$","div",null,{"className":"text-xs text-gray-400 italic mb-5","children":["Created: ",["$","$L10",null,{"date":"$D2011-07-02T14:40:05.000Z"}]]}],"$undefined",["$","div",null,{"className":"prose lg:prose-lg","children":["$","$L11",null,{"code":"$12"}]}]]}]}]
