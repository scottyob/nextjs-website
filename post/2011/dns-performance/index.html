<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/2aaf0723e720e8b9-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/42e58f5a516ebb1b-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/4e8dfc5aa8742fdc-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/8679c800f1e60000-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/af1939b13935fec8-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/8a1e8ec2da824aa2.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/c2c1ea965511607d.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/e1665b43251c86eb.css" data-precedence="next"/><link rel="preload" href="/_next/static/chunks/webpack-6a94f4f450a79057.js" as="script"/><link rel="preload" href="/_next/static/chunks/fd9d1056-f562485b1666a0a3.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-5b64dbf019a905f5.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-app-c71b577ad5f96a17.js" as="script"/><title>Scott O&#x27;Brien</title><meta name="description" content="My online creative outlet"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_20951f"><div class="flex max-w-full w-full flex-col pt-8 pb-8"><div class="self-center w-full"><h1 class="text-center text-4xl __className_31da3a"><a href="/">Scott O&#x27;Brien</a></h1><ul class="flex flex-wrap justify-center text-gray-400 italic pt-3 mb-8 max-w-2xl w-[80%] m-auto [&amp;&gt;li]:ml-3 [&amp;&gt;li]:mr-3 [&amp;_svg]:inline [&amp;_svg]:mr-1 __className_4f8416"><li class="transition group duration-300 whitespace-nowrap"><a href="/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M6 10l2-1 7-7-1-1-7 7-1 2zM4.52 13.548c-0.494-1.043-1.026-1.574-2.069-2.069l1.548-4.262 2-1.217 6-6h-3l-6 6-3 10 10-3 6-6v-3l-6 6-1.217 2z"></path></svg>Writings/Projects</a><span class="block group-hover:max-w-[75%] m-auto transition-all duration-500 h-0.5 max-w-[85%] bg-orange-500"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/about/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9 1.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5z"></path><path d="M9 4h-3c-0.552 0-1 0.448-1 1v5h1v6h1.25v-6h0.5v6h1.25v-6h1v-5c0-0.552-0.448-1-1-1z"></path></svg>About</a><span class="block group-hover:max-w-[75%] m-auto transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/bucketlist/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"></path><path d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"></path></svg>Bucket List</a><span class="block group-hover:max-w-[75%] m-auto transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/recipes/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M151.7 16.73s-20.6 14.12-22 25.18c-1.4 11.33 17.6 19.24 15.6 30.48-1.3 7.43-16.6 15.38-16.6 15.38s38.7-3.36 42.3-18.3c2.9-11.82-19.8-16.61-23-28.35-2.1-7.94 3.7-24.39 3.7-24.39zm214.4 4.89s-24.8 13.58-24.9 25.45c-.1 7.24 14.4 8.67 14.8 15.9.5 8.56-15.3 20.68-15.3 20.68s33.6-3.81 38.1-16.97c2.7-7.77-9.4-13.81-11.6-21.73-2.1-7.5-1.1-23.33-1.1-23.33zm-106.9.26s-26.9 13.75-24.9 25.45c1.4 7.93 20.6 2.62 21.7 10.6 1.7 13.01-29.6 25.98-29.6 25.98s56.5-1.44 58.8-22.27c1.1-9.88-20-7.79-24.9-16.43-3.9-6.77-1.1-23.33-1.1-23.33zM48 105.6v18h416v-18zm16 37c-14.48 86.9 16.9 138.1 58.6 168.2-3.6-24.8-14.1-49.1-35.06-72.2 39.96 10.5 71.36 48.8 85.36 87.2 2.3-18.8 2.3-27.5 19.5-44.2-3.1 24.8 11.2 26.5 21.2 23.4 25.3-7.9 35.6-39.5 10.6-78.9 47.6 22.7 48.3 48.4 56.3 83.7-2.4-33.2 24.3-46.5 43.7-34-45.1 22.7-8.2 42.2 6.9 47 40 12.8 70-46.3 87.2-91 4.7 19.8.8 39.7-6.5 59.5C441.4 260 459.7 213 448 142.6zm184.3 175.2L75 417.5c2.7 18.4 9 34.4 18.8 48.5l92-44.1-78.7 59.9c3.4 3.4 7.1 6.6 11 9.7l74.7-42.9c0-.7-.1-1.5-.1-2.2 0-37.2 30.5-67.6 67.8-67.6 10.6 0 20.6 2.4 29.5 6.7-2.4-13.4-7.3-27.1-14.8-39.2l-94.9 40.1 82.5-56.5c-4.4-4.5-9.2-8.6-14.5-12.1zm58.9 57.6c1.6 7.2 2.6 14.4 3 21.4l.2 3.9c11.1 12 17.9 28.1 17.9 45.7 0 7.8-1.3 15.3-3.8 22.2l91.4 24.4c4.6-6.3 8.6-12.8 11.8-19.4l-63.1-24.7 70.1 6.9c.9-3 1.6-5.9 2.2-8.9l-97.1-34.3 99.2 15.5c.2-5.8-.1-11.7-.8-17.7zm-46.7 22.1c-27.2 0-49.1 21.8-49.1 48.9 0 27.1 21.9 48.9 49.1 48.9 27.3 0 49.2-21.8 49.2-48.9 0-27.1-21.9-48.9-49.2-48.9zm-4.9 11.8c43.8 0 58.4 71.6 0 71.6 26.6-23.1 29.8-46.9 0-71.6zm.2 9.8c-21.6 17.9-19.3 35.2 0 52-42.4 0-31.8-52 0-52z"></path></svg>Cooking</a><span class="block group-hover:max-w-[75%] m-auto transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/flying/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M487 37.1C396.4 53.23 292 95.28 207.5 140 163 163.6 124 187.8 95.39 209.2 81.08 220 69.36 230 60.93 238.6c-8.43 8.7-13.38 16.3-14.65 20.3-9.04 28.7-3.42 57.7 1.73 84.7 9.55 50.4-3.23 88.9-22.98 126.3 25.24-5.7 45.36-19.8 57-47 8.47-19.8 9.13-37 11.43-57.6 2.3-20.6 6.45-44.2 22.44-73.2l.2-.4.2-.4c8.8-12.6 26.2-22.2 50-33.4 23.7-11.2 53.6-23 86-35.1 63.8-23.8 137.2-48.7 190.1-71.3 20-30.1 34-74.24 44.6-114.4zm-55 138.2c-51.7 21-116.6 43.1-173.5 64.3-32.2 12-61.8 23.7-84.6 34.5-22.6 10.7-38.5 21.6-42.6 27.2-6.8 12.3-11.1 23.2-14 33.3 83.4-6.5 195.3-31.8 271.3-66.6 27.4-29.7 36.9-59.7 43.4-92.7zm-58 118.8c-79 32.2-182 53.3-260.8 58.6-.9 5-1.5 9.8-2 14.6-.4 3.5-.7 7.1-1.1 10.6 72.4 7.5 136.3 4 206.2-6.5 32.6-22.5 49.8-49.6 57.7-77.3zm-78.4 98.2c-62.3 8.1-121.6 10.2-187.6 3.4-.7 4.5-1.6 9-2.7 13.6 35.9 19.2 98.1 25.8 140.7 24.6 30.2-12.4 41.5-24.8 49.6-41.6zM99.78 426.7c-1.15 2.1-3.14 6.7-4.21 8.9 14.03 20.2 48.73 32.2 88.43 39.3 21.2-8 28.3-15.5 36.5-23-39.7-1.1-86.7-7.7-120.7-25.2z"></path></svg>Flying</a><span class="block group-hover:max-w-[75%] m-auto transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li></ul></div><div class="w-full flex flex-col" id="main-content"><div class="self-center mt-7 max-w-2xl w-[80%]"><article class=""><div class="__className_12746b mb-9"><h2 class="__className_df02b7 text-2xl">Whatâ€™s the harm in Google DNS? Performance!</h2><div class="text-xs text-gray-400 italic mb-5">Created: <span>7/2/2011, 2:40:05 PM</span></div><div class="prose lg:prose-lg"><p>**EDIT:**It looks like Google has recently starting peering in more places in AU with an anycast solution that fixes these issues.</p>
<p>On a little side note to the tutorial series I&#x27;ve been writing up lately for building a ZFS fileserver. This one is about Why Google DNS is bad for your performance (well, depending on where you live)
A real quick run down, we all know what DNS does yeah? It translates domains like www.scottyob.com into IP addresses like 112.140.183.97. A DNS server has a job of translating these domain names to the IP addresses we can use.</p>
<!-- -->
<p>Now, when it comes to Google DNS, if you believe in the propaganda <a href="http://code.google.com/speed/public-dns/">http://code.google.com/speed/public-dns/</a> where Google DNS is said to</p>
<ul>
<li><a href="http://code.google.com/speed/public-dns/docs/performance.html">Speed up your browsing experience</a></li>
<li><a href="http://code.google.com/speed/public-dns/docs/security.html">Improve your Security.</a></li>
</ul>
<p>What google doesn&#x27;t tell you is that it interferes with DNS servers that might try and give you a server that&#x27;s close to your home. I&#x27;ve been using Google DNS for months here at home, but only just have I decided against using it, and I&#x27;ll run through exactly what causes some performance issues.</p>
<p>I was trying to watch a program on iView on TPG&#x27;s internet connection. Now, TPG don&#x27;t have the best international links on peak times, so I first started getting frustrated at them for not letting me watch my iView program with buffer lags on my 8Mbit plan. I checked my Signal to Noise ratio and dropped packets, etc.. it was fine. I checked the bandwith going out on my ppp interface on the router to see if I was maxing out the net connection at home, but nope, that was fine too, so the problem must have been with TPG.</p>
<p>Looking at what was going on, I did a little traceroute to www.abc.net.au</p>
<pre><code>traceroute: Warning: www.abc.net.au has multiple addresses; using 125.252.224.73
traceroute to a1632.g.akamai.net (125.252.224.73), 64 hops max, 52 byte packets
1 10.1.1.254 (10.1.1.254) 1.919 ms 1.260 ms 1.202 ms
2 * * *
3 202.7.173.17 (202.7.173.17) 27.056 ms 26.317 ms 26.693 ms
4 syd-sot-ken-crt1-ge-5-1-0.tpgi.com.au (202.7.162.173) 26.283 ms 26.884 ms 26.100 ms
5 ix-11-1-0-507.tcore2.tv2-tokyo.as6453.net (116.0.88.21) 153.325 ms 135.736 ms 126.568 ms
6 if-14-0-0-1720.core1.tv2-tokyo.as6453.net (209.58.61.121) 1481.461 ms
if-1-0-0-1715.core1.tv2-tokyo.as6453.net (209.58.61.125) 298.270 ms
if-14-0-0-1720.core1.tv2-tokyo.as6453.net (209.58.61.121) 282.141 ms
7 if-10-0-0-981.core3.hk2-hongkong.as6453.net (116.0.82.85) 208.232 ms
if-5-0-0.core3.hk2-hongkong.as6453.net (116.0.82.1) 199.170 ms
if-10-0-0-981.core3.hk2-hongkong.as6453.net (116.0.82.85) 206.027 ms
8 vlan31.icore1.hk2-hongkong.as6453.net (116.0.82.18) 219.937 ms 204.963 ms 196.273 ms
9 80.150.169.25 (80.150.169.25) 333.519 ms 306.138 ms 307.031 ms
10 80.156.224.6 (80.156.224.6) 358.402 ms 320.029 ms 349.133 ms
11 a125-252-224-73.deploy.akamaitechnologies.com (125.252.224.73) 332.188 ms 331.008 ms 314.833 ms
</code></pre>
<p>Looking at this traceroute, the first thing I thought was â€œWhy on earth is ABC hosting it&#x27;s website in hongkong (or so the traffic has to go via hongkong.)? Immediately reject ABC would do this and I blame TPG&#x27;s stupid routing decisions.
Looking at the IP address further <a href="http://www.dnsstuff.com/tools/ipall/?tool_id=67&amp;token=&amp;toolhandler_redirect=0&amp;ip=125.252.224.73">http://www.dnsstuff.com/tools/ipall/?tool_id=67&amp;token=&amp;toolhandler_redirect=0&amp;ip=125.252.224.73</a> It looks like it&#x27;s hosted in Singapore, and some googling shows akamaitechnologies is the web host for ABC.. ok, so what is going on here?</p>
<p>then I did a little DIGging around on the ABC domain and check this out.</p>
<p>Using Google DNS (8.8.8.8, hosted in America):</p>
<pre><code>; &lt;&lt;&gt;&gt; DiG 9.6.0-APPLE-P2 &lt;&lt;&gt;&gt; www.abc.net.au @8.8.8.8
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 16084
;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 0
;; QUESTION SECTION:
;www.abc.net.au. IN A
;; ANSWER SECTION:
www.abc.net.au. 882 IN CNAME www.abc.net.au.edgesuite.net.
www.abc.net.au.edgesuite.net. 21581 IN CNAME a1632.g.akamai.net.
a1632.g.akamai.net. 2 IN A 63.150.131.41
a1632.g.akamai.net. 2 IN A 63.150.131.33
;; Query time: 161 msec
;; SERVER: 8.8.8.8#53(8.8.8.8)
;; WHEN: Sun Jul 3 00:37:00 2011
;; MSG SIZE rcvd: 135
</code></pre>
<p>And using TPG&#x27;s DNS servers (203.12.160.35)</p>
<pre><code>; &lt;&lt;&gt;&gt; DiG 9.6.0-APPLE-P2 &lt;&lt;&gt;&gt; www.abc.net.au @203.12.160.35
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 11673
;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 0
;; QUESTION SECTION:
;www.abc.net.au. IN A
;; ANSWER SECTION:
www.abc.net.au. 523 IN CNAME www.abc.net.au.edgesuite.net.
www.abc.net.au.edgesuite.net. 12274 IN CNAME a1632.g.akamai.net.
a1632.g.akamai.net. 10 IN A 202.7.177.66
a1632.g.akamai.net. 10 IN A 202.7.177.83
;; Query time: 29 msec
;; SERVER: 203.12.160.35#53(203.12.160.35)
;; WHEN: Sun JulÂ  3 00:38:20 2011
;; MSG SIZEÂ  rcvd: 135
</code></pre>
<p>So there we go, hosted in Sydney Australia.. So how does the traceroute compare?</p>
<pre><code>macshell:~ scott$ traceroute www.abc.net.au
traceroute: Warning: www.abc.net.au has multiple addresses; using 202.7.177.83
traceroute to a1632.g.akamai.net (202.7.177.83), 64 hops max, 52 byte packets
1Â  10.1.1.254 (10.1.1.254)Â  1.711 msÂ  1.134 msÂ  1.100 ms
2Â  * * *
3Â  202.7.173.17 (202.7.173.17)Â  27.047 msÂ  26.072 msÂ  26.502 ms
4Â  syd-sot-ken-ak2-83.tpgi.com.au (202.7.177.83)Â  26.540 msÂ  26.835 msÂ  26.540 ms
</code></pre>
<p>Different nameservers can be set up to resolve to different addresses based on geographic positioning, in more of a first in bestÂ dressedÂ kind of effort. Â So if you&#x27;re using Google DNS servers (8.8.8.8), it so happens that because this is in America (check out their IP address, CA), then I started getting update servers and the like on DNS that were closest in latency terms to America then Sydney Australia.
Simply by changing from Google DNS servers to my ISP&#x27;s, I get healthierÂ latency, and am no longer sending traffic over saturated overseas links. Â So how does this compare with ABC iView?</p></div></div></article></div></div></div><script src="/_next/static/chunks/webpack-6a94f4f450a79057.js" async=""></script><script src="/_next/static/chunks/fd9d1056-f562485b1666a0a3.js" async=""></script><script src="/_next/static/chunks/596-5b64dbf019a905f5.js" async=""></script><script src="/_next/static/chunks/main-app-c71b577ad5f96a17.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/8a1e8ec2da824aa2.css\",{\"as\":\"style\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/media/2aaf0723e720e8b9-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n4:HL[\"/_next/static/media/42e58f5a516ebb1b-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n5:HL[\"/_next/static/media/4e8dfc5aa8742fdc-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n6:HL[\"/_next/static/css/c2c1ea965511607d.css\",{\"as\":\"style\"}]\n7:HL[\"/_next/static/media/8679c800f1e60000-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n8:HL[\"/_next/static/media/af1939b13935fec8-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n9:HL["])</script><script>self.__next_f.push([1,"\"/_next/static/css/e1665b43251c86eb.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"a:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-6a94f4f450a79057.js\",\"971:static/chunks/fd9d1056-f562485b1666a0a3.js\",\"596:static/chunks/596-5b64dbf019a905f5.js\"],\"name\":\"default\",\"async\":false}\nc:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-6a94f4f450a79057.js\",\"971:static/chunks/fd9d1056-f562485b1666a0a3.js\",\"596:static/chunks/596-5b64dbf019a905f5.js\"],\"name\":\"GlobalError\",\"async\":false}\nd:I{\"id\":7767,\"chunks\":[\"272:static/chunks/webpack-6a94f4f450a79057.js\",\"971:static/chunks/fd9d1056-f562485b1666"])</script><script>self.__next_f.push([1,"a0a3.js\",\"596:static/chunks/596-5b64dbf019a905f5.js\"],\"name\":\"default\",\"async\":false}\ne:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpack-6a94f4f450a79057.js\",\"971:static/chunks/fd9d1056-f562485b1666a0a3.js\",\"596:static/chunks/596-5b64dbf019a905f5.js\"],\"name\":\"default\",\"async\":false}\nf:I{\"id\":6685,\"chunks\":[\"685:static/chunks/685-a0750907e0c935bc.js\",\"222:static/chunks/222-0c303d3189115893.js\",\"982:static/chunks/982-07d375c9d37b134d.js\",\"46:static/chunks/app/(navbar)/(margined)/page-6e97965ff90afede.js\"],\"na"])</script><script>self.__next_f.push([1,"me\":\"\",\"async\":false}\n10:I{\"id\":2179,\"chunks\":[\"724:static/chunks/358ff52d-5af8921f222f7c20.js\",\"122:static/chunks/e416a3ff-be1b889799c50168.js\",\"447:static/chunks/00cbbcb7-5522c112e5f40d45.js\",\"685:static/chunks/685-a0750907e0c935bc.js\",\"713:static/chunks/app/(navbar)/layout-e1a28f5172e21563.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/8a1e8ec2da824aa2.css\",\"precedence\":\"next\"}]],[\"$\",\"$La\",null,{\"buildId\":\"qM5d7cw-vDbPGZohIedvu\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/post/2011/dns-performance/\",\"initialTree\":[\"\",{\"children\":[\"(navbar)\",{\"children\":[\"(margined)\",{\"children\":[\"post\",{\"children\":[[\"slug\",\"2011/dns-performance\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"2011\\\",\\\"dns-performance\\\"]}\",{}]}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$Lb\",\"globalErrorComponent\":\"$c\",\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[[\"$\",\"body\",null,{\"className\":\"__className_20951f\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex max-w-full w-full flex-col pt-8 pb-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"self-center w-full\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-center text-4xl __className_31da3a\",\"children\":[\"$\",\"$Lf\",null,{\"href\":\"/\",\"children\":\"Scott O'Brien\"}]}],[\"$\",\"$L10\",null,{}]]}],[\"$\",\"div\",null,{\"className\":\"w-full flex flex-col\",\"id\":\"main-content\",\"children\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(navbar)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[[\"$\",\"div\",null,{\"className\":\"self-center mt-7 max-w-2xl w-[80%]\",\"children\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(navbar)\",\"children\",\"(margined)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(navbar)\",\"children\",\"(margined)\",\"children\",\"post\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(navbar)\",\"children\",\"(margined)\",\"children\",\"post\",\"children\",[\"slug\",\"2011/dns-performance\",\"c\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$L11\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":[\\\"2011\\\",\\\"dns-performance\\\"]}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/e1665b43251c86eb.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"slug\",\"2011/dns-performance\",\"c\"]},\"styles\":[]}],\"segment\":\"post\"},\"styles\":[]}]}],null],\"segment\":\"(margined)\"},\"styles\":[]}]}]]}]}],null],\"segment\":\"(navbar)\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c2c1ea965511607d.css\",\"precedence\":\"next\"}]]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Scott O'Brien\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"My online creative outlet\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"12:I{\"id\":8248,\"chunks\":[\"222:static/chunks/222-0c303d3189115893.js\",\"982:static/chunks/982-07d375c9d37b134d.js\",\"344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-dd011dba93e6ca3b.js\"],\"name\":\"\",\"async\":false}\n13:I{\"id\":9098,\"chunks\":[\"222:static/chunks/222-0c303d3189115893.js\",\"982:static/chunks/982-07d375c9d37b134d.js\",\"344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-dd011dba93e6ca3b.js\"],\"name\":\"\",\"async\":false}\n14:T206e,"])</script><script>self.__next_f.push([1,"var Component=(()=\u003e{var l=Object.create;var a=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var p=(n,e)=\u003e()=\u003e(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=\u003e{for(var o in e)a(n,o,{get:e[o],enumerable:!0})},r=(n,e,o,i)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let s of g(e))!w.call(n,s)\u0026\u0026s!==o\u0026\u0026a(n,s,{get:()=\u003ee[s],enumerable:!(i=m(e,s))||i.enumerable});return n};var k=(n,e,o)=\u003e(o=n!=null?l(u(n)):{},r(e||!n||!n.__esModule?a(o,\"default\",{value:n,enumerable:!0}):o,n)),I=n=\u003er(a({},\"__esModule\",{value:!0}),n);var h=p((E,c)=\u003e{c.exports=_jsx_runtime});var S={};f(S,{default:()=\u003eN,frontmatter:()=\u003eb});var t=k(h()),b={title:\"What\\u2019s the harm in Google DNS? Performance!\",author:\"scottyob\",type:\"post\",date:new Date(1309617605e3),url:\"/2011/07/02/whats-the-harm-in-google-dns-performance/\",categories:[\"nerd\"],tags:[\"DNS\",\"IP\",\"routing\"]};function d(n){let e=Object.assign({p:\"p\",a:\"a\",ul:\"ul\",li:\"li\",pre:\"pre\",code:\"code\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:\"**EDIT:**It looks like Google has recently starting peering in more places in AU with an anycast solution that fixes these issues.\"}),`\n`,(0,t.jsx)(e.p,{children:`On a little side note to the tutorial series I've been writing up lately for building a ZFS fileserver. This one is about Why Google DNS is bad for your performance (well, depending on where you live)\nA real quick run down, we all know what DNS does yeah? It translates domains like www.scottyob.com into IP addresses like 112.140.183.97. A DNS server has a job of translating these domain names to the IP addresses we can use.`}),`\n`,`\n`,(0,t.jsxs)(e.p,{children:[\"Now, when it comes to Google DNS, if you believe in the propaganda \",(0,t.jsx)(e.a,{href:\"http://code.google.com/speed/public-dns/\",children:\"http://code.google.com/speed/public-dns/\"}),\" where Google DNS is said to\"]}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"http://code.google.com/speed/public-dns/docs/performance.html\",children:\"Speed up your browsing experience\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"http://code.google.com/speed/public-dns/docs/security.html\",children:\"Improve your Security.\"})}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:\"What google doesn't tell you is that it interferes with DNS servers that might try and give you a server that's close to your home. I've been using Google DNS for months here at home, but only just have I decided against using it, and I'll run through exactly what causes some performance issues.\"}),`\n`,(0,t.jsx)(e.p,{children:\"I was trying to watch a program on iView on TPG's internet connection. Now, TPG don't have the best international links on peak times, so I first started getting frustrated at them for not letting me watch my iView program with buffer lags on my 8Mbit plan. I checked my Signal to Noise ratio and dropped packets, etc.. it was fine. I checked the bandwith going out on my ppp interface on the router to see if I was maxing out the net connection at home, but nope, that was fine too, so the problem must have been with TPG.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Looking at what was going on, I did a little traceroute to www.abc.net.au\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:`traceroute: Warning: www.abc.net.au has multiple addresses; using 125.252.224.73\ntraceroute to a1632.g.akamai.net (125.252.224.73), 64 hops max, 52 byte packets\n1 10.1.1.254 (10.1.1.254) 1.919 ms 1.260 ms 1.202 ms\n2 * * *\n3 202.7.173.17 (202.7.173.17) 27.056 ms 26.317 ms 26.693 ms\n4 syd-sot-ken-crt1-ge-5-1-0.tpgi.com.au (202.7.162.173) 26.283 ms 26.884 ms 26.100 ms\n5 ix-11-1-0-507.tcore2.tv2-tokyo.as6453.net (116.0.88.21) 153.325 ms 135.736 ms 126.568 ms\n6 if-14-0-0-1720.core1.tv2-tokyo.as6453.net (209.58.61.121) 1481.461 ms\nif-1-0-0-1715.core1.tv2-tokyo.as6453.net (209.58.61.125) 298.270 ms\nif-14-0-0-1720.core1.tv2-tokyo.as6453.net (209.58.61.121) 282.141 ms\n7 if-10-0-0-981.core3.hk2-hongkong.as6453.net (116.0.82.85) 208.232 ms\nif-5-0-0.core3.hk2-hongkong.as6453.net (116.0.82.1) 199.170 ms\nif-10-0-0-981.core3.hk2-hongkong.as6453.net (116.0.82.85) 206.027 ms\n8 vlan31.icore1.hk2-hongkong.as6453.net (116.0.82.18) 219.937 ms 204.963 ms 196.273 ms\n9 80.150.169.25 (80.150.169.25) 333.519 ms 306.138 ms 307.031 ms\n10 80.156.224.6 (80.156.224.6) 358.402 ms 320.029 ms 349.133 ms\n11 a125-252-224-73.deploy.akamaitechnologies.com (125.252.224.73) 332.188 ms 331.008 ms 314.833 ms\n`})}),`\n`,(0,t.jsxs)(e.p,{children:[`Looking at this traceroute, the first thing I thought was \\u201CWhy on earth is ABC hosting it's website in hongkong (or so the traffic has to go via hongkong.)? Immediately reject ABC would do this and I blame TPG's stupid routing decisions.\nLooking at the IP address further `,(0,t.jsx)(e.a,{href:\"http://www.dnsstuff.com/tools/ipall/?tool_id=67\u0026token=\u0026toolhandler_redirect=0\u0026ip=125.252.224.73\",children:\"http://www.dnsstuff.com/tools/ipall/?tool_id=67\u0026token=\u0026toolhandler_redirect=0\u0026ip=125.252.224.73\"}),\" It looks like it's hosted in Singapore, and some googling shows akamaitechnologies is the web host for ABC.. ok, so what is going on here?\"]}),`\n`,(0,t.jsx)(e.p,{children:\"then I did a little DIGging around on the ABC domain and check this out.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Using Google DNS (8.8.8.8, hosted in America):\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:`; \u003c\u003c\u003e\u003e DiG 9.6.0-APPLE-P2 \u003c\u003c\u003e\u003e www.abc.net.au @8.8.8.8\n;; global options: +cmd\n;; Got answer:\n;; -\u003e\u003eHEADER\u003c\u003c- opcode: QUERY, status: NOERROR, id: 16084\n;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 0\n;; QUESTION SECTION:\n;www.abc.net.au. IN A\n;; ANSWER SECTION:\nwww.abc.net.au. 882 IN CNAME www.abc.net.au.edgesuite.net.\nwww.abc.net.au.edgesuite.net. 21581 IN CNAME a1632.g.akamai.net.\na1632.g.akamai.net. 2 IN A 63.150.131.41\na1632.g.akamai.net. 2 IN A 63.150.131.33\n;; Query time: 161 msec\n;; SERVER: 8.8.8.8#53(8.8.8.8)\n;; WHEN: Sun Jul 3 00:37:00 2011\n;; MSG SIZE rcvd: 135\n`})}),`\n`,(0,t.jsx)(e.p,{children:\"And using TPG's DNS servers (203.12.160.35)\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:`; \u003c\u003c\u003e\u003e DiG 9.6.0-APPLE-P2 \u003c\u003c\u003e\u003e www.abc.net.au @203.12.160.35\n;; global options: +cmd\n;; Got answer:\n;; -\u003e\u003eHEADER\u003c\u003c- opcode: QUERY, status: NOERROR, id: 11673\n;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 0\n;; QUESTION SECTION:\n;www.abc.net.au. IN A\n;; ANSWER SECTION:\nwww.abc.net.au. 523 IN CNAME www.abc.net.au.edgesuite.net.\nwww.abc.net.au.edgesuite.net. 12274 IN CNAME a1632.g.akamai.net.\na1632.g.akamai.net. 10 IN A 202.7.177.66\na1632.g.akamai.net. 10 IN A 202.7.177.83\n;; Query time: 29 msec\n;; SERVER: 203.12.160.35#53(203.12.160.35)\n;; WHEN: Sun Jul\\xA0 3 00:38:20 2011\n;; MSG SIZE\\xA0 rcvd: 135\n`})}),`\n`,(0,t.jsx)(e.p,{children:\"So there we go, hosted in Sydney Australia.. So how does the traceroute compare?\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:`macshell:~ scott$ traceroute www.abc.net.au\ntraceroute: Warning: www.abc.net.au has multiple addresses; using 202.7.177.83\ntraceroute to a1632.g.akamai.net (202.7.177.83), 64 hops max, 52 byte packets\n1\\xA0 10.1.1.254 (10.1.1.254)\\xA0 1.711 ms\\xA0 1.134 ms\\xA0 1.100 ms\n2\\xA0 * * *\n3\\xA0 202.7.173.17 (202.7.173.17)\\xA0 27.047 ms\\xA0 26.072 ms\\xA0 26.502 ms\n4\\xA0 syd-sot-ken-ak2-83.tpgi.com.au (202.7.177.83)\\xA0 26.540 ms\\xA0 26.835 ms\\xA0 26.540 ms\n`})}),`\n`,(0,t.jsx)(e.p,{children:`Different nameservers can be set up to resolve to different addresses based on geographic positioning, in more of a first in best\\xA0dressed\\xA0kind of effort. \\xA0So if you're using Google DNS servers (8.8.8.8), it so happens that because this is in America (check out their IP address, CA), then I started getting update servers and the like on DNS that were closest in latency terms to America then Sydney Australia.\nSimply by changing from Google DNS servers to my ISP's, I get healthier\\xA0latency, and am no longer sending traffic over saturated overseas links. \\xA0So how does this compare with ABC iView?`})]})}function y(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(d,n)})):d(n)}var N=y;return I(S);})();\n;return Component;"])</script><script>self.__next_f.push([1,"11:[\"$\",\"article\",null,{\"className\":\"\",\"children\":[\"$\",\"div\",null,{\"className\":\"__className_12746b mb-9\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"__className_df02b7 text-2xl\",\"children\":\"Whatâ€™s the harm in Google DNS? Performance!\"}],[\"$\",\"div\",null,{\"className\":\"text-xs text-gray-400 italic mb-5\",\"children\":[\"Created: \",[\"$\",\"$L12\",null,{\"date\":\"$D2011-07-02T14:40:05.000Z\"}]]}],\"$undefined\",[\"$\",\"div\",null,{\"className\":\"prose lg:prose-lg\",\"children\":[\"$\",\"$L13\",null,{\"code\":\"$14\"}]}]]}]}]\n"])</script></body></html>