1:HL["/_next/static/css/70a6988bfc142772.css",{"as":"style"}]
0:["aQlZSs9CDQ5o1878iGuKG",[[["",{"children":["(navbar)",{"children":["(margined)",{"children":["post",{"children":[["slug","2022-12-28-mini-cnc","c"],{"children":["__PAGE__?{\"slug\":[\"2022-12-28-mini-cnc\"]}",{}]}]}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/70a6988bfc142772.css","precedence":"next"}]],"$L3"]]]]
4:HL["/_next/static/media/42e58f5a516ebb1b-s.p.woff2",{"as":"font","type":"font/woff2"}]
5:HL["/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2",{"as":"font","type":"font/woff2"}]
6:HL["/_next/static/media/d45575ed0ad4f563-s.p.woff2",{"as":"font","type":"font/woff2"}]
7:HL["/_next/static/css/d699b3284dd0f0c8.css",{"as":"style"}]
8:HL["/_next/static/media/8679c800f1e60000-s.p.woff2",{"as":"font","type":"font/woff2"}]
9:HL["/_next/static/media/af1939b13935fec8-s.p.woff2",{"as":"font","type":"font/woff2"}]
a:HL["/_next/static/css/e1665b43251c86eb.css",{"as":"style"}]
b:I{"id":7767,"chunks":["272:static/chunks/webpack-c0d6ce99d471eac9.js","971:static/chunks/fd9d1056-f562485b1666a0a3.js","596:static/chunks/596-5b64dbf019a905f5.js"],"name":"default","async":false}
c:I{"id":7920,"chunks":["272:static/chunks/webpack-c0d6ce99d471eac9.js","971:static/chunks/fd9d1056-f562485b1666a0a3.js","596:static/chunks/596-5b64dbf019a905f5.js"],"name":"default","async":false}
d:I{"id":6685,"chunks":["685:static/chunks/685-a0750907e0c935bc.js","222:static/chunks/222-0c303d3189115893.js","982:static/chunks/982-07d375c9d37b134d.js","46:static/chunks/app/(navbar)/(margined)/page-4623163d6cd3c237.js"],"name":"","async":false}
e:I{"id":2179,"chunks":["724:static/chunks/358ff52d-5af8921f222f7c20.js","122:static/chunks/e416a3ff-be1b889799c50168.js","447:static/chunks/00cbbcb7-5522c112e5f40d45.js","685:static/chunks/685-a0750907e0c935bc.js","713:static/chunks/app/(navbar)/layout-53648850bb136a0a.js"],"name":"","async":false}
2:[["$","html",null,{"lang":"en","children":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":[["$","body",null,{"className":"__className_e66fe9","children":["$","div",null,{"className":"flex max-w-full w-full flex-col pt-8 pb-8","children":[["$","div",null,{"className":"self-center w-full","children":[["$","h1",null,{"className":"text-center text-4xl __className_31da3a","children":["$","$Ld",null,{"href":"/","children":"Scott O'Brien"}]}],["$","$Le",null,{}]]}],["$","div",null,{"className":"w-full flex flex-col","id":"main-content","children":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":[["$","div",null,{"className":"self-center mt-7 max-w-2xl w-[80%]","children":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children","(margined)","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children","(margined)","children","post","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children","(margined)","children","post","children",["slug","2022-12-28-mini-cnc","c"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Lf",null],"segment":"__PAGE__?{\"slug\":[\"2022-12-28-mini-cnc\"]}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/e1665b43251c86eb.css","precedence":"next"}]]}],"segment":["slug","2022-12-28-mini-cnc","c"]},"styles":[]}],"segment":"post"},"styles":[]}]}],null],"segment":"(margined)"},"styles":[]}]}]]}]}],null],"segment":"(navbar)"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/d699b3284dd0f0c8.css","precedence":"next"}]]}]}],null]
3:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Scott O'Brien"}],["$","meta","2",{"name":"description","content":"My online creative outlet"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}],["$","meta","5",{"name":"next-size-adjust"}]]
10:I{"id":8248,"chunks":["222:static/chunks/222-0c303d3189115893.js","982:static/chunks/982-07d375c9d37b134d.js","344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-a0f72aa7860b7ab0.js"],"name":"","async":false}
11:I{"id":3222,"chunks":["222:static/chunks/222-0c303d3189115893.js","982:static/chunks/982-07d375c9d37b134d.js","344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-a0f72aa7860b7ab0.js"],"name":"Image","async":false}
12:I{"id":9098,"chunks":["222:static/chunks/222-0c303d3189115893.js","982:static/chunks/982-07d375c9d37b134d.js","344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-a0f72aa7860b7ab0.js"],"name":"","async":false}
13:T28d7,var Component=(()=>{var C=Object.create;var m=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var c=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports),b=(e,o)=>{for(var i in o)m(e,i,{get:o[i],enumerable:!0})},l=(e,o,i,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let t of S(o))!U.call(e,t)&&t!==i&&m(e,t,{get:()=>o[t],enumerable:!(n=A(o,t))||n.enumerable});return e};var Z=(e,o,i)=>(i=e!=null?C(T(e)):{},l(o||!e||!e.__esModule?m(i,"default",{value:e,enumerable:!0}):i,e)),N=e=>l(m({},"__esModule",{value:!0}),e);var P=c((me,y)=>{y.exports=_jsx_runtime});var I=c((Oe,K)=>{K.exports=React});var w=c((he,W)=>{"use strict";var J="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";W.exports=J});var G=c((de,$)=>{"use strict";var L=w();function M(){}function v(){}v.resetWarningCache=M;$.exports=function(){function e(n,t,x,Q,u,s){if(s!==L){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}e.isRequired=e;function o(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:o,element:e,elementType:e,instanceOf:o,node:e,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:v,resetWarningCache:M};return i.PropTypes=i,i}});var F=c((le,j)=>{j.exports=G()();var ge,pe});var H=c((Ze,q)=>{q.exports=D;function D(e,o){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,o&&(n.onload=function(){n.onerror=n.onload=null,o(null,n)},n.onerror=function(){n.onerror=n.onload=null,o(new Error("Failed to load "+e),n)}),i.appendChild(n)}});var V=c(d=>{"use strict";Object.defineProperty(d,"__esModule",{value:!0});var ee=I(),ye=F(),oe=H();function te(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function ie(e){if(e&&e.__esModule)return e;var o=Object.create(null);return e&&Object.keys(e).forEach(function(i){if(i!=="default"){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(o,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}}),o.default=e,Object.freeze(o)}var R=ie(ee),ne=te(oe);function Ee(e,o){e.prototype=Object.create(o.prototype),e.prototype.constructor=e,h(e,o)}function h(e,o){return h=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},h(e,o)}function _(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Qe=["onReady","onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError","onApiChange"];function xe(){return new Promise(function(e,o){if(typeof window.YT=="object"&&typeof window.YT.ready=="function"){window.YT.ready(function(){e(window.YT)});return}ne.default("https://www.youtube.com/iframe_api",function(i){i?o(i):window.YT.ready(function(){e(window.YT)})})})}var O=null;function se(){return O||(O=xe()),O}var X=function(e){Ee(o,e);function o(n){var t;return t=e.call(this,n)||this,t.onPlayerReady=t.onPlayerReady.bind(_(t)),t.onPlayerStateChange=t.onPlayerStateChange.bind(_(t)),t.refContainer=t.refContainer.bind(_(t)),t}var i=o.prototype;return i.componentDidMount=function(){this.createPlayer()},i.componentDidUpdate=function(t){var x=this,Q=Object.keys(this.props).filter(function(u){return x.props[u]!==t[u]});this.updateProps(Q)},i.componentWillUnmount=function(){this.playerInstance&&this.playerInstance.destroy()},i.onPlayerReady=function(t){var x=this.props,Q=x.volume,u=x.muted,s=x.suggestedQuality,r=x.playbackRate;typeof Q!="undefined"&&t.target.setVolume(Q*100),typeof u!="undefined"&&(u?t.target.mute():t.target.unMute()),typeof s!="undefined"&&t.target.setPlaybackQuality(s),typeof r!="undefined"&&t.target.setPlaybackRate(r),this.resolvePlayer(t.target)},i.onPlayerStateChange=function(t){var x=this.props,Q=x.onCued,u=x.onBuffering,s=x.onPause,r=x.onPlaying,a=x.onEnd,k=YT.PlayerState;switch(t.data){case k.CUED:Q(t);break;case k.BUFFERING:u(t);break;case k.PAUSED:s(t);break;case k.PLAYING:r(t);break;case k.ENDED:a(t);break}},i.getPlayerParameters=function(){return{autoplay:this.props.autoplay,cc_load_policy:this.props.showCaptions?1:0,controls:this.props.controls?1:0,disablekb:this.props.disableKeyboard?1:0,fs:this.props.allowFullscreen?1:0,hl:this.props.lang,iv_load_policy:this.props.annotations?1:3,start:this.props.startSeconds,end:this.props.endSeconds,modestbranding:this.props.modestBranding?1:0,playsinline:this.props.playsInline?1:0,rel:this.props.showRelatedVideos?1:0}},i.getInitialOptions=function(){return{videoId:this.props.video,width:this.props.width,height:this.props.height,playerVars:this.getPlayerParameters(),events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange}}},i.updateProps=function(t){var x=this;this.player.then(function(Q){t.forEach(function(u){var s=x.props[u];switch(u){case"muted":s?Q.mute():Q.unMute();break;case"suggestedQuality":Q.setPlaybackQuality(s);break;case"volume":Q.setVolume(s*100);break;case"paused":s&&Q.getPlayerState()!==2?Q.pauseVideo():!s&&Q.getPlayerState()===2&&Q.playVideo();break;case"id":case"className":case"width":case"height":Q.getIframe()[u]=s;break;case"video":if(!s)Q.stopVideo();else{var r=x.props,a=r.startSeconds,k=r.endSeconds,z=r.autoplay,p={videoId:s,startSeconds:a||0,endSeconds:k};z?Q.loadVideoById(p):Q.cueVideoById(p)}break}})})},i.createPlayer=function(){var t=this,x=this.props.volume;this.player=se().then(function(Q){return new Promise(function(u){t.resolvePlayer=u;var s=new Q.Player(t.container,t.getInitialOptions());t.playerInstance=s,Qe.forEach(function(r){s.addEventListener(r,function(a){var k=t.props[r];k&&k(a)})})})}),typeof x=="number"&&this.updateProps(["volume"])},i.refContainer=function(t){this.container=t},i.render=function(){var t=this.props,x=t.id,Q=t.className,u=t.style;return R.createElement("div",{id:x,className:Q,style:u,ref:this.refContainer})},o}(R.Component);X.defaultProps={autoplay:!1,showCaptions:!1,controls:!0,disableKeyboard:!1,allowFullscreen:!0,annotations:!0,modestBranding:!1,playsInline:!1,showRelatedVideos:!0,onCued:function(){},onBuffering:function(){},onPlaying:function(){},onPause:function(){},onEnd:function(){}};d.default=X});var ce={};b(ce,{default:()=>ke,frontmatter:()=>ue});var E=Z(P());var f="/posts/2022-12-28-mini-cnc/chatgpt-KDVBV4AQ.jpg";var g=Z(V()),ue={title:"mini-cnc",type:"post",author:"scottyob",date:new Date(16721856e5),url:"/post/mini-cnc/",categories:["hardware"],tags:["opencv","ios","arkit"],hero:"logo.jpg"};function Y(e){let o=Object.assign({p:"p",a:"a",h2:"h2",img:"img",h3:"h3",ul:"ul",li:"li",pre:"pre",code:"code"},e.components);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(o.p,{children:["After ",(0,E.jsx)(o.a,{href:"/post/ardupilot-postmortem/",children:"crashing my RC Plane"})," I decided to experiment with the flight controller using the cheapest possible RC planes I could build."]}),`
`,(0,E.jsxs)(o.p,{children:["I bought foam board from Dollar Tree.  Having the free designs from Flite Test (I\u2019m using their ",(0,E.jsx)(o.a,{href:"https://www.flitetest.com/articles/diy-ft-simple-cub-build",children:"Simple Cub"}),"), it quickly became apparent that printing out the designs, cutting, lining them up, gluing, cutting takes hours and hours to cut out a design."]}),`
`,`
`,(0,E.jsx)(o.p,{children:"I want a CNC machine to do either laser cutting or sawing to save this time.  I don\u2019t have very much space in my apartment though.  The goal of this project is to design and build a \u201Cmini CNC\u201D machine, that can be used to work on a much larger surface by subdividing it into many smaller jobs.  For this to work, we\u2019ll place the small CNC machine on the larger surface, then have a way of measuring the position and orientation relative to the much larger surface."}),`
`,(0,E.jsx)(o.h2,{children:"Options"}),`
`,(0,E.jsx)(o.p,{children:"When it comes to measuring position, there are a few options.  ChatGPT says:"}),`
`,(0,E.jsx)(o.p,{children:(0,E.jsx)(o.img,{alt:"Chat GPT",src:f})}),`
`,(0,E.jsx)(o.p,{children:"My goal is to attempt to do this with just a Vision System:"}),`
`,(0,E.jsx)(g.default,{width:"100%",height:"400px",video:"kP53Sx1OHHE"}),`
`,(0,E.jsx)(o.h3,{children:"Computer Vision with OpenCV"}),`
`,(0,E.jsx)(o.p,{children:"My hope was that I could use OpenCV\u2019s ArUco markers to perform the vision system measurement.  Although calibrating the camera with a lot more images helped a great deal, I found that the median measurement was off by 1.7cm.  Far, far too great for this project to work."}),`
`,(0,E.jsxs)(o.ul,{children:[`
`,(0,E.jsx)(o.li,{children:(0,E.jsx)(o.a,{href:"https://gist.github.com/scottyob/25eb62f75cab4d118e297b93f7f9acfe",children:"Calibrate Script"})}),`
`,(0,E.jsx)(o.li,{children:(0,E.jsx)(o.a,{href:"https://gist.github.com/scottyob/331027d9f06431d32395281d47b5f27b",children:"Measure Script"})}),`
`]}),`
`,(0,E.jsx)(g.default,{width:"100%",height:"400px",video:"r8fBJO7SEhI"}),`
`,(0,E.jsx)(o.p,{children:"After taking a heap of frames from the camera, the distance was terribly inaccurate."}),`
`,(0,E.jsx)(o.p,{children:"It could be because of the continuity camera, but I found the median was off.  50.8cm should be the correct measurement, however, the results speak for themselves."}),`
`,(0,E.jsx)(o.pre,{children:(0,E.jsx)(o.code,{children:`           length
count  239.000000
mean    52.604118
std      2.077757
min     46.797939
25%     51.159442
50%     52.506212
75%     53.816030
max     60.835761
`})}),`
`,(0,E.jsx)(o.h3,{children:"ARKit."}),`
`,(0,E.jsx)(o.p,{children:"The second experiment, is going to be using a modern iPhone using ARKit.  This has a number of advantages, as, we should be able to use the advanced Vision System to find the location, and the Inertial Measurement IMU with the point cloud tracking or whatever other magic they do to be able to find better measurements.  Hopefully this will yield more accurate results.  It will be expensive, but hopefully using phones that a lot of the population has on hand now."}),`
`,(0,E.jsx)(o.p,{children:"Stay tuned for how this performs!"})]})}function re(e={}){let{wrapper:o}=e.components||{};return o?(0,E.jsx)(o,Object.assign({},e,{children:(0,E.jsx)(Y,e)})):Y(e)}var ke=re;return N(ce);})();
;return Component;f:["$","article",null,{"className":"","children":["$","div",null,{"className":"__className_12746b mb-9","children":[["$","h2",null,{"className":"__className_df02b7 text-2xl","children":"mini-cnc"}],["$","div",null,{"className":"text-xs text-gray-400 italic mb-5","children":["Created: ",["$","$L10",null,{"date":"$D2022-12-28T00:00:00.000Z"}]]}],["$","$L11",null,{"src":{"src":"/_next/static/media/logo.2921d5b0.jpg","height":1040,"width":1116,"blurDataURL":"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAHAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAfEAABAwMFAAAAAAAAAAAAAAABAAIDBBITBREhMXH/xAAUAQEAAAAAAAAAAAAAAAAAAAAD/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQACIf/aAAwDAQACEQMRAD8AokeqQx1rWXHI1+PYA8i/v1ERNoOR5W//2Q==","blurWidth":8,"blurHeight":7},"alt":"Post picture","className":"m-auto mb-5"}],["$","div",null,{"className":"prose lg:prose-lg","children":["$","$L12",null,{"code":"$13"}]}]]}]}]
