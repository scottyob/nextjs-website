<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/2aaf0723e720e8b9-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/42e58f5a516ebb1b-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/4e8dfc5aa8742fdc-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/8679c800f1e60000-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/d2c70a2e5d6bd385-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/0d26c7c4f71e78d1.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/386fa29998ac6a74.css" data-precedence="next"/><title>Scott O&#x27;Brien</title><meta name="description" content="My online creative outlet"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_0ec1f4"><div class="flex max-w-full w-full flex-col pt-8 pb-8"><div class="self-center w-full"><h1 class="text-center text-4xl __className_baad2a"><a href="/">Scott O&#x27;Brien</a></h1><ul class="flex flex-wrap justify-center space-x-2 text-gray-400 italic pt-3 mb-8 max-w-2xl w-[80%] m-auto __className_6cf34a"><li class="transition group duration-300 whitespace-nowrap"><a href="/">Writings/Projects</a><span class="block group-hover:max-w-[70%] ml-2 transition-all duration-500 h-0.5 max-w-[70%] bg-orange-500"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/about/">About</a><span class="block group-hover:max-w-[70%] ml-2 transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/bucketlist/">Bucket List</a><span class="block group-hover:max-w-[70%] ml-2 transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/recipes/">Cooking</a><span class="block group-hover:max-w-[70%] ml-2 transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/flying/">Flying</a><span class="block group-hover:max-w-[70%] ml-2 transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li></ul></div><div class="w-full flex flex-col" id="main-content"><div class="self-center mt-7 max-w-2xl w-[80%]"><article class=""><div class="__className_af3318 mb-9"><h2 class="__className_59b087 text-2xl">mini-cnc</h2><div class="text-xs text-gray-400 italic mb-5">Created: <span>12/28/2022, 12:00:00 AM</span></div><img alt="Post picture" loading="lazy" width="1116" height="1040" decoding="async" data-nimg="1" class="m-auto mb-5" style="color:transparent" src="/_next/static/media/logo.2921d5b0.jpg"/><div class="prose lg:prose-lg"><p>After <a href="/post/ardupilot-postmortem/">crashing my RC Plane</a> I decided to experiment with the flight controller using the cheapest possible RC planes I could build.</p>
<p>I bought foam board from Dollar Tree.  Having the free designs from Flite Test (I’m using their <a href="https://www.flitetest.com/articles/diy-ft-simple-cub-build">Simple Cub</a>), it quickly became apparent that printing out the designs, cutting, lining them up, gluing, cutting takes hours and hours to cut out a design.</p>
<!-- -->
<p>I want a CNC machine to do either laser cutting or sawing to save this time.  I don’t have very much space in my apartment though.  The goal of this project is to design and build a “mini CNC” machine, that can be used to work on a much larger surface by subdividing it into many smaller jobs.  For this to work, we’ll place the small CNC machine on the larger surface, then have a way of measuring the position and orientation relative to the much larger surface.</p>
<h2>Options</h2>
<p>When it comes to measuring position, there are a few options.  ChatGPT says:</p>
<p><img alt="Chat GPT" src="/posts/2022-12-28-mini-cnc/chatgpt-KDVBV4AQ.jpg"/></p>
<p>My goal is to attempt to do this with just a Vision System:</p>
<div></div>
<h3>Computer Vision with OpenCV</h3>
<p>My hope was that I could use OpenCV’s ArUco markers to perform the vision system measurement.  Although calibrating the camera with a lot more images helped a great deal, I found that the median measurement was off by 1.7cm.  Far, far too great for this project to work.</p>
<ul>
<li><a href="https://gist.github.com/scottyob/25eb62f75cab4d118e297b93f7f9acfe">Calibrate Script</a></li>
<li><a href="https://gist.github.com/scottyob/331027d9f06431d32395281d47b5f27b">Measure Script</a></li>
</ul>
<div></div>
<p>After taking a heap of frames from the camera, the distance was terribly inaccurate.</p>
<p>It could be because of the continuity camera, but I found the median was off.  50.8cm should be the correct measurement, however, the results speak for themselves.</p>
<pre><code>           length
count  239.000000
mean    52.604118
std      2.077757
min     46.797939
25%     51.159442
50%     52.506212
75%     53.816030
max     60.835761
</code></pre>
<h3>ARKit.</h3>
<p>The second experiment, is going to be using a modern iPhone using ARKit.  This has a number of advantages, as, we should be able to use the advanced Vision System to find the location, and the Inertial Measurement IMU with the point cloud tracking or whatever other magic they do to be able to find better measurements.  Hopefully this will yield more accurate results.  It will be expensive, but hopefully using phones that a lot of the population has on hand now.</p>
<p>Stay tuned for how this performs!</p></div></div></article></div></div></div><script src="/_next/static/chunks/webpack-6854f8b189d0947c.js" async=""></script><script src="/_next/static/chunks/bce60fc1-e7cb3874f5f47943.js" async=""></script><script src="/_next/static/chunks/769-64fef319af2abb40.js" async=""></script><script src="/_next/static/chunks/main-app-7c73dbeff8b74fd8.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/2aaf0723e720e8b9-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/42e58f5a516ebb1b-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/media/4e8dfc5aa8742fdc-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n4:HL[\"/_next/static/css/0d26c7c4f71e78d1.css\",{\"as\":\"style\"}]\n0:\"$L5\"\n"])</script><script>self.__next_f.push([1,"6:HL[\"/_next/static/media/8679c800f1e60000-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n7:HL[\"/_next/static/media/d2c70a2e5d6bd385-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n8:HL[\"/_next/static/css/386fa29998ac6a74.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"9:I{\"id\":\"8802\",\"chunks\":[\"272:static/chunks/webpack-6854f8b189d0947c.js\",\"253:static/chunks/bce60fc1-e7cb3874f5f47943.js\",\"769:static/chunks/769-64fef319af2abb40.js\"],\"name\":\"\",\"async\":false}\nb:I{\"id\":\"4299\",\"chunks\":[\"272:static/chunks/webpack-6854f8b189d0947c.js\",\"253:static/chunks/bce60fc1-e7cb3874f5f47943.js\",\"769:static/chunks/769-64fef319af2abb40.js\"],\"name\":\"\",\"async\":false}\nc:I{\"id\":\"7477\",\"chunks\":[\"477:static/chunks/477-6554af05b281746c.js\",\"153:static/chunks/153-7f7061897db69601.js\",\"651:static/"])</script><script>self.__next_f.push([1,"chunks/651-05a1ce4efc0860d4.js\",\"534:static/chunks/app/flying/location/[slug]/page-65be048863d8522d.js\"],\"name\":\"\",\"async\":false}\nd:I{\"id\":\"5212\",\"chunks\":[\"477:static/chunks/477-6554af05b281746c.js\",\"185:static/chunks/app/layout-9d8f06291be9ea84.js\"],\"name\":\"\",\"async\":false}\nf:I{\"id\":\"3211\",\"chunks\":[\"272:static/chunks/webpack-6854f8b189d0947c.js\",\"253:static/chunks/bce60fc1-e7cb3874f5f47943.js\",\"769:static/chunks/769-64fef319af2abb40.js\"],\"name\":\"\",\"async\":false}\n10:I{\"id\":\"5767\",\"chunks\":[\"272:static/chu"])</script><script>self.__next_f.push([1,"nks/webpack-6854f8b189d0947c.js\",\"253:static/chunks/bce60fc1-e7cb3874f5f47943.js\",\"769:static/chunks/769-64fef319af2abb40.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"5:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0d26c7c4f71e78d1.css\",\"precedence\":\"next\"}]],[\"$\",\"$L9\",null,{\"buildId\":\"7bnD85EgJ3cUdh6-mHFZs\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/post/2022-12-28-mini-cnc/\",\"initialTree\":[\"\",{\"children\":[\"(margined)\",{\"children\":[\"post\",{\"children\":[[\"slug\",\"2022-12-28-mini-cnc\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"2022-12-28-mini-cnc\\\"]}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$La\",[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\"}]],\"globalErrorComponent\":\"$b\",\"notFound\":[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_0ec1f4\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex max-w-full w-full flex-col pt-8 pb-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"self-center w-full\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-center text-4xl __className_baad2a\",\"children\":[\"$\",\"$Lc\",null,{\"href\":\"/\",\"children\":\"Scott O'Brien\"}]}],[\"$\",\"$Ld\",null,{}]]}],[\"$\",\"div\",null,{\"className\":\"w-full flex flex-col\",\"id\":\"main-content\",\"children\":[\"$Le\",\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}]]}]}]}],\"asNotFound\":false,\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_0ec1f4\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex max-w-full w-full flex-col pt-8 pb-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"self-center w-full\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-center text-4xl __className_baad2a\",\"children\":[\"$\",\"$Lc\",null,{\"href\":\"/\",\"children\":\"Scott O'Brien\"}]}],[\"$\",\"$Ld\",null,{}]]}],[\"$\",\"div\",null,{\"className\":\"w-full flex flex-col\",\"id\":\"main-content\",\"children\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[[\"$\",\"div\",null,{\"className\":\"self-center mt-7 max-w-2xl w-[80%]\",\"children\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(margined)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(margined)\",\"children\",\"post\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(margined)\",\"children\",\"post\",\"children\",[\"slug\",\"2022-12-28-mini-cnc\",\"c\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$L11\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":[\\\"2022-12-28-mini-cnc\\\"]}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/386fa29998ac6a74.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"slug\",\"2022-12-28-mini-cnc\",\"c\"]},\"styles\":[]}],\"segment\":\"post\"},\"styles\":[]}]}],null],\"segment\":\"(margined)\"},\"styles\":[]}]}]]}]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\na:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Scott O'Brien\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"My online creative outlet\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}]]\n"])</script><script>self.__next_f.push([1,"12:I{\"id\":\"9114\",\"chunks\":[\"962:static/chunks/962-226f429e9782fad0.js\",\"726:static/chunks/app/(margined)/post/[...slug]/page-063ddffa9c53bc9d.js\"],\"name\":\"\",\"async\":false}\n13:I{\"id\":\"5962\",\"chunks\":[\"962:static/chunks/962-226f429e9782fad0.js\",\"417:static/chunks/app/(margined)/recipes/[slug]/page-0f3a983e02aad0ce.js\"],\"name\":\"\",\"async\":false}\n14:I{\"id\":\"5470\",\"chunks\":[\"91:static/chunks/app/flying/flight/[slug]/page-5440ec33784e9466.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"11:[\"$\",\"article\",null,{\"className\":\"\",\"children\":[\"$\",\"div\",null,{\"className\":\"__className_af3318 mb-9\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"__className_59b087 text-2xl\",\"children\":\"mini-cnc\"}],[\"$\",\"div\",null,{\"className\":\"text-xs text-gray-400 italic mb-5\",\"children\":[\"Created: \",[\"$\",\"$L12\",null,{\"date\":\"$D2022-12-28T00:00:00.000Z\"}]]}],[\"$\",\"$L13\",null,{\"src\":{\"src\":\"/_next/static/media/logo.2921d5b0.jpg\",\"height\":1040,\"width\":1116,\"blurDataURL\":\"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAHAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAfEAABAwMFAAAAAAAAAAAAAAABAAIDBBITBREhMXH/xAAUAQEAAAAAAAAAAAAAAAAAAAAD/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQACIf/aAAwDAQACEQMRAD8AokeqQx1rWXHI1+PYA8i/v1ERNoOR5W//2Q==\",\"blurWidth\":8,\"blurHeight\":7},\"alt\":\"Post picture\",\"className\":\"m-auto mb-5\"}],[\"$\",\"div\",null,{\"className\":\"prose lg:prose-lg\",\"children\":[\"$\",\"$L14\",null,{\"code\":\"var Component=(()=\u003e{var C=Object.create;var m=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var c=(e,o)=\u003e()=\u003e(o||e((o={exports:{}}).exports,o),o.exports),b=(e,o)=\u003e{for(var i in o)m(e,i,{get:o[i],enumerable:!0})},l=(e,o,i,n)=\u003e{if(o\u0026\u0026typeof o==\\\"object\\\"||typeof o==\\\"function\\\")for(let t of S(o))!U.call(e,t)\u0026\u0026t!==i\u0026\u0026m(e,t,{get:()=\u003eo[t],enumerable:!(n=A(o,t))||n.enumerable});return e};var Z=(e,o,i)=\u003e(i=e!=null?C(T(e)):{},l(o||!e||!e.__esModule?m(i,\\\"default\\\",{value:e,enumerable:!0}):i,e)),N=e=\u003el(m({},\\\"__esModule\\\",{value:!0}),e);var P=c((me,y)=\u003e{y.exports=_jsx_runtime});var I=c((Oe,K)=\u003e{K.exports=React});var w=c((he,W)=\u003e{\\\"use strict\\\";var J=\\\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\\\";W.exports=J});var G=c((de,$)=\u003e{\\\"use strict\\\";var L=w();function M(){}function v(){}v.resetWarningCache=M;$.exports=function(){function e(n,t,x,Q,u,s){if(s!==L){var r=new Error(\\\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\\\");throw r.name=\\\"Invariant Violation\\\",r}}e.isRequired=e;function o(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:o,element:e,elementType:e,instanceOf:o,node:e,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:v,resetWarningCache:M};return i.PropTypes=i,i}});var F=c((le,j)=\u003e{j.exports=G()();var ge,pe});var H=c((Ze,q)=\u003e{q.exports=D;function D(e,o){var i=document.head||document.getElementsByTagName(\\\"head\\\")[0],n=document.createElement(\\\"script\\\");n.type=\\\"text/javascript\\\",n.async=!0,n.src=e,o\u0026\u0026(n.onload=function(){n.onerror=n.onload=null,o(null,n)},n.onerror=function(){n.onerror=n.onload=null,o(new Error(\\\"Failed to load \\\"+e),n)}),i.appendChild(n)}});var V=c(d=\u003e{\\\"use strict\\\";Object.defineProperty(d,\\\"__esModule\\\",{value:!0});var ee=I(),ye=F(),oe=H();function te(e){return e\u0026\u0026typeof e==\\\"object\\\"\u0026\u0026\\\"default\\\"in e?e:{default:e}}function ie(e){if(e\u0026\u0026e.__esModule)return e;var o=Object.create(null);return e\u0026\u0026Object.keys(e).forEach(function(i){if(i!==\\\"default\\\"){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(o,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}}),o.default=e,Object.freeze(o)}var R=ie(ee),ne=te(oe);function Ee(e,o){e.prototype=Object.create(o.prototype),e.prototype.constructor=e,h(e,o)}function h(e,o){return h=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},h(e,o)}function _(e){if(e===void 0)throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\");return e}var Qe=[\\\"onReady\\\",\\\"onStateChange\\\",\\\"onPlaybackQualityChange\\\",\\\"onPlaybackRateChange\\\",\\\"onError\\\",\\\"onApiChange\\\"];function xe(){return new Promise(function(e,o){if(typeof window.YT==\\\"object\\\"\u0026\u0026typeof window.YT.ready==\\\"function\\\"){window.YT.ready(function(){e(window.YT)});return}ne.default(\\\"https://www.youtube.com/iframe_api\\\",function(i){i?o(i):window.YT.ready(function(){e(window.YT)})})})}var O=null;function se(){return O||(O=xe()),O}var X=function(e){Ee(o,e);function o(n){var t;return t=e.call(this,n)||this,t.onPlayerReady=t.onPlayerReady.bind(_(t)),t.onPlayerStateChange=t.onPlayerStateChange.bind(_(t)),t.refContainer=t.refContainer.bind(_(t)),t}var i=o.prototype;return i.componentDidMount=function(){this.createPlayer()},i.componentDidUpdate=function(t){var x=this,Q=Object.keys(this.props).filter(function(u){return x.props[u]!==t[u]});this.updateProps(Q)},i.componentWillUnmount=function(){this.playerInstance\u0026\u0026this.playerInstance.destroy()},i.onPlayerReady=function(t){var x=this.props,Q=x.volume,u=x.muted,s=x.suggestedQuality,r=x.playbackRate;typeof Q!=\\\"undefined\\\"\u0026\u0026t.target.setVolume(Q*100),typeof u!=\\\"undefined\\\"\u0026\u0026(u?t.target.mute():t.target.unMute()),typeof s!=\\\"undefined\\\"\u0026\u0026t.target.setPlaybackQuality(s),typeof r!=\\\"undefined\\\"\u0026\u0026t.target.setPlaybackRate(r),this.resolvePlayer(t.target)},i.onPlayerStateChange=function(t){var x=this.props,Q=x.onCued,u=x.onBuffering,s=x.onPause,r=x.onPlaying,a=x.onEnd,k=YT.PlayerState;switch(t.data){case k.CUED:Q(t);break;case k.BUFFERING:u(t);break;case k.PAUSED:s(t);break;case k.PLAYING:r(t);break;case k.ENDED:a(t);break}},i.getPlayerParameters=function(){return{autoplay:this.props.autoplay,cc_load_policy:this.props.showCaptions?1:0,controls:this.props.controls?1:0,disablekb:this.props.disableKeyboard?1:0,fs:this.props.allowFullscreen?1:0,hl:this.props.lang,iv_load_policy:this.props.annotations?1:3,start:this.props.startSeconds,end:this.props.endSeconds,modestbranding:this.props.modestBranding?1:0,playsinline:this.props.playsInline?1:0,rel:this.props.showRelatedVideos?1:0}},i.getInitialOptions=function(){return{videoId:this.props.video,width:this.props.width,height:this.props.height,playerVars:this.getPlayerParameters(),events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange}}},i.updateProps=function(t){var x=this;this.player.then(function(Q){t.forEach(function(u){var s=x.props[u];switch(u){case\\\"muted\\\":s?Q.mute():Q.unMute();break;case\\\"suggestedQuality\\\":Q.setPlaybackQuality(s);break;case\\\"volume\\\":Q.setVolume(s*100);break;case\\\"paused\\\":s\u0026\u0026Q.getPlayerState()!==2?Q.pauseVideo():!s\u0026\u0026Q.getPlayerState()===2\u0026\u0026Q.playVideo();break;case\\\"id\\\":case\\\"className\\\":case\\\"width\\\":case\\\"height\\\":Q.getIframe()[u]=s;break;case\\\"video\\\":if(!s)Q.stopVideo();else{var r=x.props,a=r.startSeconds,k=r.endSeconds,z=r.autoplay,p={videoId:s,startSeconds:a||0,endSeconds:k};z?Q.loadVideoById(p):Q.cueVideoById(p)}break}})})},i.createPlayer=function(){var t=this,x=this.props.volume;this.player=se().then(function(Q){return new Promise(function(u){t.resolvePlayer=u;var s=new Q.Player(t.container,t.getInitialOptions());t.playerInstance=s,Qe.forEach(function(r){s.addEventListener(r,function(a){var k=t.props[r];k\u0026\u0026k(a)})})})}),typeof x==\\\"number\\\"\u0026\u0026this.updateProps([\\\"volume\\\"])},i.refContainer=function(t){this.container=t},i.render=function(){var t=this.props,x=t.id,Q=t.className,u=t.style;return R.createElement(\\\"div\\\",{id:x,className:Q,style:u,ref:this.refContainer})},o}(R.Component);X.defaultProps={autoplay:!1,showCaptions:!1,controls:!0,disableKeyboard:!1,allowFullscreen:!0,annotations:!0,modestBranding:!1,playsInline:!1,showRelatedVideos:!0,onCued:function(){},onBuffering:function(){},onPlaying:function(){},onPause:function(){},onEnd:function(){}};d.default=X});var ce={};b(ce,{default:()=\u003eke,frontmatter:()=\u003eue});var E=Z(P());var f=\\\"/posts/2022-12-28-mini-cnc/chatgpt-KDVBV4AQ.jpg\\\";var g=Z(V()),ue={title:\\\"mini-cnc\\\",type:\\\"post\\\",author:\\\"scottyob\\\",date:new Date(16721856e5),url:\\\"/post/mini-cnc/\\\",categories:[\\\"hardware\\\"],tags:[\\\"opencv\\\",\\\"ios\\\",\\\"arkit\\\"],hero:\\\"logo.jpg\\\"};function Y(e){let o=Object.assign({p:\\\"p\\\",a:\\\"a\\\",h2:\\\"h2\\\",img:\\\"img\\\",h3:\\\"h3\\\",ul:\\\"ul\\\",li:\\\"li\\\",pre:\\\"pre\\\",code:\\\"code\\\"},e.components);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(o.p,{children:[\\\"After \\\",(0,E.jsx)(o.a,{href:\\\"/post/ardupilot-postmortem/\\\",children:\\\"crashing my RC Plane\\\"}),\\\" I decided to experiment with the flight controller using the cheapest possible RC planes I could build.\\\"]}),`\\n`,(0,E.jsxs)(o.p,{children:[\\\"I bought foam board from Dollar Tree.  Having the free designs from Flite Test (I\\\\u2019m using their \\\",(0,E.jsx)(o.a,{href:\\\"https://www.flitetest.com/articles/diy-ft-simple-cub-build\\\",children:\\\"Simple Cub\\\"}),\\\"), it quickly became apparent that printing out the designs, cutting, lining them up, gluing, cutting takes hours and hours to cut out a design.\\\"]}),`\\n`,`\\n`,(0,E.jsx)(o.p,{children:\\\"I want a CNC machine to do either laser cutting or sawing to save this time.  I don\\\\u2019t have very much space in my apartment though.  The goal of this project is to design and build a \\\\u201Cmini CNC\\\\u201D machine, that can be used to work on a much larger surface by subdividing it into many smaller jobs.  For this to work, we\\\\u2019ll place the small CNC machine on the larger surface, then have a way of measuring the position and orientation relative to the much larger surface.\\\"}),`\\n`,(0,E.jsx)(o.h2,{children:\\\"Options\\\"}),`\\n`,(0,E.jsx)(o.p,{children:\\\"When it comes to measuring position, there are a few options.  ChatGPT says:\\\"}),`\\n`,(0,E.jsx)(o.p,{children:(0,E.jsx)(o.img,{alt:\\\"Chat GPT\\\",src:f})}),`\\n`,(0,E.jsx)(o.p,{children:\\\"My goal is to attempt to do this with just a Vision System:\\\"}),`\\n`,(0,E.jsx)(g.default,{width:\\\"100%\\\",height:\\\"400px\\\",video:\\\"kP53Sx1OHHE\\\"}),`\\n`,(0,E.jsx)(o.h3,{children:\\\"Computer Vision with OpenCV\\\"}),`\\n`,(0,E.jsx)(o.p,{children:\\\"My hope was that I could use OpenCV\\\\u2019s ArUco markers to perform the vision system measurement.  Although calibrating the camera with a lot more images helped a great deal, I found that the median measurement was off by 1.7cm.  Far, far too great for this project to work.\\\"}),`\\n`,(0,E.jsxs)(o.ul,{children:[`\\n`,(0,E.jsx)(o.li,{children:(0,E.jsx)(o.a,{href:\\\"https://gist.github.com/scottyob/25eb62f75cab4d118e297b93f7f9acfe\\\",children:\\\"Calibrate Script\\\"})}),`\\n`,(0,E.jsx)(o.li,{children:(0,E.jsx)(o.a,{href:\\\"https://gist.github.com/scottyob/331027d9f06431d32395281d47b5f27b\\\",children:\\\"Measure Script\\\"})}),`\\n`]}),`\\n`,(0,E.jsx)(g.default,{width:\\\"100%\\\",height:\\\"400px\\\",video:\\\"r8fBJO7SEhI\\\"}),`\\n`,(0,E.jsx)(o.p,{children:\\\"After taking a heap of frames from the camera, the distance was terribly inaccurate.\\\"}),`\\n`,(0,E.jsx)(o.p,{children:\\\"It could be because of the continuity camera, but I found the median was off.  50.8cm should be the correct measurement, however, the results speak for themselves.\\\"}),`\\n`,(0,E.jsx)(o.pre,{children:(0,E.jsx)(o.code,{children:`           length\\ncount  239.000000\\nmean    52.604118\\nstd      2.077757\\nmin     46.797939\\n25%     51.159442\\n50%     52.506212\\n75%     53.816030\\nmax     60.835761\\n`})}),`\\n`,(0,E.jsx)(o.h3,{children:\\\"ARKit.\\\"}),`\\n`,(0,E.jsx)(o.p,{children:\\\"The second experiment, is going to be using a modern iPhone using ARKit.  This has a number of advantages, as, we should be able to use the advanced Vision System to find the location, and the Inertial Measurement IMU with the point cloud tracking or whatever other magic they do to be able to find better measurements.  Hopefully this will yield more accurate results.  It will be expensive, but hopefully using phones that a lot of the population has on hand now.\\\"}),`\\n`,(0,E.jsx)(o.p,{children:\\\"Stay tuned for how this performs!\\\"})]})}function re(e={}){let{wrapper:o}=e.components||{};return o?(0,E.jsx)(o,Object.assign({},e,{children:(0,E.jsx)(Y,e)})):Y(e)}var ke=re;return N(ce);})();\\n;return Component;\"}]}]]}]}]\n"])</script></body></html>