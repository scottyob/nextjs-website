<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/2aaf0723e720e8b9-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/42e58f5a516ebb1b-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/4e8dfc5aa8742fdc-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/8679c800f1e60000-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/d2c70a2e5d6bd385-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/0d26c7c4f71e78d1.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/386fa29998ac6a74.css" data-precedence="next"/><title>Scott O&#x27;Brien</title><meta name="description" content="My online creative outlet"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_0ec1f4"><div class="flex max-w-full w-full flex-col pt-8 pb-8"><div class="self-center w-full"><h1 class="text-center text-4xl __className_baad2a"><a href="/">Scott O&#x27;Brien</a></h1><ul class="flex flex-wrap justify-center space-x-2 text-gray-400 italic pt-3 mb-8 max-w-2xl w-[80%] m-auto __className_6cf34a"><li class="transition group duration-300 whitespace-nowrap"><a href="/">Writings/Projects</a><span class="block group-hover:max-w-[70%] ml-2 transition-all duration-500 h-0.5 max-w-[70%] bg-orange-500"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/about/">About</a><span class="block group-hover:max-w-[70%] ml-2 transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/bucketlist/">Bucket List</a><span class="block group-hover:max-w-[70%] ml-2 transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/recipes/">Cooking</a><span class="block group-hover:max-w-[70%] ml-2 transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li><li class="transition group duration-300 whitespace-nowrap"><a href="/flying/">Flying</a><span class="block group-hover:max-w-[70%] ml-2 transition-all duration-500 h-0.5 max-w-0 bg-orange-50 group-hover:bg-orange-400"></span></li></ul></div><div class="w-full flex flex-col" id="main-content"><div class="self-center mt-7 max-w-2xl w-[80%]"><article class=""><div class="__className_af3318 mb-9"><h2 class="__className_59b087 text-2xl">throttling guest internet on Apple Airport Extreme</h2><div class="text-xs text-gray-400 italic mb-5">Created: <span>12/18/2013, 1:09:03 PM</span></div><img alt="Post picture" loading="lazy" width="1632" height="1224" decoding="async" data-nimg="1" class="m-auto mb-5" style="color:transparent" src="/_next/static/media/photo-1.c580ffbb.jpg"/><div class="prose lg:prose-lg"><p>I&#x27;ve been happily running my Apple Airport Extreme as m home router for the past few years (since my debian router died, and I&#x27;ve been too lazy to replace it).  One of the cool features was the ability to create a guest network (SSID) to access the internet without being able to access your trusted network.  One feature I wanted was the ability to throttle the speed guests can access the internet at.  While I couldn&#x27;t do this with the Airport Extreme alone, Add a Juniper SRX100 into the mix that the awesome <a href="http://cooperlees.com">Cooper Lees</a> gave me into the mix and problem solved.</p>
<!-- -->
<img src="/posts/2013/guest-bandwidth/apple-airport-extreme-base-station_1-FVP6JT7X.jpg"/>
<img src="/posts/2013/guest-bandwidth/photo-1-YWAP7O3P.jpg"/>
<p>SRX100, signed by the #1 Juniper Engineer</p>
<img src="/posts/2013/guest-bandwidth/AirPort-Utility1-VA53CA5C.jpg"/>
<img src="/posts/2013/guest-bandwidth/AirPort-Utility-2-RGYATMED.jpg"/>
<p>In not so many words, performing these actions will do a number of things.  The gig ethernet switch on the back of the airport will be bridged with the WAN port.  Any traffic from your normal SSID(s) and switchports will be sent out the WAN port <em>untagged.</em>  Traffic from your guest network will be sent .1q tagged with vlan 1003.</p>
<p>I popped this into fe-0/0/1 on my SRX100 and the following config works the magic.</p>
<pre><code>[interfaces]
    fe-0/0/1 {
        unit 0 {
            family ethernet-switching {
                port-mode trunk;
                vlan {
                    members vlan-guest;
                }
                native-vlan-id 3;
            }
        }
    }

    vlan {
        unit 0 {
            family inet {
                address 10.0.1.1/24;
            }
        }
        unit 1003 {
            family inet {
                filter {
                    input limit_guest_upload;
                    output limit_guest_download;
                }
                address 10.0.2.1/24;
            }
        }
    }

[system services]
        dhcp {
            pool 10.0.1.0/24 {
                address-range low 10.0.1.2 high 10.0.1.199;
                router {
                    10.0.1.1;
                }
            }
            pool 10.0.2.0/24 {
                address-range low 10.0.2.2 high 10.0.2.254;
                router {
                    10.0.2.1;
                }
            }
            propagate-settings fe-0/0/0.0;
        }

[security]
    nat {
        source {
            rule-set private-to-internet {
                from zone [ guest trust ];
                to zone untrust;
                rule source-nat-rule {
                    match {
                        source-address 0.0.0.0/0;
                    }
                    then {
                        source-nat {
                            interface;
                        }
                    }
                }
            }
        }
    }
    policies {
        from-zone trust to-zone untrust {
            policy trust-to-untrust {
                match {
                    source-address any;
                    destination-address any;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
        from-zone guest to-zone untrust {
            policy guest-to-internet {
                description &quot;Allows guest access to internet&quot;;
                match {
                    source-address any;
                    destination-address any;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
    }

[security zones]
        security-zone guest {
            host-inbound-traffic {
                system-services {
                    dns;
                    ping;
                    traceroute;
                }
            }
            interfaces {
                vlan.1003;
            }
        }

firewall {
    policer guest-shaping {
        if-exceeding {
            bandwidth-limit 500k;
            burst-size-limit 300k;
        }
        then discard;
    }
    filter limit_guest_download {
        term guest-shaping {
            then {
                policer guest-shaping;
                accept;
            }
        }
    }
    filter limit_guest_upload {
        term guest-shaping {
            then {
                policer guest-shaping;
                accept;
            }
        }
    }
}
vlans {
    vlan-guest {
        vlan-id 1003;
        l3-interface vlan.1003;
    }
    vlan-trust {
        vlan-id 3;
        l3-interface vlan.0;
    }
}

</code></pre>
<p>And there you have it! A really simple way of limiting the bandwidth of guest users on your network using the power of Junos with an Airport Extreme!</p>
<p> </p>
<img src="/posts/2013/guest-bandwidth/photo-2-27AVX5IY.png"/></div></div></article></div></div></div><script src="/_next/static/chunks/webpack-6854f8b189d0947c.js" async=""></script><script src="/_next/static/chunks/bce60fc1-e7cb3874f5f47943.js" async=""></script><script src="/_next/static/chunks/769-64fef319af2abb40.js" async=""></script><script src="/_next/static/chunks/main-app-7c73dbeff8b74fd8.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/2aaf0723e720e8b9-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/42e58f5a516ebb1b-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/media/4e8dfc5aa8742fdc-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n4:HL[\"/_next/static/css/0d26c7c4f71e78d1.css\",{\"as\":\"style\"}]\n0:\"$L5\"\n"])</script><script>self.__next_f.push([1,"6:HL[\"/_next/static/media/8679c800f1e60000-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n7:HL[\"/_next/static/media/d2c70a2e5d6bd385-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n8:HL[\"/_next/static/css/386fa29998ac6a74.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"9:I{\"id\":\"8802\",\"chunks\":[\"272:static/chunks/webpack-6854f8b189d0947c.js\",\"253:static/chunks/bce60fc1-e7cb3874f5f47943.js\",\"769:static/chunks/769-64fef319af2abb40.js\"],\"name\":\"\",\"async\":false}\nb:I{\"id\":\"4299\",\"chunks\":[\"272:static/chunks/webpack-6854f8b189d0947c.js\",\"253:static/chunks/bce60fc1-e7cb3874f5f47943.js\",\"769:static/chunks/769-64fef319af2abb40.js\"],\"name\":\"\",\"async\":false}\nc:I{\"id\":\"7477\",\"chunks\":[\"477:static/chunks/477-6554af05b281746c.js\",\"153:static/chunks/153-7f7061897db69601.js\",\"651:static/"])</script><script>self.__next_f.push([1,"chunks/651-05a1ce4efc0860d4.js\",\"534:static/chunks/app/flying/location/[slug]/page-65be048863d8522d.js\"],\"name\":\"\",\"async\":false}\nd:I{\"id\":\"5212\",\"chunks\":[\"477:static/chunks/477-6554af05b281746c.js\",\"185:static/chunks/app/layout-9d8f06291be9ea84.js\"],\"name\":\"\",\"async\":false}\nf:I{\"id\":\"3211\",\"chunks\":[\"272:static/chunks/webpack-6854f8b189d0947c.js\",\"253:static/chunks/bce60fc1-e7cb3874f5f47943.js\",\"769:static/chunks/769-64fef319af2abb40.js\"],\"name\":\"\",\"async\":false}\n10:I{\"id\":\"5767\",\"chunks\":[\"272:static/chu"])</script><script>self.__next_f.push([1,"nks/webpack-6854f8b189d0947c.js\",\"253:static/chunks/bce60fc1-e7cb3874f5f47943.js\",\"769:static/chunks/769-64fef319af2abb40.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"5:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0d26c7c4f71e78d1.css\",\"precedence\":\"next\"}]],[\"$\",\"$L9\",null,{\"buildId\":\"7bnD85EgJ3cUdh6-mHFZs\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/post/2013/guest-bandwidth/\",\"initialTree\":[\"\",{\"children\":[\"(margined)\",{\"children\":[\"post\",{\"children\":[[\"slug\",\"2013/guest-bandwidth\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"2013\\\",\\\"guest-bandwidth\\\"]}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$La\",[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\"}]],\"globalErrorComponent\":\"$b\",\"notFound\":[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_0ec1f4\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex max-w-full w-full flex-col pt-8 pb-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"self-center w-full\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-center text-4xl __className_baad2a\",\"children\":[\"$\",\"$Lc\",null,{\"href\":\"/\",\"children\":\"Scott O'Brien\"}]}],[\"$\",\"$Ld\",null,{}]]}],[\"$\",\"div\",null,{\"className\":\"w-full flex flex-col\",\"id\":\"main-content\",\"children\":[\"$Le\",\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}]]}]}]}],\"asNotFound\":false,\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_0ec1f4\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex max-w-full w-full flex-col pt-8 pb-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"self-center w-full\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-center text-4xl __className_baad2a\",\"children\":[\"$\",\"$Lc\",null,{\"href\":\"/\",\"children\":\"Scott O'Brien\"}]}],[\"$\",\"$Ld\",null,{}]]}],[\"$\",\"div\",null,{\"className\":\"w-full flex flex-col\",\"id\":\"main-content\",\"children\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[[\"$\",\"div\",null,{\"className\":\"self-center mt-7 max-w-2xl w-[80%]\",\"children\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(margined)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(margined)\",\"children\",\"post\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(margined)\",\"children\",\"post\",\"children\",[\"slug\",\"2013/guest-bandwidth\",\"c\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$L11\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":[\\\"2013\\\",\\\"guest-bandwidth\\\"]}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/386fa29998ac6a74.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"slug\",\"2013/guest-bandwidth\",\"c\"]},\"styles\":[]}],\"segment\":\"post\"},\"styles\":[]}]}],null],\"segment\":\"(margined)\"},\"styles\":[]}]}]]}]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\na:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Scott O'Brien\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"My online creative outlet\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}]]\n"])</script><script>self.__next_f.push([1,"12:I{\"id\":\"9114\",\"chunks\":[\"962:static/chunks/962-226f429e9782fad0.js\",\"726:static/chunks/app/(margined)/post/[...slug]/page-063ddffa9c53bc9d.js\"],\"name\":\"\",\"async\":false}\n13:I{\"id\":\"5962\",\"chunks\":[\"962:static/chunks/962-226f429e9782fad0.js\",\"417:static/chunks/app/(margined)/recipes/[slug]/page-0f3a983e02aad0ce.js\"],\"name\":\"\",\"async\":false}\n14:I{\"id\":\"5470\",\"chunks\":[\"91:static/chunks/app/flying/flight/[slug]/page-5440ec33784e9466.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"11:[\"$\",\"article\",null,{\"className\":\"\",\"children\":[\"$\",\"div\",null,{\"className\":\"__className_af3318 mb-9\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"__className_59b087 text-2xl\",\"children\":\"throttling guest internet on Apple Airport Extreme\"}],[\"$\",\"div\",null,{\"className\":\"text-xs text-gray-400 italic mb-5\",\"children\":[\"Created: \",[\"$\",\"$L12\",null,{\"date\":\"$D2013-12-18T13:09:03.000Z\"}]]}],[\"$\",\"$L13\",null,{\"src\":{\"src\":\"/_next/static/media/photo-1.c580ffbb.jpg\",\"height\":1224,\"width\":1632,\"blurDataURL\":\"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAGAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAP/xAAeEAABBQACAwAAAAAAAAAAAAABAAIDBREEBiExQf/EABQBAQAAAAAAAAAAAAAAAAAAAAX/xAAaEQACAwEBAAAAAAAAAAAAAAACAwABEUFR/9oADAMBAAIRAxEAPwCJt7ux7FFWz8lhn47tZINazDmktH3x6RER7WENDQ+RFagLdrs//9k=\",\"blurWidth\":8,\"blurHeight\":6},\"alt\":\"Post picture\",\"className\":\"m-auto mb-5\"}],[\"$\",\"div\",null,{\"className\":\"prose lg:prose-lg\",\"children\":[\"$\",\"$L14\",null,{\"code\":\"var Component=(()=\u003e{var x=Object.create;var g=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var r=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var V=(s,$)=\u003e()=\u003e($||s(($={exports:{}}).exports,$),$.exports),H=(s,$)=\u003e{for(var c in $)g(s,c,{get:$[c],enumerable:!0})},F=(s,$,c,n)=\u003e{if($\u0026\u0026typeof $==\\\"object\\\"||typeof $==\\\"function\\\")for(let y of m($))!w.call(s,y)\u0026\u0026y!==c\u0026\u0026g(s,y,{get:()=\u003e$[y],enumerable:!(n=p($,y))||n.enumerable});return s};var e=(s,$,c)=\u003e(c=s!=null?x(r(s)):{},F($||!s||!s.__esModule?g(c,\\\"default\\\",{value:s,enumerable:!0}):c,s)),i=s=\u003eF(g({},\\\"__esModule\\\",{value:!0}),s);var O=V((E,_)=\u003e{_.exports=_jsx_runtime});var h={};H(h,{default:()=\u003el,frontmatter:()=\u003eZ});var q=e(O());var z=\\\"/posts/2013/guest-bandwidth/apple-airport-extreme-base-station_1-FVP6JT7X.jpg\\\";var G=\\\"/posts/2013/guest-bandwidth/photo-1-YWAP7O3P.jpg\\\";var I=\\\"/posts/2013/guest-bandwidth/photo-2-27AVX5IY.png\\\";var k=\\\"/posts/2013/guest-bandwidth/AirPort-Utility1-VA53CA5C.jpg\\\";var W=\\\"/posts/2013/guest-bandwidth/AirPort-Utility-2-RGYATMED.jpg\\\";var Z={title:\\\"throttling guest internet on Apple Airport Extreme\\\",author:\\\"scottyob\\\",type:\\\"post\\\",date:new Date(1387372143e3),url:\\\"/2013/12/18/throttling-guest-internet-on-apple-airport-extreme/\\\",categories:[\\\"Uncategorized\\\"],hero:\\\"photo-1.jpg\\\"};function X(s){let $=Object.assign({p:\\\"p\\\",a:\\\"a\\\",em:\\\"em\\\",pre:\\\"pre\\\",code:\\\"code\\\"},s.components);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)($.p,{children:[\\\"I've been happily running my Apple Airport Extreme as m home router for the past few years (since my debian router died, and I've been too lazy to replace it). \\\\xA0One of the cool features was the ability to create a guest network (SSID) to access the internet without being able to access your trusted network. \\\\xA0One feature I wanted was the ability to throttle the speed guests can access the internet at. \\\\xA0While I couldn't do this with the Airport Extreme alone, Add a Juniper SRX100 into the mix that the awesome \\\",(0,q.jsx)($.a,{href:\\\"http://cooperlees.com\\\",children:\\\"Cooper Lees\\\"}),\\\"\\\\xA0gave me into the mix and problem solved.\\\"]}),`\\n`,`\\n`,(0,q.jsx)(\\\"img\\\",{src:z}),`\\n`,(0,q.jsx)(\\\"img\\\",{src:G}),`\\n`,(0,q.jsx)($.p,{children:\\\"SRX100, signed by the #1 Juniper Engineer\\\"}),`\\n`,(0,q.jsx)(\\\"img\\\",{src:k}),`\\n`,(0,q.jsx)(\\\"img\\\",{src:W}),`\\n`,(0,q.jsxs)($.p,{children:[\\\"In not so many words, performing these actions will do a number of things. \\\\xA0The gig ethernet switch on the back of the airport will be bridged with the WAN port. \\\\xA0Any traffic from your normal SSID(s) and switchports will be sent out the WAN port \\\",(0,q.jsx)($.em,{children:\\\"untagged.\\\"}),\\\" \\\\xA0Traffic from your guest network will be sent .1q tagged with vlan 1003.\\\"]}),`\\n`,(0,q.jsx)($.p,{children:\\\"I popped this into fe-0/0/1 on my SRX100 and the following config works the magic.\\\"}),`\\n`,(0,q.jsx)($.pre,{children:(0,q.jsx)($.code,{children:`[interfaces]\\n    fe-0/0/1 {\\n        unit 0 {\\n            family ethernet-switching {\\n                port-mode trunk;\\n                vlan {\\n                    members vlan-guest;\\n                }\\n                native-vlan-id 3;\\n            }\\n        }\\n    }\\n\\n    vlan {\\n        unit 0 {\\n            family inet {\\n                address 10.0.1.1/24;\\n            }\\n        }\\n        unit 1003 {\\n            family inet {\\n                filter {\\n                    input limit_guest_upload;\\n                    output limit_guest_download;\\n                }\\n                address 10.0.2.1/24;\\n            }\\n        }\\n    }\\n\\n[system services]\\n        dhcp {\\n            pool 10.0.1.0/24 {\\n                address-range low 10.0.1.2 high 10.0.1.199;\\n                router {\\n                    10.0.1.1;\\n                }\\n            }\\n            pool 10.0.2.0/24 {\\n                address-range low 10.0.2.2 high 10.0.2.254;\\n                router {\\n                    10.0.2.1;\\n                }\\n            }\\n            propagate-settings fe-0/0/0.0;\\n        }\\n\\n[security]\\n    nat {\\n        source {\\n            rule-set private-to-internet {\\n                from zone [ guest trust ];\\n                to zone untrust;\\n                rule source-nat-rule {\\n                    match {\\n                        source-address 0.0.0.0/0;\\n                    }\\n                    then {\\n                        source-nat {\\n                            interface;\\n                        }\\n                    }\\n                }\\n            }\\n        }\\n    }\\n    policies {\\n        from-zone trust to-zone untrust {\\n            policy trust-to-untrust {\\n                match {\\n                    source-address any;\\n                    destination-address any;\\n                    application any;\\n                }\\n                then {\\n                    permit;\\n                }\\n            }\\n        }\\n        from-zone guest to-zone untrust {\\n            policy guest-to-internet {\\n                description \\\"Allows guest access to internet\\\";\\n                match {\\n                    source-address any;\\n                    destination-address any;\\n                    application any;\\n                }\\n                then {\\n                    permit;\\n                }\\n            }\\n        }\\n    }\\n\\n[security zones]\\n        security-zone guest {\\n            host-inbound-traffic {\\n                system-services {\\n                    dns;\\n                    ping;\\n                    traceroute;\\n                }\\n            }\\n            interfaces {\\n                vlan.1003;\\n            }\\n        }\\n\\nfirewall {\\n    policer guest-shaping {\\n        if-exceeding {\\n            bandwidth-limit 500k;\\n            burst-size-limit 300k;\\n        }\\n        then discard;\\n    }\\n    filter limit_guest_download {\\n        term guest-shaping {\\n            then {\\n                policer guest-shaping;\\n                accept;\\n            }\\n        }\\n    }\\n    filter limit_guest_upload {\\n        term guest-shaping {\\n            then {\\n                policer guest-shaping;\\n                accept;\\n            }\\n        }\\n    }\\n}\\nvlans {\\n    vlan-guest {\\n        vlan-id 1003;\\n        l3-interface vlan.1003;\\n    }\\n    vlan-trust {\\n        vlan-id 3;\\n        l3-interface vlan.0;\\n    }\\n}\\n\\n`})}),`\\n`,(0,q.jsx)($.p,{children:\\\"And there you have it! A really simple way of limiting the bandwidth of guest users on your network using the power of Junos with an Airport Extreme!\\\"}),`\\n`,(0,q.jsx)($.p,{children:\\\"\\\\xA0\\\"}),`\\n`,(0,q.jsx)(\\\"img\\\",{src:I})]})}function U(s={}){let{wrapper:$}=s.components||{};return $?(0,q.jsx)($,Object.assign({},s,{children:(0,q.jsx)(X,s)})):X(s)}var l=U;return i(h);})();\\n;return Component;\"}]}]]}]}]\n"])</script></body></html>