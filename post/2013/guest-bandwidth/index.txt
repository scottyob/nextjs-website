1:HL["/_next/static/css/70a6988bfc142772.css",{"as":"style"}]
0:["aQlZSs9CDQ5o1878iGuKG",[[["",{"children":["(navbar)",{"children":["(margined)",{"children":["post",{"children":[["slug","2013/guest-bandwidth","c"],{"children":["__PAGE__?{\"slug\":[\"2013\",\"guest-bandwidth\"]}",{}]}]}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/70a6988bfc142772.css","precedence":"next"}]],"$L3"]]]]
4:HL["/_next/static/media/42e58f5a516ebb1b-s.p.woff2",{"as":"font","type":"font/woff2"}]
5:HL["/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2",{"as":"font","type":"font/woff2"}]
6:HL["/_next/static/media/d45575ed0ad4f563-s.p.woff2",{"as":"font","type":"font/woff2"}]
7:HL["/_next/static/css/d699b3284dd0f0c8.css",{"as":"style"}]
8:HL["/_next/static/media/8679c800f1e60000-s.p.woff2",{"as":"font","type":"font/woff2"}]
9:HL["/_next/static/media/af1939b13935fec8-s.p.woff2",{"as":"font","type":"font/woff2"}]
a:HL["/_next/static/css/e1665b43251c86eb.css",{"as":"style"}]
b:I{"id":7767,"chunks":["272:static/chunks/webpack-c0d6ce99d471eac9.js","971:static/chunks/fd9d1056-f562485b1666a0a3.js","596:static/chunks/596-5b64dbf019a905f5.js"],"name":"default","async":false}
c:I{"id":7920,"chunks":["272:static/chunks/webpack-c0d6ce99d471eac9.js","971:static/chunks/fd9d1056-f562485b1666a0a3.js","596:static/chunks/596-5b64dbf019a905f5.js"],"name":"default","async":false}
d:I{"id":6685,"chunks":["685:static/chunks/685-a0750907e0c935bc.js","222:static/chunks/222-0c303d3189115893.js","982:static/chunks/982-07d375c9d37b134d.js","46:static/chunks/app/(navbar)/(margined)/page-4623163d6cd3c237.js"],"name":"","async":false}
e:I{"id":2179,"chunks":["724:static/chunks/358ff52d-5af8921f222f7c20.js","122:static/chunks/e416a3ff-be1b889799c50168.js","447:static/chunks/00cbbcb7-5522c112e5f40d45.js","685:static/chunks/685-a0750907e0c935bc.js","713:static/chunks/app/(navbar)/layout-53648850bb136a0a.js"],"name":"","async":false}
2:[["$","html",null,{"lang":"en","children":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":[["$","body",null,{"className":"__className_e66fe9","children":["$","div",null,{"className":"flex max-w-full w-full flex-col pt-8 pb-8","children":[["$","div",null,{"className":"self-center w-full","children":[["$","h1",null,{"className":"text-center text-4xl __className_31da3a","children":["$","$Ld",null,{"href":"/","children":"Scott O'Brien"}]}],["$","$Le",null,{}]]}],["$","div",null,{"className":"w-full flex flex-col","id":"main-content","children":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":[["$","div",null,{"className":"self-center mt-7 max-w-2xl w-[80%]","children":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children","(margined)","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children","(margined)","children","post","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Lb",null,{"parallelRouterKey":"children","segmentPath":["children","(navbar)","children","(margined)","children","post","children",["slug","2013/guest-bandwidth","c"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lc",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Lf",null],"segment":"__PAGE__?{\"slug\":[\"2013\",\"guest-bandwidth\"]}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/e1665b43251c86eb.css","precedence":"next"}]]}],"segment":["slug","2013/guest-bandwidth","c"]},"styles":[]}],"segment":"post"},"styles":[]}]}],null],"segment":"(margined)"},"styles":[]}]}]]}]}],null],"segment":"(navbar)"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/d699b3284dd0f0c8.css","precedence":"next"}]]}]}],null]
3:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Scott O'Brien"}],["$","meta","2",{"name":"description","content":"My online creative outlet"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}],["$","meta","5",{"name":"next-size-adjust"}]]
10:I{"id":8248,"chunks":["222:static/chunks/222-0c303d3189115893.js","982:static/chunks/982-07d375c9d37b134d.js","344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-a0f72aa7860b7ab0.js"],"name":"","async":false}
11:I{"id":3222,"chunks":["222:static/chunks/222-0c303d3189115893.js","982:static/chunks/982-07d375c9d37b134d.js","344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-a0f72aa7860b7ab0.js"],"name":"Image","async":false}
12:I{"id":9098,"chunks":["222:static/chunks/222-0c303d3189115893.js","982:static/chunks/982-07d375c9d37b134d.js","344:static/chunks/app/(navbar)/(margined)/post/[...slug]/page-a0f72aa7860b7ab0.js"],"name":"","async":false}
13:T19e1,var Component=(()=>{var x=Object.create;var g=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var r=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var V=(s,$)=>()=>($||s(($={exports:{}}).exports,$),$.exports),H=(s,$)=>{for(var c in $)g(s,c,{get:$[c],enumerable:!0})},F=(s,$,c,n)=>{if($&&typeof $=="object"||typeof $=="function")for(let y of m($))!w.call(s,y)&&y!==c&&g(s,y,{get:()=>$[y],enumerable:!(n=p($,y))||n.enumerable});return s};var e=(s,$,c)=>(c=s!=null?x(r(s)):{},F($||!s||!s.__esModule?g(c,"default",{value:s,enumerable:!0}):c,s)),i=s=>F(g({},"__esModule",{value:!0}),s);var O=V((E,_)=>{_.exports=_jsx_runtime});var h={};H(h,{default:()=>l,frontmatter:()=>Z});var q=e(O());var z="/posts/2013/guest-bandwidth/apple-airport-extreme-base-station_1-FVP6JT7X.jpg";var G="/posts/2013/guest-bandwidth/photo-1-YWAP7O3P.jpg";var I="/posts/2013/guest-bandwidth/photo-2-27AVX5IY.png";var k="/posts/2013/guest-bandwidth/AirPort-Utility1-VA53CA5C.jpg";var W="/posts/2013/guest-bandwidth/AirPort-Utility-2-RGYATMED.jpg";var Z={title:"throttling guest internet on Apple Airport Extreme",author:"scottyob",type:"post",date:new Date(1387372143e3),url:"/2013/12/18/throttling-guest-internet-on-apple-airport-extreme/",categories:["Uncategorized"],hero:"photo-1.jpg"};function X(s){let $=Object.assign({p:"p",a:"a",em:"em",pre:"pre",code:"code"},s.components);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)($.p,{children:["I've been happily running my Apple Airport Extreme as m home router for the past few years (since my debian router died, and I've been too lazy to replace it). \xA0One of the cool features was the ability to create a guest network (SSID) to access the internet without being able to access your trusted network. \xA0One feature I wanted was the ability to throttle the speed guests can access the internet at. \xA0While I couldn't do this with the Airport Extreme alone, Add a Juniper SRX100 into the mix that the awesome ",(0,q.jsx)($.a,{href:"http://cooperlees.com",children:"Cooper Lees"}),"\xA0gave me into the mix and problem solved."]}),`
`,`
`,(0,q.jsx)("img",{src:z}),`
`,(0,q.jsx)("img",{src:G}),`
`,(0,q.jsx)($.p,{children:"SRX100, signed by the #1 Juniper Engineer"}),`
`,(0,q.jsx)("img",{src:k}),`
`,(0,q.jsx)("img",{src:W}),`
`,(0,q.jsxs)($.p,{children:["In not so many words, performing these actions will do a number of things. \xA0The gig ethernet switch on the back of the airport will be bridged with the WAN port. \xA0Any traffic from your normal SSID(s) and switchports will be sent out the WAN port ",(0,q.jsx)($.em,{children:"untagged."})," \xA0Traffic from your guest network will be sent .1q tagged with vlan 1003."]}),`
`,(0,q.jsx)($.p,{children:"I popped this into fe-0/0/1 on my SRX100 and the following config works the magic."}),`
`,(0,q.jsx)($.pre,{children:(0,q.jsx)($.code,{children:`[interfaces]
    fe-0/0/1 {
        unit 0 {
            family ethernet-switching {
                port-mode trunk;
                vlan {
                    members vlan-guest;
                }
                native-vlan-id 3;
            }
        }
    }

    vlan {
        unit 0 {
            family inet {
                address 10.0.1.1/24;
            }
        }
        unit 1003 {
            family inet {
                filter {
                    input limit_guest_upload;
                    output limit_guest_download;
                }
                address 10.0.2.1/24;
            }
        }
    }

[system services]
        dhcp {
            pool 10.0.1.0/24 {
                address-range low 10.0.1.2 high 10.0.1.199;
                router {
                    10.0.1.1;
                }
            }
            pool 10.0.2.0/24 {
                address-range low 10.0.2.2 high 10.0.2.254;
                router {
                    10.0.2.1;
                }
            }
            propagate-settings fe-0/0/0.0;
        }

[security]
    nat {
        source {
            rule-set private-to-internet {
                from zone [ guest trust ];
                to zone untrust;
                rule source-nat-rule {
                    match {
                        source-address 0.0.0.0/0;
                    }
                    then {
                        source-nat {
                            interface;
                        }
                    }
                }
            }
        }
    }
    policies {
        from-zone trust to-zone untrust {
            policy trust-to-untrust {
                match {
                    source-address any;
                    destination-address any;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
        from-zone guest to-zone untrust {
            policy guest-to-internet {
                description "Allows guest access to internet";
                match {
                    source-address any;
                    destination-address any;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
    }

[security zones]
        security-zone guest {
            host-inbound-traffic {
                system-services {
                    dns;
                    ping;
                    traceroute;
                }
            }
            interfaces {
                vlan.1003;
            }
        }

firewall {
    policer guest-shaping {
        if-exceeding {
            bandwidth-limit 500k;
            burst-size-limit 300k;
        }
        then discard;
    }
    filter limit_guest_download {
        term guest-shaping {
            then {
                policer guest-shaping;
                accept;
            }
        }
    }
    filter limit_guest_upload {
        term guest-shaping {
            then {
                policer guest-shaping;
                accept;
            }
        }
    }
}
vlans {
    vlan-guest {
        vlan-id 1003;
        l3-interface vlan.1003;
    }
    vlan-trust {
        vlan-id 3;
        l3-interface vlan.0;
    }
}

`})}),`
`,(0,q.jsx)($.p,{children:"And there you have it! A really simple way of limiting the bandwidth of guest users on your network using the power of Junos with an Airport Extreme!"}),`
`,(0,q.jsx)($.p,{children:"\xA0"}),`
`,(0,q.jsx)("img",{src:I})]})}function U(s={}){let{wrapper:$}=s.components||{};return $?(0,q.jsx)($,Object.assign({},s,{children:(0,q.jsx)(X,s)})):X(s)}var l=U;return i(h);})();
;return Component;f:["$","article",null,{"className":"","children":["$","div",null,{"className":"__className_12746b mb-9","children":[["$","h2",null,{"className":"__className_df02b7 text-2xl","children":"throttling guest internet on Apple Airport Extreme"}],["$","div",null,{"className":"text-xs text-gray-400 italic mb-5","children":["Created: ",["$","$L10",null,{"date":"$D2013-12-18T13:09:03.000Z"}]]}],["$","$L11",null,{"src":{"src":"/_next/static/media/photo-1.c580ffbb.jpg","height":1224,"width":1632,"blurDataURL":"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAGAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAP/xAAeEAABBQACAwAAAAAAAAAAAAABAAIDBREEBiExQf/EABQBAQAAAAAAAAAAAAAAAAAAAAX/xAAaEQACAwEBAAAAAAAAAAAAAAACAwABEUFR/9oADAMBAAIRAxEAPwCJt7ux7FFWz8lhn47tZINazDmktH3x6RER7WENDQ+RFagLdrs//9k=","blurWidth":8,"blurHeight":6},"alt":"Post picture","className":"m-auto mb-5"}],["$","div",null,{"className":"prose lg:prose-lg","children":["$","$L12",null,{"code":"$13"}]}]]}]}]
